<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>
            Usenix 2004: Tuesday notes
        </title>
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <link rel="stylesheet" href="/static/css/main.min.css" type="text/css" media="all"><!--[if lte IE 8]>
            <link rel="stylesheet" href="/static/css/ie-fixes.css" type="text/css" media="all">
            <script src="/static/js/html5shiv.js"></script>
        <![endif]-->
        <meta http-equiv="last-modified" content="Wed, 30 Jun 2004 05:54:31 GMT">
        <link rel="alternate" type="application/atom+xml" title="All Posts (Atom)" href="/feeds/all.atom">
        <link rel="alternate" type="application/rss+xml" title="All Posts (RSS)" href="/feeds/all.rss">
        <link rel="icon" type="image/jpeg" sizes="287x287" href="/static/img/favicon-287x287.jpg">
        <link rel="icon" type="image/jpeg" sizes="128x128" href="/static/img/favicon-128x128.jpg">
        <script type="application/javascript">
var _prum={id:"5166be01e6e53d1007000001"};var PRUM_EPISODES=PRUM_EPISODES||{};PRUM_EPISODES.q=[];PRUM_EPISODES.mark=function(b,a){PRUM_EPISODES.q.push(["mark",b,a||new Date().getTime()])};PRUM_EPISODES.measure=function(b,a,b){PRUM_EPISODES.q.push(["measure",b,a,b||new Date().getTime()])};PRUM_EPISODES.done=function(a){PRUM_EPISODES.q.push(["done",a])};PRUM_EPISODES.mark("firstbyte");(function(){var b=document.getElementsByTagName("script")[0];var a=document.createElement("script");a.type="text/javascript";a.async=true;a.charset="UTF-8";a.src="//rum-static.pingdom.net/prum.min.js";b.parentNode.insertBefore(a,b)})();
        </script>
    </head>
    <body class="blog post_detail" itemscope itemtype="http://schema.org/BlogPosting">
        <nav id="site-nav">
            <header id="about">
                <h1>
                    <a href="/about/">Chris Adams</a>
                </h1>
                <h2>
                    Programmer, cyclist, photographer
                </h2>
            </header>
            <ul class="links">
                <li>
                    <a href="/">Home</a>
                </li>
                <li>
                    <a href="/about/">About</a>
                </li>
                <li>
                    <a href="/feeds/all.atom" title="Site Feed">Site Feed</a>
                </li>
            </ul>
            <ul class="social-networks">
                <li>
                    <a href="https://github.com/acdha" rel="me">Github</a>
                </li>
                <li>
                    <a href="http://bitbucket.org/acdha" rel="me">Bitbucket</a>
                </li>
                <li>
                    <a href="http://delicious.com/acdha" rel="me">del.icio.us</a>
                </li>
                <li>
                    <a href="http://twitter.com/acdha" rel="me">Twitter</a>
                </li>
                <li>
                    <a href="https://plus.google.com/116562742092842686896?rel=author" rel="me">Google+</a>
                </li>
                <li>
                    <a href="http://www.flickr.com/photos/acdha" rel="me">Flickr</a>
                </li>
                <li>
                    <a href="http://www.linkedin.com/in/acdha" rel="me">LinkedIn</a>
                </li>
                <li>
                    <a href="http://connect.garmin.com/explore?owner=acdha" rel="me">Garmin Connect</a>
                </li>
            </ul>
            <div id="site-search"></div>
        </nav>
        <section id="main">
            <article class="post">
                <header>
                    <meta itemprop="dateCreated" content="2004-06-29T18:54:31-04:00">
                    <meta itemprop="dateModified" content="2004-06-30T01:54:31-04:00"><time class="date" itemprop="datePublished" datetime="2004-06-30T05:54:31+00:00">Jun 30</time>
                    <h2 itemprop="title">
                        Usenix 2004: Tuesday notes
                    </h2>
                </header>
                <div class="body" itemprop="articleBody">
                    <h1>
                        Network Complexity: How Do I Manage All of This?
                    </h1>
                    <p>
                        Eliot Lear (Cisco)
                    </p>
                    <ul>
                        <li>Why is all this management stuff important?
                        </li>
                    </ul>
                    <ul>
                        <li>The entire world runs on IP now.
                        </li>
                    </ul>
                    <ul>
                        <li>Status
                        </li>
                        <li>Decent fault / performance monitoring
                        </li>
                        <li>Accounting tools are immature
                        </li>
                        <li>Configuration: “Everyone is in complete agreement that we’ve never been able to standardize”
                        </li>
                        <li>What’s changed lately?
                        </li>
                        <li>Focus on security has resulted in more attention on network management
                        </li>
                        <li>More network elements to be managed
                        </li>
                        <li>Networks are more complex (VoIP, VPNs, etc.)
                        </li>
                        <li>We rely on them more
                        </li>
                        <li>Discovery has been distrusted on security grounds
                        </li>
                        <li>The bad guys can discover things anyway so make the network manageable.
                        </li>
                        <li>Most discovery protocols don’t scale to large-scale networks (&gt;10^3 devices)
                        </li>
                        <li>The Standards Mess
                        </li>
                        <li>“We are swimming in standards” - confusing vendors, customers, etc.
                        </li>
                        <li>We don’t have the right standards:
                        </li>
                        <li>Sample mobile device needs config by user, VoIP provider, ISP, and corporate. Nothing standard supports this.
                        </li>
                        <li>Basic management has become widespread (SNMP, Syslog, etc.)
                        </li>
                        <li>Fault management
                        </li>
                        <li>Ad-hoc approach. Nothing standard, users frequently confronted with inscrutable error messages, etc.
                        </li>
                        <li>Workflow management: fixing problems before stuff breaks (avoiding reactive management)
                        </li>
                        <li>Anomaly management: stop pretending that security management is unrelated - it’s not (spam, phishing, etc.)
                        </li>
                        <li>The more it touches your network, the more it costs you
                        </li>
                        <li>IDS
                        </li>
                        <li>Requires IDS:Configuration:Audit feedback loop
                        </li>
                        <li>Needs very mature, reliable tools (e.g. don’t accidentally disable the network) but what’s out there is still immature
                        </li>
                        <li>Monitoring
                        </li>
                        <li>Faults may masquerade as other classes (e.g. performance faults may look like security faults, etc.)
                        </li>
                        <li>“A violation of the laws of physics is a sign of a problem”
                        </li>
                        <li>Configuration management
                        </li>
                        <li>We need to hide information / details (car analogy - casual users aren’t swamped with details, allowing you to switch cars trivially)
                        </li>
                        <li>Unix has had 30 years and is far from perfect
                        </li>
                        <li>POSIX works well if you stay away from hardware but networking doesn’t have the luxury
                        </li>
                        <li>Consider the mess of simple problems like user accounts or config formats
                        </li>
                        <li>Standardizing network management
                        </li>
                        <li>XML is not a panacea
                        </li>
                        <li>HTTP doesn’t work - we need locking, “phone home” ability
                        </li>
                        <li>
                            <em>NETCONF</em>
                        </li>
                        <li>XML
                        </li>
                        <li>Multiple transports:
                        </li>
                        <li>BEEP
                        </li>
                        <li>SSH
                        </li>
                        <li>Data-model agnostic (i.e. “we couldn’t standardize that”)
                        </li>
                        <li>We need help
                        </li>
                        <li>Identity Management
                        </li>
                        <li>Marginal at corporate level, dismal for consumers
                        </li>
                        <li>Problems:
                        </li>
                        <li>Maze of different systems
                        </li>
                        <li>Identity theft, privacy concerns
                        </li>
                        <li>Goals
                        </li>
                        <li>Standard interface
                        </li>
                        <li>User-oriented control - you control your data, not some company with different goals
                        </li>
                        <li>
                            <p>
                                Conclusions
                            </p>
                        </li>
                        <li>Too much data is BAD
                        </li>
                        <li>We need better filtering and aggregation tech
                        </li>
                        <li>Some linkage is still missing for automation
                        </li>
                        <li>Security and Network management are very tightly related
                        </li>
                        <li>Expected more from your local router
                        </li>
                        <li>We’re awash in keys!
                        </li>
                        <li>
                            <p>
                                Q&amp;A
                            </p>
                        </li>
                        <li>Sun’s DTrace: reprogrammable instrumentation is a big advance
                        </li>
                        <li style="list-style: none; display: inline">
                            <h1>
                                Deploying Commercial DB on Linux (Harvard Room)
                            </h1>
                            <ul>
                                <li>2.6 is good. Backports can take a lot of the pain out but it’s not the same
                                </li>
                                <li>IO latency is a big deal - maximize spindles rather than throughput
                                </li>
                                <li>Carefully monitor actual performance - big disk arrays are dicey just because it’s hard to tell where data actually lives.
                                </li>
                            </ul>
                            <h1>
                                NFS Deployment for High Performance
                            </h1>
                            <ul>
                                <li>NetApp has been pushing RDMA extensions for NFS (v4 standard?) - IETF lists have the details.
                                </li>
                                <li>Goals: make NFS as good or better than a local FS
                                </li>
                                <li>What really matters for client performance:
                                </li>
                            </ul>
                            <ul>
                                <li>Caching
                                </li>
                                <li>Wire efficiency
                                </li>
                                <li>Single mount point parallelism
                                </li>
                                <li>Multi-NIC scalability (bonding up to NIC vendor)
                                </li>
                                <li>Latency
                                </li>
                                <li>CPU cost (copies, additional TCP/IP overhead)
                                </li>
                            </ul>
                        </li>
                        <li>Tunings
                        </li>
                        <li>Interconnect
                        </li>
                        <li>NIC: hardware checksums, large-send offload
                        </li>
                        <li>Routing
                        </li>
                        <li>Jumbo frames
                        </li>
                        <li>Client
                        </li>
                        <li>Mount options
                        </li>
                        <li>rsize/wsize
                        </li>
                        <li>Attribute caching to ensure consistency:
                        </li>
                        <li>Timeouts, noac (no attribute cache), nocto (cache timeout)
                        </li>
                        <li>llock - use local locking semantics to avoid implied non-cacheability for lock; useful for files which are only accessed from the current machine
                        </li>
                        <li>Readahead - disable for random i/o
                        </li>
                        <li>biod / rpc slot table (Linux) - per mount point, increase for busy clients
                        </li>
                        <li>Network buffers
                        </li>
                        <li>system/nfs default socket buffers
                        </li>
                        <li>send/receive highwater limits - increase to something like 1/4 socket buffer
                        </li>
                        <li>Server
                        </li>
                        <li>Use appliance (dedicated, tuned)
                        </li>
                        <li>Volume / spindle tuning
                        </li>
                        <li>Balance file distribution
                        </li>
                        <li>Volume options
                        </li>
                        <li>noatime updates
                        </li>
                        <li>snapshots for backups
                        </li>
                        <li>War stories
                        </li>
                        <li>App runs 50x slower on NFS than local: block-transfer verified that NFS files were bypassing host buffer cache because multithreaded client caused out-of-order writes
                        </li>
                        <li>File locks - client caching varies widely based on lock type (disable, don’t prefetch, etc.)
                        </li>
                        <li>Most clients lack control over this
                        </li>
                        <li>Overzealous prefetch - random reads trigger tons of unnecessary requests (app reads much less than wire reads)
                        </li>
                        <li>Bad clients
                        </li>
                        <li>Artificial operation size limits (e.g. 8KB per-write limit) - may require sniffer
                        </li>
                        <li>Linux uses page-size chunks:
                        </li>
                        <li>page size &lt; r/wsize I/O may be split
                        </li>
                        <li>page size &gt; r/wsize operations will be split and serialized
                        </li>
                        <li>NetApp released patches; 2.6 / NFSv4 client backports should be better
                        </li>
                        <li>RPC slot limitation - max outstanding requests cripple throughput (Linux has 16-op-per-mount limit)
                        </li>
                        <li>2.6 kernel: increase /proc/sys/sunrpc/(tcp|udp)<em>slot</em>table_entries
                        </li>
                        <li>Writers block readers
                        </li>
                        <li>Databases on NFS: http://www.netapp.com/tech_library/ftp/3322.pdf
                        </li>
                        <li>Tools
                        </li>
                        <li>NetApp I/O generator: SIO
                        </li>
                        <li>Future
                        </li>
                        <li>RDMA: no host CPU use, special interconnect (Infiniband, iWarp)
                        </li>
                        <li style="list-style: none; display: inline">
                            <h1>
                                In the trenches: Enterprise Wireless LANs
                            </h1>
                            <ul>
                                <li>Reefedge architecture
                                </li>
                            </ul>
                            <ul>
                                <li>Connect Server (auth, user management, config, monitoring, etc)
                                </li>
                                <li>Edge controller (policy enforcement, packet routing, service proxies)
                                </li>
                            </ul>
                        </li>
                        <li>
                            <p>
                                Network design
                            </p>
                        </li>
                        <li>RF Coverage analysis or self-tuning APs
                        </li>
                        <li>QoS
                        </li>
                        <li>Mobility
                        </li>
                        <li>
                            <p>
                                Q&amp;A
                            </p>
                        </li>
                        <li>U Utah uses Meeting House 802.1x client on Windows, OS X &lt; 10.3
                        </li>
                        <li>Presenter, several others use FreeBSD + HiFN crypto to deliver &gt;80Mbs IPSec on &lt; 1GHz systems
                        </li>
                        <li style="list-style: none; display: inline">
                            <h1>
                                Linux on Opteron BoF
                            </h1>
                            <ul>
                                <li>Trivia: Opterons interleave memory. Fill every slot!
                                </li>
                                <li>AMD interested in tuning tools, helping programmers w/NUMA, etc.
                                </li>
                            </ul>
                            <h1>
                                LinuxBIOS BoF
                            </h1>
                            <ul>
                                <li>Vendors:
                                </li>
                            </ul>
                            <ul>
                                <li>VIA, Octiga Bay, Linux Networks all shipping LinuxBIOS
                                </li>
                                <li>AMD very supportive (K8 support is great), IBM also good but less so
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </article>
            <nav id="post-nav"></nav><script id="discus-javascript">
    var disqus_shortname = 'improbable';

                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                    document.getElementsByTagName('body')[0].appendChild(dsq);
                })();
            </script><a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            <div id="disqus_thread"></div>
        </section>
        <footer id="site-footer" class="nocontent">
            <p>
                This site is purely my personal work and does not reflect the views of my employer.
            </p>
            <p class="license">
                <a class="icon" rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png"></a> This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
            </p>
        </footer><script async="" defer src="/static/js/common.js">
</script><script id="google-analytics">
    var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-2097834-1']);
            _gaq.push(['_setDomainName', 'improbable.org']);
            _gaq.push(['_trackPageview']);

            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
        </script>
    </body>
</html>
