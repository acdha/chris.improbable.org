<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Security in Depth: HTML5’s @sandbox</title>
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <link rel="stylesheet" href="/static/css/main.min.css" type="text/css" media="all">
        <!--[if lte IE 8]>
            <link rel="stylesheet" href="/static/css/ie-fixes.css" type="text/css" media="all">
            <script src="/static/js/html5shiv.js"></script>
        <![endif]-->

        <meta http-equiv="last-modified" content="Thu, 27 May 2010 22:25:20 GMT">
        <link rel="alternate" type="application/atom+xml" title="All Posts (Atom)" href="/feeds/all.atom">
        <link rel="alternate" type="application/rss+xml" title="All Posts (RSS)" href="/feeds/all.rss">
        <link rel="icon" type="image/jpeg" sizes="287x287" href="/static/img/favicon-287x287.jpg">
        <link rel="icon" type="image/jpeg" sizes="128x128" href="/static/img/favicon-128x128.jpg">
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-2097834-1', 'auto');
            ga('send', 'pageview');
        </script>
    </head>
    <body class="blog post_detail" itemscope itemtype="http://schema.org/BlogPosting">
        <nav id="site-nav">
            <header id="about">
                <h1><a href="/about/">Chris Adams</a></h1>
                <h2>Programmer, cyclist, photographer</h2>
            </header>
            <ul class="links">
                <li>
                    <a href="/">Home</a>
                </li>
                <li>
                    <a href="/about/">About</a>
                </li>
                <li>
                    <a href="/feeds/all.atom" title="Site Feed">Site Feed</a>
                </li>
            </ul>
            <ul class="social-networks">
                <li>
                    <a href="https://github.com/acdha" rel="me">Github</a>
                </li>
                <li>
                    <a href="https://bitbucket.org/acdha" rel="me">Bitbucket</a>
                </li>
                <li>
                    <a href="https://pinboard.in/u:acdha/" rel="me">Pinboard</a>
                </li>
                <li>
                    <a href="https://twitter.com/acdha" rel="me">Twitter</a>
                </li>
                <li>
                    <a href="https://www.flickr.com/photos/acdha" rel="me">Flickr</a>
                </li>
                <li>
                    <a href="https://www.linkedin.com/in/acdha" rel="me">LinkedIn</a>
                </li>
            </ul>
            <div id="site-search"></div>
        </nav>
        <section id="main">
            <article class="post">
                <header>
                    <meta itemprop="dateCreated" content="2010-05-27T13:05:00-04:00">
                    <meta itemprop="dateModified" content="2010-05-27T13:05:00-04:00">
                    <time class="date" itemprop="datePublished" datetime="2010-05-27T17:05:00+00:00">May 27</time>
                    <h2 class="" itemprop="title">Security in Depth: HTML5’s @sandbox</h2>
                </header>

                <div class="body" itemprop="articleBody"><div class="googlereader description" data-google-id="tag:google.com,2005:reader/item/ea8d74ecc7512de7">
                        <blockquote>
                            With the <a href="http://chrome.blogspot.com/2010/05/new-chrome-stable-release-welcome-mac.html">latest release</a> of Google Chrome, Chrome is the first browser to include support for a new HTML5 feature that lets web developers reduce the privileges of parts of their web pages by including a "sandbox" attribute in iframes:<br>
                            <blockquote>
                                <span style="font-family:'courier new'">&lt;iframe sandbox src="http://attacker.com/untrusted.html"&gt;&lt;/iframe&gt;</span>
                            </blockquote><br>
                            When displaying untrusted.html in a sandboxed iframe, the browser renders untrusted.html with reduced privileges (e.g., disabling JavaScript and popups), similar in spirit to how Google Chrome sandboxes its rendering engine.<br>
                            <br>
                            <b>Whitelisting</b><br>
                            <br>
                            You can give untrusted.html some of its privileges back by whitelisting the privileges in the value of the sandbox attribute. For example, if you wanted untrusted.html to be able to run scripts and contain forms, you could use the following markup:<br>
                            <blockquote>
                                <span style="font-family:'courier new'">&lt;iframe sandbox="allow-scripts allow-forms" src="http://attacker.com/untrusted.html"&gt;&lt;/iframe&gt;</span>
                            </blockquote><br>
                            Because <span style="font-family:'courier new'">@sandbox</span> is a white list, the browser still imposes the remainder of the sandbox restrictions on untrusted.html. For example, untrusted.html does not have the privilege to create popup windows or instantiate plug-ins. The <a href="http://www.whatwg.org/specs/web-apps/current-work/#attr-iframe-sandbox">full list of supported directives is listed in the HTML5 specification</a>.<br>
                            <br>
                            <b>Legacy browsers</b><br>
                            <br>
                            When using the sandbox attribute, you need to think carefully about how legacy browsers (which do not support <span style="font-family:'courier new'">@sandbox</span>) will interpret your HTML. The easiest way to use <span style="font-family:'courier new'">@sandbox</span> is for "defense-in-depth." Instead of relying upon <span style="font-family:'courier new'">@sandbox</span> as your only line of defense, you can use it as an additional security mitigation in case your first line of defense (such as output encoding) fails. Because legacy browsers ignore attributes they do not understand, you can add <span style="font-family:'courier new'">@sandbox</span> to existing iframes and improve security for users of newer browsers.<br>
                            <br>
                            If you want to display untrusted content only in browsers that support <span style="font-family:'courier new'">@sandbox</span>, you can detect whether the browser supports <span style="font-family:'courier new'">@sandbox</span> using the follow code:<br>
                            <div>
                                <pre>
<br>if ("sandbox" in document.createElement("iframe")) {<br>   // This browser supports @sandbox.  We can sandbox untrusted<br>content with confidence.<br>}<br>
</pre>
                            </div><br>
                            <br>
                            <span>Posted by Adam Barth, Software Engineer</span>
                            <div>
                                <img width="1" height="1" src="https://blogger.googleusercontent.com/tracker/2471378914199150966-1913437320148839983?l=blog.chromium.org" alt="">
                            </div>
                        </blockquote>
                    </div>
                    <p class="bookmark-source">
                        Source: <a href="http://blog.chromium.org/2010/05/security-in-depth-html5s-sandbox.html">http://blog.chromium.org/2010/05/security-in-depth-html5s-sandbox.html</a>
                    </p>
                </div>
            </article>

            <nav id="post-nav">


            </nav>

            <script id="discus-javascript">
                var disqus_shortname = 'improbable';

                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
                    document.getElementsByTagName('body')[0].appendChild(dsq);
                })();
            </script>

            <a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            <div id="disqus_thread"></div>
        </section>

        <footer id="site-footer" class="nocontent">
            <p>
                This site is purely my personal work and does not reflect the views of my employer.
            </p>
            <p class="license">
                <a class="icon" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png"></a>
                This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
            </p>
        </footer>

        <script async src="/static/js/common.js"></script>
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/run_prettify.min.js" integrity="sha256-hj+5FRlAuvAFANiefn0PpJYCkV1X4QT9EgiPd+6QnCw=" crossorigin="anonymous"></script>
    </body>
</html>
