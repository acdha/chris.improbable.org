<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>DVCS Ponies</title>
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <link rel="stylesheet" href="/static/css/main.min.css" type="text/css" media="all">
        <!--[if lte IE 8]>
            <link rel="stylesheet" href="/static/css/ie-fixes.css" type="text/css" media="all">
            <script src="/static/js/html5shiv.js"></script>
        <![endif]-->

        <meta http-equiv="last-modified" content="Sun, 10 Jan 2010 00:21:29 GMT">
        <link rel="alternate" type="application/atom+xml" title="All Posts (Atom)" href="/feeds/all.atom">
        <link rel="alternate" type="application/rss+xml" title="All Posts (RSS)" href="/feeds/all.rss">
        <link rel="icon" type="image/jpeg" sizes="287x287" href="/static/img/favicon-287x287.jpg">
        <link rel="icon" type="image/jpeg" sizes="128x128" href="/static/img/favicon-128x128.jpg">
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-2097834-1', 'auto');
            ga('send', 'pageview');
        </script>
    </head>
    <body class="blog post_detail" itemscope itemtype="http://schema.org/BlogPosting">
        <nav id="site-nav">
            <header id="about">
                <h1><a href="/about/">Chris Adams</a></h1>
                <h2>Programmer, cyclist, photographer</h2>
            </header>
            <ul class="links">
                <li>
                    <a href="/">Home</a>
                </li>
                <li>
                    <a href="/about/">About</a>
                </li>
                <li>
                    <a href="/feeds/all.atom" title="Site Feed">Site Feed</a>
                </li>
            </ul>
            <ul class="social-networks">
                <li>
                    <a href="https://github.com/acdha" rel="me">Github</a>
                </li>
                <li>
                    <a href="https://bitbucket.org/acdha" rel="me">Bitbucket</a>
                </li>
                <li>
                    <a href="https://pinboard.in/u:acdha/" rel="me">Pinboard</a>
                </li>
                <li>
                    <a href="https://twitter.com/acdha" rel="me">Twitter</a>
                </li>
                <li>
                    <a href="https://www.flickr.com/photos/acdha" rel="me">Flickr</a>
                </li>
                <li>
                    <a href="https://www.linkedin.com/in/acdha" rel="me">LinkedIn</a>
                </li>
            </ul>
            <div id="site-search"></div>
        </nav>
        <section id="main">
            <article class="post">
                <header>
                    <meta itemprop="dateCreated" content="2010-01-09T19:21:29-04:00">
                    <meta itemprop="dateModified" content="2010-01-09T19:21:29-04:00">
                    <time class="date" itemprop="datePublished" datetime="2010-01-09T23:21:29+00:00">Jan 09</time>
                    <h2 class="" itemprop="title">DVCS Ponies</h2>
                </header>

                <div class="body" itemprop="articleBody"><div class="googlereader description" data-google-id="tag:google.com,2005:reader/item/994d62bbd925d14e">
                        <blockquote>
                            <p>
                                So, I have a pony to share. Just maybe someone likes the idea and has thought of something similar :) So, one of the problems the Python guys currently have with mercurial is, that they need newline normalization/conversion on checkout. The problem with decentralized systems is that the client is a server and runs a stock <abbr>DVCS</abbr> client with his own set of hooks. In subversion you have a centralized hook that will check stuff and reject commits or rewrite them if they do not work out as expected.
                            </p>
                            <p>
                                Now I am very happy that hg is decentralized, but at the end of the day everything ends up in a centralized repository and there certain rules apply. So what I do is review all patches by hand in detail and rewrite parts if they do not match the code style, line endings etc. So what I thought about is doing the check/conversion in a local commit hook and in a pre-changeset hook on the server as well, so that I for myself get stopped early checking stupid stuff in and the server later rejects changesets for sure that are improper.
                            </p>
                            <p>
                                So I have no problem doing that check twice, but other users that are not so fortunate to have my extension might still check improper stuff in and will not even know it, because nothing stops them from doing so. But I will still have to deal with that later and there will be rejections from the server.
                            </p>
                            <p>
                                So what about an optional extension distribution system? Say you clone the zine repository and the hg client after clone proposes to download and activate some extensions for you? You can still veto them of course, but you could also accept and it helps to improve your code quality.
                            </p>
                            <p>
                                There are a couple of such extensions I would love to see that are distributed that way:
                            </p>
                            <ul>
                                <li>codestyle (<abbr>PEP</abbr> 8) conformance checker that warn if invalid stuff is checked in
                                </li>
                                <li>newline conversions or warnings
                                </li>
                                <li>ensures that files end with a trailing newline
                                </li>
                                <li>warnings if certain files are checked in (object files, debugger informations etc, stackdumps etc.)
                                </li>
                                <li>automatic copyright header updating tools (got a change in 2010? Copyright message is updated)
                                </li>
                                <li>check line lengths
                                </li>
                                <li>run test suites
                                </li>
                            </ul>
                            <p>
                                All these extensions are project specific so someone has to adapt them for each project and provide them somewhere to download. There could be a <code>.hgextensions</code> file that contains download links for each of those extensions (including mirrors) or even relative links to extension scripts in the repository.
                            </p>
                            <p>
                                I think that would be easy to implement and if the user has the chance to veto the installation/activation it could be quite secure as well (one could even display the user the code of the extension he is about to install for that repository). Unfortunately it would require a change in the hg wire protocol so I guess it's unlikely to be implemented, but on the other hand if there is a wire protocol change planned, why not think about that?
                            </p>
                            <p>
                                Interested to hear your input :)
                            </p>
                        </blockquote>
                    </div>
                    <p class="bookmark-source">
                        Source: <a href="http://lucumr.pocoo.org/2010/1/10/dvcs-ponies">http://lucumr.pocoo.org/2010/1/10/dvcs-ponies</a>
                    </p>
                </div>
            </article>

            <nav id="post-nav">


            </nav>

            <script id="discus-javascript">
                var disqus_shortname = 'improbable';

                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
                    document.getElementsByTagName('body')[0].appendChild(dsq);
                })();
            </script>

            <a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            <div id="disqus_thread"></div>
        </section>

        <footer id="site-footer" class="nocontent">
            <p>
                This site is purely my personal work and does not reflect the views of my employer.
            </p>
            <p class="license">
                <a class="icon" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png"></a>
                This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
            </p>
        </footer>

        <script async src="/static/js/common.js"></script>
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/run_prettify.min.js" integrity="sha256-hj+5FRlAuvAFANiefn0PpJYCkV1X4QT9EgiPd+6QnCw=" crossorigin="anonymous"></script>
    </body>
</html>
