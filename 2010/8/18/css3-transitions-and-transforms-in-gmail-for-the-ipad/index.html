<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>CSS3 Transitions and Transforms in Gmail for the iPad</title>
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <link rel="stylesheet" href="/static/css/main.min.css" type="text/css" media="all">
        <!--[if lte IE 8]>
            <link
                rel="stylesheet"
                href="/static/css/ie-fixes.css"
                type="text/css"
                media="all"
            />
            <script src="/static/js/html5shiv.js"></script>
        <![endif]-->

        <meta http-equiv="last-modified" content="Wed, 18 Aug 2010 22:31:11 GMT">
        <link rel="alternate" type="application/atom+xml" title="All Posts (Atom)" href="/feeds/all.atom">
        <link rel="alternate" type="application/rss+xml" title="All Posts (RSS)" href="/feeds/all.rss">
        <link rel="icon" type="image/jpeg" sizes="287x287" href="/static/img/favicon-287x287.jpg">
        <link rel="icon" type="image/jpeg" sizes="128x128" href="/static/img/favicon-128x128.jpg">
    </head>
    <body class="blog post_detail" itemscope itemtype="http://schema.org/BlogPosting">
        <nav id="site-nav">
            <header id="about">
                <h1><a href="/about/">Chris Adams</a></h1>
                <h2>Programmer, cyclist, photographer</h2>
            </header>
            <ul class="links">
                <li>
                    <a href="/">Home</a>
                </li>
                <li>
                    <a href="/about/">About</a>
                </li>
                <li>
                    <a href="/feeds/all.atom" title="Site Feed">Site Feed</a>
                </li>
            </ul>
            <ul class="social-networks">
                <li>
                    <a rel="me" href="https://code4lib.social/@acdha">Mastodon</a>
                </li>
                <li>
                    <a href="https://github.com/acdha" rel="me">Github</a>
                </li>
                <li>
                    <a href="https://bitbucket.org/acdha" rel="me">Bitbucket</a>
                </li>
                <li>
                    <a href="https://pinboard.in/u:acdha/" rel="me">Pinboard</a>
                </li>
                <li>
                    <a href="https://www.flickr.com/photos/acdha" rel="me">Flickr</a>
                </li>
                <li>
                    <a href="https://www.linkedin.com/in/acdha" rel="me">LinkedIn</a>
                </li>
            </ul>
            <div id="site-search"></div>
        </nav>
        <section id="main">
            <article class="post">
                <header>
                    <meta itemprop="dateCreated" content="2010-08-18T18:30:00-04:00">
                    <meta itemprop="dateModified" content="2010-08-18T18:30:00-04:00">
                    <time class="date" itemprop="datePublished" datetime="2010-08-18T22:30:00+00:00">Aug 18</time>
                    <h2 class="" itemprop="title">CSS3 Transitions and Transforms in Gmail for the iPad</h2>
                </header>

                <div class="body" itemprop="articleBody"><div class="googlereader description" data-google-id="tag:google.com,2005:reader/item/dcac943ae58cbae7">
                        <blockquote>
                            The Mobile Gmail team recently announced a new <a href="http://googlemobile.blogspot.com/2010/08/iterative-web-app-new-stacked-cards.html">stacked cards interface</a> for the iPad. In this interface we make use of CSS3 transitions and transforms to provide a more intuitive interface that has a look and feel that is similar to native applications. In this post we will describe CSS3 transitions and transforms and how they were used to develop this interface. All of the CSS and JavaScript examples currently work only in WebKit-based browsers, such as Safari on the iPad. However, Mozilla-based browsers have their own versions of WebKit-based extensions that use the ‘<span>-moz</span>’ prefix, and that should behave similarly.<br>
                            <br>
                            <b>CSS3 Transitions</b><br>
                            <br>
                            <a href="http://developer.apple.com/safari/library/documentation/internetweb/conceptual/safarivisualeffectsprogguide/Transitions/Transitions.html#//apple_ref/doc/uid/TP40008032-CH4-SW1">CSS3 transitions</a> allow the browser to animate the change of a CSS property from an initial value to a final value. A transition is configured by setting four CSS properties on an HTML element:<br>
                            <ul>
                                <li>
                                    <code>-webkit-transition-property</code>
                                </li>
                                <li>
                                    <code>-webkit-transition-duration</code>
                                </li>
                                <li>
                                    <code>-webkit-transition-timing-function</code>
                                </li>
                                <li>
                                    <code>-webkit-transition-delay</code>
                                </li>
                            </ul>The <code>-webkit-transition-property</code> property identifies the CSS properties where changes to the property will trigger a transition between the old value of the property and the new value. The <code>-webkit-transition-duration</code> property specifies, in milliseconds, the length of time over which the transition should take place. The <code>-webkit-transition-timing-function</code> property describes the speed at which the transition progresses over the duration of the transition. For example, <code>-webkit-transition-timing-function: ease-in-out</code> describes a transition that will proceed slowly at the beginning and the end of the transition, but that will proceed quickly during the middle of the transition. You can also provide a custom, cubic-bezier function for a higher degree of control over the timing. The <span>-webkit-transition-delay</span> property specifies a delay, measured in milliseconds, before the transition begins.<br>
                            <br>
                            The transition properties can also be set simultaneously using the <code>-webkit-transition</code> property, by simply specifying them in the above order. Once the transitions properties are set and up to the point where the value of <code>-webkit-transition-property</code> is changed, all modifications of the specified CSS properties will trigger transitions.<br>
                            <br>
                            <b>CSS3 Transforms</b><br>
                            <br>
                            <a href="http://developer.apple.com/safari/library/documentation/internetweb/conceptual/safarivisualeffectsprogguide/Transforms/Transforms.html#//apple_ref/doc/uid/TP40008032-CH5-SW1">CSS3 transforms</a> allow the rendering of an HTML element to be modified using 2D and 3D transformations such as rotation, scaling, and translations. Transforms are applied by setting the <code>-webkit-transform</code> CSS property with the desired list of transforms. Each transform takes the form of a transformation function, such as <code>translate3d</code> or <code>rotate</code>, and a list of parameters enclosed in brackets. For example, to move an object to the right by 100 pixels and rotate it by 45 degrees you can use the <code>-webkit-transform</code> property:<br>
                            <br>
                            <code>-webkit-transform: translate(100px, 0) rotate(45deg);</code><br>
                            <br>
                            Using <code>-webkit-transform</code> as the transition property when moving an element is advantageous relative to using the standard <code>top</code> and <code>left</code> properties because transitions using <code>-webkit-transform</code> are hardware-accelerated in Safari. An exception here is that it seems that 2D translations are <a href="http://mir.aculo.us/2010/06/04/making-an-ipad-html5-app-making-it-really-fast/">not hardware-accelerated</a>. But, since any 2D translation is equivalent to a corresponding 3D translation with the same translations in the x and y and no translation in the z axis, it is easy to use a hardware accelerated <span>translate3d(x, y, 0)</span> transform instead of a non-hardware accelerated <code>translate(x, y)</code> transform.<br>
                            <br>
                            <b>Terminology</b><br>
                            <br>
                            There are a few terms here that begin with ‘trans,’ and they can easily be confused if you are not familiar with them. Here they are again:<br>
                            <ul>
                                <li>Transition: An implicit animation of CSS properties between an initial and a final value.
                                </li>
                                <li>Transform: A modification to the appearance of an HTML element by manipulating it in a 2D or 3D space.
                                </li>
                                <li>Translation: A particular type of transformation that moves the HTML element in 2D or 3D space.
                                </li>
                            </ul><b>Stacked Cards Interface</b><br>
                            <br>
                            In the stacked cards interface, cards representing selected conversations transition onto the screen when their corresponding conversation is selected, and transition off of the screen when it is deselected.<br>
                            <br>
                            When cards are selected, they are transitioned out from underneath the conversation list on the left side of the application into the selected conversation area on the right side of the application. To move the card onto the screen, we set an initial transform, configure the transition, and finally apply the desired final transform to the element.<br>
                            <br>
                            To simplify the layout, the un-transformed position of each card is its normal position in the selected conversation area. This allows the card to have no translation applied when in this position, although it will need a translation to animate the movement. Initially the card has a transform that translates it to the left. The z-index property is used to ensure that the card will render underneath the conversation list. The rotation of the card is also initially applied, since we chose not to have the card rotate as it transitions onto the screen.<br>
                            <br>
                            <code>card.style.WebkitTransform =</code><br>
                            <code>‘translate3d(-700px, 0, 0) rotate(5deg)’;</code><br>
                            <br>
                            Since the particular translation and rotation can vary, we chose to apply this property using JavaScript rather than including it in the CSS class applied to the card. It is important that the CSS3 transition is not yet applied because we do not want this transform to be a transition. Moreover, it is important that the card is rendered at its initial transform before the transition is configured and the destination transform is applied. This is easily achieved by wrapping these next steps in a call to <span>window.setTimeout</span> with a timeout of 0 ms.<br>
                            <br>
                            <pre>
<code>window.setTimeout(function() {<br>  card.style.WebkitTransition =<br>    ‘-webkit-transform 300ms ease-in-out’;<br>  card.style.WebkitTransform = <br>    ‘translate3d(0, 0, 0) rotate(5deg)’; <br>}, 0);</code>
</pre><br>
                            <b>Completion of the Transition</b><br>
                            <br>
                            It is useful to know when the transition is complete. In the stacked cards interface, we use this to improve performance by setting <span>display:none</span> on obscured cards so that they do not need to be rendered. Adding an event listener allows the application to be notified when the transition has completed.<br>
                            <br>
                            <code>element.addEventListener(‘webkitTransitionEnd’, listener, false);</code><br>
                            <br>
                            <b>Interrupting a Transition</b><br>
                            <br>
                            In some cases, you may want to change a transition while it is in progress. For example, if the user unselected a conversation while the corresponding card was still animating onto the screen, we might apply a new transition to send the card back off of the screen again. When you apply a new CSS value while a transition is already in progress, a new transition will occur between the current value of the property in the transition and the new value that you apply. For example, suppose a card is halfway through it’s transition onto the screen, and we apply this CSS transform:<br>
                            <br>
                            <pre>
<code>card.style.WebkitTransform = <br>   ‘translate3d(-700px, 0, 0) rotate(5deg)’;</code>
</pre><br>
                            Since the transition properties are still configured, a new transition will occur. The initial value for the transition will be the halfway point - approximately <code>translated3d(-350px, 0, 0) rotate(5deg).</code> The final value will be <code>translate3d(-700px, 0, 0) rotate(5deg).</code> The full duration of the transition will still apply, so the card will move about half as quickly as it usually does. It is possible to determine the current transform applied to an HTML element using the <a href="http://developer.apple.com/safari/library/documentation/AudioVideo/Reference/WebKitCSSMatrixClassReference/WebKitCSSMatrix/WebKitCSSMatrix.html#//apple_ref/doc/uid/TP40009363">WebKitCSSMatrix</a> and to use this to recalculate more appropriate transition parameters, but this is outside the scope of this post.<br>
                            <br>
                            <b>Conclusion</b><br>
                            I hope that this introduction to CSS3 transitions and transforms has been useful, and that the insight into the implementation of Mobile Gmail on the iPad has been interesting. Based on positive feedback, the Mobile Gmail team is looking forward to making more use of transitions and transforms in the future.<br>
                            <br>
                            <span style="font-style:italic">By Liam Asher Segel-Brown, Software Engineering Intern, Google Mobile</span>
                            <div>
                                <img width="1" height="1" src="https://blogger.googleusercontent.com/tracker/11300808-2867260912019582793?l=googlecode.blogspot.com" alt="">
                            </div>
                            <div>
                                <a href="http://feeds.feedburner.com/~ff/blogspot/Dcni?a=zl84GEuL1ds:wFy-hecE4Og:-BTjWOF_DHI"><img src="http://feeds.feedburner.com/~ff/blogspot/Dcni?i=zl84GEuL1ds:wFy-hecE4Og:-BTjWOF_DHI" border="0"></a> <a href="http://feeds.feedburner.com/~ff/blogspot/Dcni?a=zl84GEuL1ds:wFy-hecE4Og:yIl2AUoC8zA"><img src="http://feeds.feedburner.com/~ff/blogspot/Dcni?d=yIl2AUoC8zA" border="0"></a> <a href="http://feeds.feedburner.com/~ff/blogspot/Dcni?a=zl84GEuL1ds:wFy-hecE4Og:V_sGLiPBpWU"><img src="http://feeds.feedburner.com/~ff/blogspot/Dcni?i=zl84GEuL1ds:wFy-hecE4Og:V_sGLiPBpWU" border="0"></a>
                            </div>
                        </blockquote>
                    </div>
                    <p class="bookmark-source">
                        Source: <a href="http://googlecode.blogspot.com/2010/08/css3-transitions-and-transforms-in.html?utm_source=feedburner&amp;utm_medium=feed&amp;utm_campaign=Feed%3A+blogspot%2FDcni+%28Google+Code+Blog%29">http://googlecode.blogspot.com/2010/08/css3-transitions-and-transforms-in.html?utm_source=feedburner&amp;utm_medium=feed&amp;utm_campaign=Feed%3A+blogspot%2FDcni+%28Google+Code+Blog%29</a>
                    </p>
                </div>
            </article>

            <nav id="post-nav">


            </nav>
        </section>

        <footer id="site-footer" class="nocontent">
            <p>
                This site is purely my personal work and does not reflect the
                views of my employer.
            </p>
            <p class="license">
                <a class="icon" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width: 0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png"></a>
                This work is licensed under a
                <a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported
                    License</a>.
            </p>
        </footer>

        <script async src="/static/js/common.js"></script>
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/run_prettify.min.js" integrity="sha256-hj+5FRlAuvAFANiefn0PpJYCkV1X4QT9EgiPd+6QnCw=" crossorigin="anonymous"></script>
    </body>
</html>
