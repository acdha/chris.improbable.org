<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>HIV Results, Birth Reminders, and Clinic Communication in Malawi</title>
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <link rel="stylesheet" href="/static/css/main.min.css" type="text/css" media="all">
        <!--[if lte IE 8]>
            <link
                rel="stylesheet"
                href="/static/css/ie-fixes.css"
                type="text/css"
                media="all"
            />
            <script src="/static/js/html5shiv.js"></script>
        <![endif]-->

        <meta http-equiv="last-modified" content="Wed, 29 Dec 2010 23:52:42 GMT">
        <link rel="alternate" type="application/atom+xml" title="All Posts (Atom)" href="/feeds/all.atom">
        <link rel="alternate" type="application/rss+xml" title="All Posts (RSS)" href="/feeds/all.rss">
        <link rel="icon" type="image/jpeg" sizes="287x287" href="/static/img/favicon-287x287.jpg">
        <link rel="icon" type="image/jpeg" sizes="128x128" href="/static/img/favicon-128x128.jpg">
    </head>
    <body class="blog post_detail" itemscope itemtype="http://schema.org/BlogPosting">
        <nav id="site-nav">
            <header id="about">
                <h1><a href="/about/">Chris Adams</a></h1>
                <h2>Programmer, cyclist, photographer</h2>
            </header>
            <ul class="links">
                <li>
                    <a href="/">Home</a>
                </li>
                <li>
                    <a href="/about/">About</a>
                </li>
                <li>
                    <a href="/feeds/all.atom" title="Site Feed">Site Feed</a>
                </li>
            </ul>
            <ul class="social-networks">
                <li>
                    <a rel="me" href="https://code4lib.social/@acdha">Mastodon</a>
                </li>
                <li>
                    <a href="https://github.com/acdha" rel="me">Github</a>
                </li>
                <li>
                    <a href="https://bitbucket.org/acdha" rel="me">Bitbucket</a>
                </li>
                <li>
                    <a href="https://pinboard.in/u:acdha/" rel="me">Pinboard</a>
                </li>
                <li>
                    <a href="https://www.flickr.com/photos/acdha" rel="me">Flickr</a>
                </li>
                <li>
                    <a href="https://www.linkedin.com/in/acdha" rel="me">LinkedIn</a>
                </li>
            </ul>
            <div id="site-search"></div>
        </nav>
        <section id="main">
            <article class="post">
                <header>
                    <meta itemprop="dateCreated" content="2010-12-29T18:52:42-04:00">
                    <meta itemprop="dateModified" content="2010-12-29T18:52:42-04:00">
                    <time class="date" itemprop="datePublished" datetime="2010-12-29T22:52:42+00:00">Dec 29</time>
                    <h2 class="" itemprop="title">HIV Results, Birth Reminders, and Clinic Communication in Malawi</h2>
                </header>

                <div class="body" itemprop="articleBody"><div class="googlereader description" data-google-id="tag:google.com,2005:reader/item/fdc7f0c376ff54a4">
                        <blockquote>
                            <p>
                                I recently returned from a 6 week trip in Malawi, where I was heavily involved in the implementation and deployment of <a href="http://caktusgroup.com/portfolio/project/unicef-project-mwana/">Project Mwana</a>, an Information and Communication Technology (ICT) project focused on Maternal and Newborn Child Health (MNCH). The project is currently running as a pilot in both Zambia and Malawi. This post is a fairly technical overview of what the project does and the way in which it was developed.
                            </p>
                            <p>
                                The project aims to facilitate several things, including (a) secure delivery of HIV (Dry Blood Spot, or DBS) test results from the lab to health clinics by SMS, which we’ve named “Results160″ (b) appointment reminders for newborn children, or “RemindMi” (Mi = mothers &amp; infants), and (c) free-text “chat” for health clinic workers and Community Health Workers, to strengthen communication and patient tracing.
                            </p>
                            <h3>
                                Source Code
                            </h3>
                            <p>
                                The source code for the project, which is based on <a href="http://www.djangoproject.com">Django</a> and <a href="http://www.rapidsms.org">RapidSMS,</a> can be found on GitHub:
                            </p>
                            <ul>
                                <li>
                                    <a href="https://github.com/mwana/mwana/tree/develop">https://github.com/mwana/mwana/tree/develop</a>
                                </li>
                            </ul>
                            <p>
                                I updated the developer setup instructions fairly recently, so, if you’re developer interested in this project or line of work, you should be able to get a local copy up and running without too much trouble. If you try and do have any issues, please let me know!
                            </p>
                            <h3>
                                Team Composition
                            </h3>
                            <p>
                                In Zambia, we have 2 on-going local developers, 1 temporary lead developer, 1 on-going local project manager, and 1 on-going project mentor. The team is similar in Malawi, except we have 1 on-going local developer, 1 temporary lead developer (myself), 1 on-going local project manager, and 1 on-going project mentor.
                            </p>
                            <h3>
                                Development Workflow
                            </h3>
                            <p>
                                For this phase of the project we adopted “git flow” to help guide our development workflow, and I think it was a big success (more below). See the following links for more information:
                            </p>
                            <ul>
                                <li>
                                    <a href="http://nvie.com/posts/a-successful-git-branching-model/">http://nvie.com/posts/a-successful-git-branching-model/</a>
                                </li>
                                <li>
                                    <a href="http://jeffkreeftmeijer.com/2010/why-arent-you-using-git-flow/">http://jeffkreeftmeijer.com/2010/why-arent-you-using-git-flow/</a>
                                </li>
                            </ul>
                            <h3>
                                Code Organization
                            </h3>
                            <ul>
                                <li>
                                    <code>apps/</code> - we tried to separate functionality into separate Django/RapidSMS apps as much as possible.
                                </li>
                                <li>
                                    <code>backends/</code> - contains a RapidSMS backend for communicating with Kannel (an open source SMS gateway)
                                </li>
                                <li>
                                    <code>locale/</code> - translation files for Bemba and Chichewa
                                </li>
                                <li>
                                    <code>requirements/</code> - pip requirements files &amp; corresponding tarballs (we found that checking in the tarballs was crucial for easily re-creating a development or production environment in low-bandwidth situations)
                                </li>
                                <li>
                                    <code>malawi/</code> - Malawi-specific configuration files &amp; code
                                </li>
                                <li>
                                    <code>zambia/</code> - Zambia-specific configuration files &amp; code
                                </li>
                            </ul>
                            <h3>
                                Settings Files
                            </h3>
                            <p>
                                We took a strongly hierarchical approach to the settings files, to make it easy to share/override settings as necessary:
                            </p>
                            <pre>
settings_project.py
  \-&gt; malawi/settings_country.py
         \-&gt; malawi/settings_staging.py
         \-&gt; malawi/settings_production.py
         \-&gt; localsettings.py
  \-&gt; zambia/settings_country.py
         \-&gt; malawi/settings_staging.py
         \-&gt; malawi/settings_production.py
         \-&gt; localsettings.py
</pre>
                            <p>
                                Each “sub” settings file simply imports from its “parent” at the top of the file, thereby allowing you to, for example, insert or append an app, add or remove a middleware, etc.
                            </p>
                            <h3>
                                Apps
                            </h3>
                            <p>
                                The project is divided up into the following main Django/RapidSMS apps: Results160 is implemented (mostly) in the “labresults” app, RemindMi in the “reminders” app, and the clinic chat in the “broadcast” app. The other apps support various pieces of functionality such as location management (”locations”), additions to the contact model (”contactsplus”), “stringcleaning,” and SMS printer integration (”tlcprinters”). I won’t pretend that they’re at all pluggable at the moment, but I’m sure that some of the more useful parts could be extracted &amp; made independent, should the need arise.
                            </p>
                            <h3>
                                Lessons learned
                            </h3>
                            <p>
                                On the Malawi side, we learned a few things about building RapidSMS (or mobile health ICT projects in general) that I think are worth sharing:
                            </p>
                            <p>
                                (1) <strong>Regular meetings.</strong> Have quick meetings to review progress and plan next actions. Scrum type meetings really helped us review and quickly narrow down and fix things that we saw were not going too well before they became a problem.
                            </p>
                            <p>
                                (2) <strong>Pair Programming.</strong> Even though we were often pressed for time, pair programming proved very beneficial to the team and the project in general. Part of the mandate for the project is creating local capacity, and hands-on pair programming allowed for the newer or more junior local developers to both in gain a good overview of the codebase and learn from the more seasoned Python/Django developers on the team.
                            </p>
                            <p>
                                (3) <strong>Feature Branches.</strong> git-flow made them easy — which was key because we had two teams working simultaneously in two different countries (between which communication was difficult at times), and we wanted to share most of what we were doing while also shelter each other from potentially buggy commit of partially implemented features.
                            </p>
                            <p>
                                (4) <strong>Using a single code base for two deployments.</strong> It was difficult at times, when our two teams were changing different parts of the code and inadvertently breaking parts of it, but overall I think it was a big win &amp; well worth the effort. We get the benefit of shared features &amp; bug fixes, we don’t have to deal with maintaining separate forks, and it forces us to optimize our development workflow and make our code that much more configurable.
                            </p>
                            <p>
                                (5) <strong>Server environment.</strong> Get a public facing IP for your server and/or work location before beginning the implementation. We didn’t have one of these to start with in Zambia, while we did in Malawi. It makes life far, far easier for a number of reasons, including (a) it lets stakeholders get to the server (obviously), (b) it helps you be sure any connectivity issues are on the telco side, not yours, and (c) it lets you avoid corporate firewalls.
                            </p>
                            <p>
                                (6) <strong>SMS Gateway.</strong> If you have an SMS requirement, use Kannel. We started out with pygsm and our MultiTech modem would regularly get into a weird state where it was registered on the network &amp; responded to AT commands, but no messages would come through. With other modems, the gsm backend didn’t delete messages from the SIM card, so it quickly filled up. After we switched to Kannel, we only had one case of downtime — and it was the RapidSMS route process, not Kannel, that was at fault. We also implemented the project on two different network carriers: Zain (now Airtel) via a GSM modem, and TNM (over the internet via SMPP). Kannel gave us a unified interface with which to interact with the two different backends. Kannel was also valuable as a “reference product” with which to test out the SMPP connection provided to us by TNM; as it turned out, when we couldn’t connect to it at first, the issue was on their end, not ours, and having a second opinion to back up our suspicions was key.
                            </p>
                            <p>
                                For more information, please see our page on <a href="http://caktusgroup.com/portfolio/project/unicef-project-mwana/">Project Mwana</a> or <a href="http://caktusgroup.com/contact/">get in touch</a> with a member of the Caktus team!
                            </p>
                        </blockquote>
                    </div>
                    <p class="bookmark-source">
                        Source: <a href="http://www.caktusgroup.com/blog/2010/12/29/hiv-results-birth-reminders-and-clinic-communication-in-malawi/">http://www.caktusgroup.com/blog/2010/12/29/hiv-results-birth-reminders-and-clinic-communication-in-malawi/</a>
                    </p>
                </div>
            </article>

            <nav id="post-nav">


            </nav>
        </section>

        <footer id="site-footer" class="nocontent">
            <p>
                This site is purely my personal work and does not reflect the
                views of my employer.
            </p>
            <p class="license">
                <a class="icon" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width: 0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png"></a>
                This work is licensed under a
                <a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported
                    License</a>.
            </p>
        </footer>

        <script async src="/static/js/common.js"></script>
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/run_prettify.min.js" integrity="sha256-hj+5FRlAuvAFANiefn0PpJYCkV1X4QT9EgiPd+6QnCw=" crossorigin="anonymous"></script>
    </body>
</html>
