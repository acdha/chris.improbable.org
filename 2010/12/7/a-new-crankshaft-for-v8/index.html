<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>A New Crankshaft for V8</title>
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <link rel="stylesheet" href="/static/css/main.min.css" type="text/css" media="all">
        <!--[if lte IE 8]>
            <link
                rel="stylesheet"
                href="/static/css/ie-fixes.css"
                type="text/css"
                media="all"
            />
            <script src="/static/js/html5shiv.js"></script>
        <![endif]-->

        <meta http-equiv="last-modified" content="Tue, 07 Dec 2010 19:11:38 GMT">
        <link rel="alternate" type="application/atom+xml" title="All Posts (Atom)" href="/feeds/all.atom">
        <link rel="alternate" type="application/rss+xml" title="All Posts (RSS)" href="/feeds/all.rss">
        <link rel="icon" type="image/jpeg" sizes="287x287" href="/static/img/favicon-287x287.jpg">
        <link rel="icon" type="image/jpeg" sizes="128x128" href="/static/img/favicon-128x128.jpg">
    </head>
    <body class="blog post_detail" itemscope itemtype="http://schema.org/BlogPosting">
        <nav id="site-nav">
            <header id="about">
                <h1><a href="/about/">Chris Adams</a></h1>
                <h2>Programmer, cyclist, photographer</h2>
            </header>
            <ul class="links">
                <li>
                    <a href="/">Home</a>
                </li>
                <li>
                    <a href="/about/">About</a>
                </li>
                <li>
                    <a href="/feeds/all.atom" title="Site Feed">Site Feed</a>
                </li>
            </ul>
            <ul class="social-networks">
                <li>
                    <a rel="me" href="https://code4lib.social/@acdha">Mastodon</a>
                </li>
                <li>
                    <a href="https://github.com/acdha" rel="me">Github</a>
                </li>
                <li>
                    <a href="https://bitbucket.org/acdha" rel="me">Bitbucket</a>
                </li>
                <li>
                    <a href="https://pinboard.in/u:acdha/" rel="me">Pinboard</a>
                </li>
                <li>
                    <a href="https://www.flickr.com/photos/acdha" rel="me">Flickr</a>
                </li>
                <li>
                    <a href="https://www.linkedin.com/in/acdha" rel="me">LinkedIn</a>
                </li>
            </ul>
            <div id="site-search"></div>
        </nav>
        <section id="main">
            <article class="post">
                <header>
                    <meta itemprop="dateCreated" content="2010-12-07T14:11:38-04:00">
                    <meta itemprop="dateModified" content="2010-12-07T14:11:38-04:00">
                    <time class="date" itemprop="datePublished" datetime="2010-12-07T18:11:38+00:00">Dec 07</time>
                    <h2 class="" itemprop="title">A New Crankshaft for V8</h2>
                </header>

                <div class="body" itemprop="articleBody"><div class="googlereader description" data-google-id="tag:google.com,2005:reader/item/9f6cf94fda818420">
                        <p class="annotation">
                            Holy crap, is that a nice jump…
                        </p>
                        <blockquote>
                            <div style="text-align:left">
                                Today we are introducing Crankshaft, a new compilation infrastructure for V8, Google Chrome’s JavaScript engine. By using aggressive optimizations, Crankshaft dramatically improves the performance of compute-intensive JavaScriptapplications - often by more than a factor of two! This will give users a faster and more responsive experience loading web pages and applications built with complex JavaScript. Here is a comparison of Chrome with and without Crankshaft on the <a href="http://v8.googlecode.com/svn/data/benchmarks/current/run.html">V8 benchmark suite</a>:
                            </div>
                            <div>
                                <div style="text-align:center;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;background-color:transparent">
                                    <span><span style="font-size:15px;white-space:pre-wrap"><span style="white-space:normal;font-size:16px;color:rgb(0, 0, 238)"><br></span></span></span>
                                </div>
                                <div style="text-align:center;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;background-color:transparent">
                                    <span><span style="font-size:15px;white-space:pre-wrap"><span style="white-space:normal;font-size:16px;color:rgb(0, 0, 238)"><img src="http://1.bp.blogspot.com/_iTeVtE07SgY/TP5koEGUZCI/AAAAAAAAApM/ix_I8k_7dAo/s400/Picture%2B12.png" border="0" alt="" style="display:block;margin-top:0px;margin-right:auto;margin-bottom:10px;margin-left:auto;text-align:center;width:400px;height:225px"></span></span></span>
                                </div>
                                <div>
                                    <span><span style="font-size:15px;white-space:pre-wrap"><span style="white-space:normal;font-size:16px;color:rgb(0, 0, 238)"><br></span></span></span>
                                </div>The benchmarks that benefit the most from Crankshaft are Richards, DeltaBlue and Crypto. This shows that we have taken the performance of JavaScript property accesses, arithmetic operations, tight loops, and function calls to the next level. Overall, Crankshaft boosts V8’s performance by 50% on the V8 benchmark suite. This is the biggest performance improvement since we launched Chrome in 2008.
                            </div>
                            <div>
                                <br>
                            </div>
                            <div style="text-align:center">
                                <span style="color:rgb(0, 0, 238)"><span><img src="http://1.bp.blogspot.com/_iTeVtE07SgY/TP5kn_e57qI/AAAAAAAAApE/fpqNp2OX5ms/s400/Picture%2B13.png" border="0" alt="" style="display:block;margin-top:0px;margin-right:auto;margin-bottom:10px;margin-left:auto;text-align:center;width:400px;height:230px"></span></span>
                            </div>
                            <div>
                                <span style="color:rgb(0, 0, 238)"><br></span>
                            </div>
                            <div>
                                In addition to improving peak performance as measured by the V8 benchmark suite, Crankshaft also improves the start-up time of web applications such as GMail. Our <a href="http://www.chromium.org/developers/testing/page-cyclers">page cycler</a> benchmarks show that Crankshaft improves the page load performance of Chrome by 12% for pages that contain significant amounts of JavaScript code.<br>
                                <br>
                                Crankshaft uses adaptive compilation to improve both start-up time and peak performance. The idea is to heavily optimize code that is frequently executed and not waste time optimizing code that is not. Because of this, benchmarks that finish in just a few milliseconds, such as SunSpider, will show little improvement with Crankshaft. The more work an application does, the bigger the gains will be.<br>
                                <br>
                                Crankshaft has four main components:
                            </div>
                            <div>
                                <ol>
                                    <li>A <b>base compiler</b> which is used for all code initially. The base compiler generates code quickly without heavy optimizations. Compilation with the base compiler is twice as fast as with the V8 compiler in Chrome 9 and generates 30% less code.
                                    </li>
                                    <li>A <b>runtime profiler</b> which monitors the running system and identifies hot code, i.e., code that we spend a significant amount of the time running.
                                    </li>
                                    <li>An <b>optimizing compiler</b> which recompiles and optimizes hot code identified by the runtime profiler. It uses <a href="http://en.wikipedia.org/wiki/Static_single_assignment_form">static single assignment</a> form to perform optimizations such as <a href="http://en.wikipedia.org/wiki/Loop-invariant_code_motion">loop-invariant code motion</a>, linear-scan <a href="http://en.wikipedia.org/wiki/Register_allocation">register allocation</a> and <a href="http://en.wikipedia.org/wiki/Inlining">inlining</a>. The optimization decisions are based on type information collected while running the code produced by the base compiler.
                                    </li>
                                    <li>
                                        <b>Deoptimization support</b> which allows the optimizing compiler to be optimistic in the assumptions it makes when generating code. With deoptimization support, it is possible to bail out to the code generated by the base compiler if the assumptions in the optimized code turn out to be too optimistic.
                                    </li>
                                </ol>V8 with Crankshaft for the 32-bit Intel architecture is available today in the V8 <a href="http://code.google.com/p/v8/">bleeding edge repository</a> and in <a href="http://tools.google.com/dlpage/chromesxs">canary builds</a> of Chrome. Work on the ARM and 64-bit ports has started.<br>
                                <br>
                                We are excited about the JavaScript speed improvements we are delivering with Crankshaft today. Crankshaft provides a great infrastructure for the next wave of JavaScript speed improvements in V8 and we will continue to push JavaScript performance to enable the next generation of web applications.<br>
                                <br>
                                <span>Kevin Millikin, Software Engineer and Florian Schneider, Software Engineer</span>
                            </div>
                            <div>
                                <img width="1" height="1" src="https://blogger.googleusercontent.com/tracker/2471378914199150966-6144482036002663073?l=blog.chromium.org" alt="">
                            </div>
                        </blockquote>
                    </div>
                    <p class="bookmark-source">
                        Source: <a href="http://blog.chromium.org/2010/12/new-crankshaft-for-v8.html">http://blog.chromium.org/2010/12/new-crankshaft-for-v8.html</a>
                    </p>
                </div>
            </article>

            <nav id="post-nav">


            </nav>
        </section>

        <footer id="site-footer" class="nocontent">
            <p>
                This site is purely my personal work and does not reflect the
                views of my employer.
            </p>
            <p class="license">
                <a class="icon" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width: 0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png"></a>
                This work is licensed under a
                <a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported
                    License</a>.
            </p>
        </footer>

        <script async src="/static/js/common.js"></script>
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/run_prettify.min.js" integrity="sha256-hj+5FRlAuvAFANiefn0PpJYCkV1X4QT9EgiPd+6QnCw=" crossorigin="anonymous"></script>
    </body>
</html>
