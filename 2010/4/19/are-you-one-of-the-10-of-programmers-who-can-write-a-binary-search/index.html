<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Are you one of the 10% of programmers who can write a binary search?</title>
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <link rel="stylesheet" href="/static/css/main.min.css" type="text/css" media="all">
        <!--[if lte IE 8]>
            <link
                rel="stylesheet"
                href="/static/css/ie-fixes.css"
                type="text/css"
                media="all"
            />
            <script src="/static/js/html5shiv.js"></script>
        <![endif]-->

        <meta http-equiv="last-modified" content="Mon, 19 Apr 2010 18:23:31 GMT">
        <link rel="alternate" type="application/atom+xml" title="All Posts (Atom)" href="/feeds/all.atom">
        <link rel="alternate" type="application/rss+xml" title="All Posts (RSS)" href="/feeds/all.rss">
        <link rel="icon" type="image/jpeg" sizes="287x287" href="/static/img/favicon-287x287.jpg">
        <link rel="icon" type="image/jpeg" sizes="128x128" href="/static/img/favicon-128x128.jpg">
    </head>
    <body class="blog post_detail" itemscope itemtype="http://schema.org/BlogPosting">
        <nav id="site-nav">
            <header id="about">
                <h1><a href="/about/">Chris Adams</a></h1>
                <h2>Programmer, cyclist, photographer</h2>
            </header>
            <ul class="links">
                <li>
                    <a href="/">Home</a>
                </li>
                <li>
                    <a href="/about/">About</a>
                </li>
                <li>
                    <a href="/feeds/all.atom" title="Site Feed">Site Feed</a>
                </li>
            </ul>
            <ul class="social-networks">
                <li>
                    <a rel="me" href="https://code4lib.social/@acdha">Mastodon</a>
                </li>
                <li>
                    <a href="https://github.com/acdha" rel="me">Github</a>
                </li>
                <li>
                    <a href="https://bitbucket.org/acdha" rel="me">Bitbucket</a>
                </li>
                <li>
                    <a href="https://pinboard.in/u:acdha/" rel="me">Pinboard</a>
                </li>
                <li>
                    <a href="https://www.flickr.com/photos/acdha" rel="me">Flickr</a>
                </li>
                <li>
                    <a href="https://www.linkedin.com/in/acdha" rel="me">LinkedIn</a>
                </li>
            </ul>
            <div id="site-search"></div>
        </nav>
        <section id="main">
            <article class="post">
                <header>
                    <meta itemprop="dateCreated" content="2010-04-19T14:23:31-04:00">
                    <meta itemprop="dateModified" content="2010-04-19T14:23:31-04:00">
                    <time class="date" itemprop="datePublished" datetime="2010-04-19T18:23:31+00:00">Apr 19</time>
                    <h2 class="" itemprop="title">Are you one of the 10% of programmers who can write a binary search?</h2>
                </header>

                <div class="body" itemprop="articleBody"><div class="googlereader description" data-google-id="tag:google.com,2005:reader/item/f25e03650c76afb6">
                        <blockquote>
                            <p>
                                There are some programming books that I’ve read from cover to cover repeatedly; there are others that I have dipped into many times, reading a chapter or so at a time.  Jon Bentley’s 1986 classic <em>Programming Pearls</em> is a rare case where both of these are true, as the scuffs at the bottom of my copy’s cover attest:
                            </p>
                            <p>
                                <a style="text-decoration:none" href="http://reprog.files.wordpress.com/2010/04/programming-pearls-first-edition.jpeg"><img title="programming-pearls-first-edition" src="http://reprog.files.wordpress.com/2010/04/programming-pearls-first-edition.jpeg?w=199&amp;h=300" alt="" width="199" height="300"></a>
                            </p>
                            <p>
                                (I have the First Edition [<a href="http://www.amazon.com/exec/obidos/ASIN/0201103311/thedinosaurrea0a">amazon.com</a>, <a href="http://www.amazon.co.uk/exec/obidos/ASIN/0201103311/thedinosaurreadi">amazon.co.uk</a>], so that’s what I scanned for the cover image above, but it would probably make more sense to get the newer and cheaper Second Edition [<a href="http://www.amazon.com/exec/obidos/ASIN/0201657880/thedinosaurrea0a">amazon.com</a>, <a href="http://www.amazon.co.uk/exec/obidos/ASIN/0201657880/thedinosaurreadi">amazon.co.uk</a>] which apparently has three additional chapters.)
                            </p>
                            <p>
                                I’ll review this book properly in a forthcoming article (as I did for <em><a href="http://reprog.wordpress.com/2010/03/01/programming-books-part-1-coders-at-work/">Coders at Work</a></em>, <em><a href="http://reprog.wordpress.com/2010/03/06/programming-books-part-2-the-elements-of-programming-style/">The Elements of Programming Style</a></em>, <em><a href="http://reprog.wordpress.com/2010/03/12/programming-books-part-3-programming-the-commodore-64/">Programming the Commodore 64</a></em> and <em><a href="http://reprog.wordpress.com/2010/04/06/programming-books-part-4-the-c-programming-language/">The C Programming Language</a></em>), but for now I want to look at just one passage from the book, and consider what it means.  One astounding passage.
                            </p>
                            <h2>
                                Only 10% of programmers can write a binary search
                            </h2>
                            <p>
                                Every single time I read <em>Programming Pearls</em>, this passage brings me up short:
                            </p>
                            <blockquote>
                                <p>
                                    Binary search solves the problem [of searching within a pre-sorted array] by keeping track of a range within the array in which <em>T</em> [i.e. the sought value] must be if it is anywhere in the array.  Initially, the range is the entire array.  The range is shrunk by comparing its middle element to <em>T</em> and discarding half the range.  The process continues until <em>T</em> is discovered in the array, or until the range in which it must lie is known to be empty.  In an <em>N</em>-element table, the search uses roughly <em>log(2) N</em> comparisons.
                                </p>
                                <p>
                                    Most programmers think that with the above description in hand, writing the code is easy; they’re wrong.  The only way you’ll believe this is by putting down this column right now and writing the code yourself.  Try it.
                                </p>
                                <p>
                                    I’ve assigned this problem in courses at Bell Labs and IBM.  Professional programmers had a couple of hours to convert the above description into a program in the language of their choice; a high-level pseudocode was fine.  At the end of the specified time, almost all the programmers reported that they had correct code for the task.  We would then take thirty minutes to examine their code, which the programmers did with test cases.  In several classes and with over a hundred programmers, the results varied little: ninety percent of the programmers found bugs in their programs (and I wasn’t always convinced of the correctness of the code in which no bugs were found).
                                </p>
                                <p>
                                    I was amazed: given ample time, only about ten percent of professional programmers were able to get this small program right.  But they aren’t the only ones to find this task difficult: in the history in Section 6.2.1 of his <em>Sorting and Searching</em>, Knuth points out that while the first binary search was published in 1946, the first published binary search without bugs did not appear until 1962.
                                </p>
                                <p style="padding-left:30px">
                                    – Jon Bentley, Programming Pearls (1st edition), pp. 35-36.
                                </p>
                            </blockquote>
                            <p>
                                Several hours!  Ninety percent!  Dude, SRSLY!  Isn’t that <em>terrifying</em>?
                            </p>
                            <p>
                                One of the reasons I’d like to see a copy of the Second Edition is to see whether this passage has changed — whether the numbers improved between 1986 and the Second-Edition date of 1999.  My gut tells me that the numbers <em>must</em> have improved, that things <em>can’t</em> be that bad;  yet logic tells me that in an age when programmers spend more time <a href="http://reprog.wordpress.com/2010/03/03/whatever-happened-to-programming/">plugging libraries together</a> than writing actual code, core algorithmic skills are likely if anything to have declined.  And remember, these were not doofus programmers that Bentley was working with: they were professionals at Bell Labs and IBM.  You’d expect them to be well ahead of the curve.
                            </p>
                            <p>
                                <a href="http://reprog.files.wordpress.com/2010/04/gari.jpg"><img title="gari" src="http://reprog.files.wordpress.com/2010/04/gari.jpg?w=292&amp;h=241" alt="" width="292" height="241"></a>
                            </p>
                            <h2>
                                And so, the Great Binary Search Experiment
                            </h2>
                            <p>
                                I would like you, if you would, to go away and do the exercise right now.  (Well, not <em>right</em> now.  Finish reading this article first!)  I am confident that nearly everyone who reads this blog is already familiar with the binary search algorithm, but for those of you who are not, Bentley’s description above should suffice.  Please fire up an editor buffer, and write a binary search routine.  When you’ve decided it’s correct, commit to that version.  Then test it, and tell me in the comments below whether you got it right first time.  Surely — <em>surely</em> — we can beat Bentley’s 10% hit-rate?
                            </p>
                            <p>
                                Here are the rules:
                            </p>
                            <ol>
                                <li>Use whatever programming language you like.
                                </li>
                                <li>No cutting, pasting or otherwise copying code.  Don’t even look at other binary search code until you’re done.
                                </li>
                                <li>I need hardly say, no calling <span style="color:#800000">bsearch()</span>, or otherwise cheating :-)
                                </li>
                                <li>Take as long as you like — you might finish, and feel confident in your code, after five minutes; or you’re welcome to take eight hours if you want (if you have the time to spare).
                                </li>
                                <li>You’re allowed to use your compiler to shake out mechanical bugs such as syntax errors or failure to initialise variables, but …
                                </li>
                                <li>
                                    <strong>NO TESTING</strong> until <em>after</em> you’ve decided your program is correct.
                                </li>
                                <li>Finally, the most important one: if you decide to begin this exercise, then you <em>must</em> report — either to say that you succeeded, failed or abandoned the attempt.  Otherwise the figures will be skewed towards success.
                                </li>
                            </ol>
                            <p>
                                (For the purposes of this exercise, the possibility of numeric overflow in index calculations can be ignored.  That condition is described <a href="http://googleresearch.blogspot.com/2006/06/extra-extra-read-all-about-it-nearly.html">here</a> but DO NOT FOLLOW THAT LINK until after writing your program, if you’re participating, because the article contains a correct binary search implementation that you don’t want to see before working on your clean-room implementation.)
                            </p>
                            <p>
                                If your code does turn out to be correct, and if you wish, you’re welcome to paste that code into your comment …  But if you do, and if a subsequent commenter points out a bug in it, you need to be prepared to deal with the public shame :-)
                            </p>
                            <p>
                                For extra credit: those of you who are <em>really</em> confident in your programming chops may write the program, publish it in a comment here and <em>then</em> test it.  If you do that, you’ll probably want to mention the fact in your comment, so we cut you extra slack when we find your bugs.
                            </p>
                            <p>
                                I will of course summarise the results of this exercise — let’s say, in one week’s time.
                            </p>
                            <p>
                                Let’s go!
                            </p>
                            <p>
                                <a href="http://reprog.files.wordpress.com/2010/04/19980-wasabi.jpg"><img title="19980-wasabi" src="http://reprog.files.wordpress.com/2010/04/19980-wasabi.jpg?w=346&amp;h=332" alt="" width="346" height="332"></a>
                            </p>
                            <h2>
                                Update (an hour and a half later)
                            </h2>
                            <p>
                                Thanks for the many posted entries already!  I should have warned you that the WordPress comment system interprets HTML, and so eats code fragments like
                            </p>
                            <p style="padding-left:30px">
                                <span style="color:#800000">if a[mid] &lt; value﻿</span>
                            </p>
                            <p>
                                The best way to avoid this is to wrap your source code ﻿﻿in <span style="color:#800000">{source}…{/source}</span> t<span style="font-family:Consolas, Monaco, 'Courier New', Courier, monospace;line-height:18px;font-size:12px;color:#800000;white-space:pre"><span style="color:#000000;font-family:Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif;line-height:19px;white-space:normal;font-size:13px">ags, <strong>but using square brackets rather than curly</strong>.  (The first time I tried to tell you all this, I used literal square brackets, and my markup-circumvention instructions were themselves marked up — D’oh!).  Do not manually escape <strong>&lt;</strong> and <strong>&gt;</strong> as <strong>&amp;lt;</strong> and <strong>&amp;gt;</strong> — the {source} wrapper deals with these.  Doing it this way also have the benefit of preserving indentation, which no other method seems to do.</span></span>
                            </p>
                            <p>
                                And an apology for WordPress: I really, really wish that this platform allowed commenters to preview their comments and/or edit them after posting, so that all the screwed-up source code could have been avoided.  I’ve tried to go and fix some of them myself, but — arrgh! — it turns out that WordPress not only displays code with &lt; symbols wrongly, it actually throws away what follows, so there’s nothing for me to restore.
                            </p>
                            <h2>
                                Update 2 (four hours after the initial post)
                            </h2>
                            <p>
                                Wow, you guys are amazing.  Four hours, and this post already has more comments than the previous record holder (Whatever Happened to Programming, 206 comments at the time of writing.)
                            </p>
                            <p>
                                For anyone who’d like to see more discussion, there are some good <a href="http://news.ycombinator.com/item?id=1277459"><span style="color:#000000">comments at Hacker News</span></a> and perhaps some slightly less insightful <a href="http://www.reddit.com/r/programming/comments/bt7nh/according_to_jon_bentleys_book_programming_pearls/"><span style="color:#000000">comments at Reddit</span></a>, where actually writing code is seen as “elitism”.
                            </p>
                            <p>
                                <span style="font-family:Consolas, Monaco, 'Courier New', Courier, monospace;line-height:18px;font-size:12px;color:#800000;white-space:pre"><span style="color:#000000;font-family:Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif;line-height:19px;white-space:normal;font-size:13px"><br></span></span>
                            </p><br>
                            <a rel="nofollow" href="http://feeds.wordpress.com/1.0/gocomments/reprog.wordpress.com/540/"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/comments/reprog.wordpress.com/540/"></a> <a rel="nofollow" href="http://feeds.wordpress.com/1.0/godelicious/reprog.wordpress.com/540/"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/delicious/reprog.wordpress.com/540/"></a> <a rel="nofollow" href="http://feeds.wordpress.com/1.0/gostumble/reprog.wordpress.com/540/"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/stumble/reprog.wordpress.com/540/"></a> <a rel="nofollow" href="http://feeds.wordpress.com/1.0/godigg/reprog.wordpress.com/540/"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/digg/reprog.wordpress.com/540/"></a> <a rel="nofollow" href="http://feeds.wordpress.com/1.0/goreddit/reprog.wordpress.com/540/"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/reddit/reprog.wordpress.com/540/"></a> <img alt="" border="0" src="http://stats.wordpress.com/b.gif?host=reprog.wordpress.com&amp;blog=12269820&amp;post=540&amp;subd=reprog&amp;ref=&amp;feed=1">
                        </blockquote>
                    </div>
                    <p class="bookmark-source">
                        Source: <a href="http://reprog.wordpress.com/2010/04/19/are-you-one-of-the-10-percent/">http://reprog.wordpress.com/2010/04/19/are-you-one-of-the-10-percent/</a>
                    </p>
                </div>
            </article>

            <nav id="post-nav">


            </nav>
        </section>

        <footer id="site-footer" class="nocontent">
            <p>
                This site is purely my personal work and does not reflect the
                views of my employer.
            </p>
            <p class="license">
                <a class="icon" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width: 0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png"></a>
                This work is licensed under a
                <a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported
                    License</a>.
            </p>
        </footer>

        <script async src="/static/js/common.js"></script>
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/run_prettify.min.js" integrity="sha256-hj+5FRlAuvAFANiefn0PpJYCkV1X4QT9EgiPd+6QnCw=" crossorigin="anonymous"></script>
    </body>
</html>
