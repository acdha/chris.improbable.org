<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Python Enhancement Proposals I Wish I Had Time to Champion</title>
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <link rel="stylesheet" href="/static/css/main.min.css" type="text/css" media="all">
        <!--[if lte IE 8]>
            <link
                rel="stylesheet"
                href="/static/css/ie-fixes.css"
                type="text/css"
                media="all"
            />
            <script src="/static/js/html5shiv.js"></script>
        <![endif]-->

        <meta http-equiv="last-modified" content="Sun, 19 Jun 2011 04:42:28 GMT">
        <link rel="alternate" type="application/atom+xml" title="All Posts (Atom)" href="/feeds/all.atom">
        <link rel="alternate" type="application/rss+xml" title="All Posts (RSS)" href="/feeds/all.rss">
        <link rel="icon" type="image/jpeg" sizes="287x287" href="/static/img/favicon-287x287.jpg">
        <link rel="icon" type="image/jpeg" sizes="128x128" href="/static/img/favicon-128x128.jpg">
    </head>
    <body class="blog post_detail" itemscope itemtype="http://schema.org/BlogPosting">
        <nav id="site-nav">
            <header id="about">
                <h1><a href="/about/">Chris Adams</a></h1>
                <h2>Programmer, cyclist, photographer</h2>
            </header>
            <ul class="links">
                <li>
                    <a href="/">Home</a>
                </li>
                <li>
                    <a href="/about/">About</a>
                </li>
                <li>
                    <a href="/feeds/all.atom" title="Site Feed">Site Feed</a>
                </li>
            </ul>
            <ul class="social-networks">
                <li>
                    <a rel="me" href="https://code4lib.social/@acdha">Mastodon</a>
                </li>
                <li>
                    <a href="https://github.com/acdha" rel="me">Github</a>
                </li>
                <li>
                    <a href="https://bitbucket.org/acdha" rel="me">Bitbucket</a>
                </li>
                <li>
                    <a href="https://pinboard.in/u:acdha/" rel="me">Pinboard</a>
                </li>
                <li>
                    <a href="https://www.flickr.com/photos/acdha" rel="me">Flickr</a>
                </li>
                <li>
                    <a href="https://www.linkedin.com/in/acdha" rel="me">LinkedIn</a>
                </li>
            </ul>
            <div id="site-search"></div>
        </nav>
        <section id="main">
            <article class="post">
                <header>
                    <meta itemprop="dateCreated" content="2011-06-18T19:34:00-04:00">
                    <meta itemprop="dateModified" content="2011-06-18T19:34:00-04:00">
                    <time class="date" itemprop="datePublished" datetime="2011-06-18T23:34:00+00:00">Jun 18</time>
                    <h2 class="" itemprop="title">Python Enhancement Proposals I Wish I Had Time to Champion</h2>
                </header>

                <div class="body" itemprop="articleBody"><div class="googlereader description" data-google-id="tag:google.com,2005:reader/item/518f46a5bc3dec5b">
                        <blockquote>
                            <div dir="ltr" style="text-align:left">
                                <div dir="ltr" style="text-align:left">
                                    Today I was trying to make progress on a few different NumPy proposal enhancements and ended up frustrated knowing that come Monday morning, I will not have any time to follow-up on them. Managing a growing consulting company takes a lot of time (<a href="http://www.enthought.com">Enthought</a> is over 30 people now and growing to near 50 by the end of the year). There are countless meetings devoted to new hires, program development, project reviews, customer relations, budgeting, and sales. I also take a direct role in delivering on training and select consulting projects. Someday I may get a chance to write something of use about things I've learned along the way, but that is for another day (and likely another blog). This post is to get a few ideas I've been sitting on written down in the hopes that somebody might read them and get excited about contributing. At the very least anybody that reads this post, will know (at least some of) my current opinion about a few technical proposals.<br>
                                    <br>
                                    About a month ago, I had the privilege of organizing a "data-array" summit in which several people in the NumPy and SciPy community came together at the Enthought offices to discuss some ideas related to how to improve data analysis with the NumPy and SciPy stack. We spent 3-days thinking and brainstorming which led to many fruitful discussions. I expect that some of the ideas generated will result in important and interesting changes to NumPy and SciPy over the coming months and years. More information about the summit can be learned by listening to the <a href="http://inscight.org/2011/05/18/episode_13/">relevant inSCIght podcast</a>.<br>
                                    <br>
                                    It's actually a very exciting time to get involved in the SciPy community as Python takes its place as one of the approaches people will be using to analyze all the data that we are generating. In that spirit, I wanted to express a few of what I consider to be important enhancements that are needed to Python and NumPy.<br>
                                    <br>
                                    I will start with Python and leave NumPy to another post. Here there are really three big missing features that would really benefit those of us who use Python for technical computing. Unfortunately, I don't think there is enough representation of the Python for Science crowd in the current batch of Python developers. This is not due to any exclusion from the Python developers who have always been very accommodating. It is simply due to the scarcity of people who understand the SciPy perspective and use-cases also willing to engage with developers in the Python world. Those (like Mark Dickinson) who cross the chasm are a real gem.<br>
                                    <br>
                                    If anyone has an interest in shepherding a PEP in any of the following directions, you will have my '+1' support (and any community-organizing that I can muster to help you).  Honestly, if these things were put into Python 3, there would be a serious motivation to move to Python 3 for the scientific community (which is otherwise going to lag in the great migration).<br>
                                    <br>
                                    <h1>
                                        Python Enhancements I Want
                                    </h1><br>
                                    <h2>
                                        Adding additional operators
                                    </h2><br>
                                    We need additional operators to easily represent at least matrix multiplication, matrix power, and matrix solve). I could possibly back-off the last two if we at least had matrix multiplication. This should have been done a long time ago. If I had been able to spare the time, I would have pushed to hold off porting of NumPy to Python 3 until we got matrix multiplication operators. Yes, I know that blackmail usually backfires and thankfully Pauli Virtanen and Charles Harris acted before I even had a chance to suggest such a thing :-). But, seriously, we need this support in the language. <br>
                                    <br>
                                    The reasons are quite simple:<br>
                                    <ul style="text-align:left">
                                        <li>Syntax matters: writing <b><span style='font-family:"Courier New",Courier,monospace'>d = numpy.solve(numpy.dot(numpy.dot(a,b),c), x)</span></b> is a whole lot more ugly than something like <b><span style='font-family:"Courier New",Courier,monospace'>d = (a*b*c) \ x</span></b>.  If the former is fine, then we should all just go back to writing LISP.  The point of having nice syntax is to minimize the line-noise and mental overhead of mapping the mental idea to working code.   For Python to be used with mental efficiency in technical computing you need to write expressions involving higher-order operations like this all the time.   
                                        </li>
                                        <li>Right now, the recommended way to do this is to convert a, b, c, and x to "matrices", perform the computation in a nice expression and then convert back to arrays.  This is clunky at best.
                                        </li>
                                    </ul>I've been back and forth on this for 13 years and can definitively say that we would be much better off in Python if we had a matrix multiplication operator.   Please, please, can we get one!    The relevant PEPS where this has been discussed are:  <a href="http://www.python.org/dev/peps/pep-0211/">PEP 211</a> and <a href="http://www.python.org/dev/peps/pep-0225/">PEP 225</a>.  I think I like having more than just one operator added (ala PEP 225, but the subject would have to be re-visited by a brave soul).<br>
                                    <br>
                                    <h2>
                                        Overloadable Boolean Operations
                                    </h2><br>
                                    <a href="http://www.python.org/dev/peps/pep-0335/">PEP 335</a> was a fantastic idea. I really wish we had the ability to overload <b><span style='font-family:"Courier New",Courier,monospace'>and</span></b>, <b><span style='font-family:"Courier New",Courier,monospace'>or</span></b>, and <b style='font-family:"Courier New",Courier,monospace'>not</b>. Among other things, this would allow the very nice syntax so that <b><span style='font-family:"Courier New",Courier,monospace'>mask = 2&lt;a&lt;10</span></b> would generate an array of True and False values when a is an array. Currently, to generate this same mask you have to do <b><span style='font-family:"Courier New",Courier,monospace'>(2&lt;a)&amp;(a&lt;4)</span></b>. The PEP has other important use-cases as well. It would be excellent if this PEP were re-visited, championed, and put into Python 3.<br>
                                    <br>
                                    <h2>
                                        Allowing slice object literals outside of []
                                    </h2><br>
                                    Python's syntax allows construction of a slice object inside brackets so that one can write <span style='font-family:"Courier New",Courier,monospace'>a[1:3]</span> which is equivalent to <span style='font-family:"Courier New",Courier,monospace'>a.__getitem__(slice(1,3))</span>. Many times over the years, I have wanted to be able to specify a slice object using the syntax start:stop:step outside of the getitem. Even, if Python's parser were extended to allow the slice literal to be accepted as the input to a function it would be preferred. The biggest wart this would remove is the (ab)use of getitem to return new ranges and grids in NumPy (go use <span style='font-family:"Courier New",Courier,monospace'>mgrid</span> and <span style='font-family:"Courier New",Courier,monospace'>r_</span> in NumPy to see what I mean). I would prefer that these were functions, but I would need <span style='font-family:"Courier New",Courier,monospace'>mgrid(1:5, 1:5</span>) to work.<br>
                                    <br>
                                    There was a PEP for range literals (<a href="http://www.python.org/dev/peps/pep-0204/">PEP 204</a>) once upon a time.  There were some interesting aspects about that proposal, but frankly I don't want the slice syntax to produce ranges.  I would just be content for it always to produce slice objects --- just allow it outside of brackets.<br>
                                    <br>
                                    While I started by lamenting my lack of time to implement NumPy enhancements, I will leave the discussion of NumPy enhancements I'm dreaming about to another post.   I would be thrilled if somebody took up the charge to push any of these Python enhancements in Python 3.   If Python 3 ends up with any of them, it would be a huge motivation to me to migrate to Python 3 entirely.
                                </div>
                            </div>
                            <div>
                                <img width="1" height="1" src="https://blogger.googleusercontent.com/tracker/68730239358084672-2602898153220496114?l=technicaldiscovery.blogspot.com" alt="">
                            </div>
                        </blockquote>
                    </div>
                    <p class="bookmark-source">
                        Source: <a href="http://technicaldiscovery.blogspot.com/2011/06/python-proposal-enhancements-i-wish-i.html">http://technicaldiscovery.blogspot.com/2011/06/python-proposal-enhancements-i-wish-i.html</a>
                    </p>
                </div>
            </article>

            <nav id="post-nav">


            </nav>
        </section>

        <footer id="site-footer" class="nocontent">
            <p>
                This site is purely my personal work and does not reflect the
                views of my employer.
            </p>
            <p class="license">
                <a class="icon" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width: 0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png"></a>
                This work is licensed under a
                <a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported
                    License</a>.
            </p>
        </footer>

        <script async src="/static/js/common.js"></script>
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/run_prettify.min.js" integrity="sha256-hj+5FRlAuvAFANiefn0PpJYCkV1X4QT9EgiPd+6QnCw=" crossorigin="anonymous"></script>
    </body>
</html>
