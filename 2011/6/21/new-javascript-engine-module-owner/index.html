<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>
            New JavaScript Engine Module Owner
        </title>
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <link rel="stylesheet" href="/static/css/main.min.css" type="text/css" media="all"><!--[if lte IE 8]>
            <link rel="stylesheet" href="/static/css/ie-fixes.css" type="text/css" media="all">
            <script src="/static/js/html5shiv.js"></script>
        <![endif]-->
        <meta http-equiv="last-modified" content="Wed, 22 Jun 2011 02:30:03 GMT">
        <link rel="alternate" type="application/atom+xml" title="All Posts (Atom)" href="/feeds/all.atom">
        <link rel="alternate" type="application/rss+xml" title="All Posts (RSS)" href="/feeds/all.rss">
        <link rel="icon" type="image/jpeg" sizes="287x287" href="/static/img/favicon-287x287.jpg">
        <link rel="icon" type="image/jpeg" sizes="128x128" href="/static/img/favicon-128x128.jpg">
        <script type="application/javascript">
var _prum={id:"5166be01e6e53d1007000001"};var PRUM_EPISODES=PRUM_EPISODES||{};PRUM_EPISODES.q=[];PRUM_EPISODES.mark=function(b,a){PRUM_EPISODES.q.push(["mark",b,a||new Date().getTime()])};PRUM_EPISODES.measure=function(b,a,b){PRUM_EPISODES.q.push(["measure",b,a,b||new Date().getTime()])};PRUM_EPISODES.done=function(a){PRUM_EPISODES.q.push(["done",a])};PRUM_EPISODES.mark("firstbyte");(function(){var b=document.getElementsByTagName("script")[0];var a=document.createElement("script");a.type="text/javascript";a.async=true;a.charset="UTF-8";a.src="//rum-static.pingdom.net/prum.min.js";b.parentNode.insertBefore(a,b)})();
        </script>
    </head>
    <body class="blog post_detail" itemscope itemtype="http://schema.org/BlogPosting">
        <nav id="site-nav">
            <header id="about">
                <h1>
                    <a href="/about/">Chris Adams</a>
                </h1>
                <h2>
                    Programmer, cyclist, photographer
                </h2>
            </header>
            <ul class="links">
                <li>
                    <a href="/">Home</a>
                </li>
                <li>
                    <a href="/about/">About</a>
                </li>
                <li>
                    <a href="/feeds/all.atom" title="Site Feed">Site Feed</a>
                </li>
            </ul>
            <ul class="social-networks">
                <li>
                    <a href="https://github.com/acdha" rel="me">Github</a>
                </li>
                <li>
                    <a href="http://bitbucket.org/acdha" rel="me">Bitbucket</a>
                </li>
                <li>
                    <a href="http://delicious.com/acdha" rel="me">del.icio.us</a>
                </li>
                <li>
                    <a href="http://twitter.com/acdha" rel="me">Twitter</a>
                </li>
                <li>
                    <a href="https://plus.google.com/116562742092842686896?rel=author" rel="me">Google+</a>
                </li>
                <li>
                    <a href="http://www.flickr.com/photos/acdha" rel="me">Flickr</a>
                </li>
                <li>
                    <a href="http://www.linkedin.com/in/acdha" rel="me">LinkedIn</a>
                </li>
                <li>
                    <a href="http://connect.garmin.com/explore?owner=acdha" rel="me">Garmin Connect</a>
                </li>
            </ul>
            <div id="site-search"></div>
        </nav>
        <section id="main">
            <article class="post">
                <header>
                    <meta itemprop="dateCreated" content="2011-06-21T22:30:03-04:00">
                    <meta itemprop="dateModified" content="2011-06-21T22:30:03-04:00"><time class="date" itemprop="datePublished" datetime="2011-06-22T02:30:03+00:00">Jun 22</time>
                    <h2 itemprop="title">
                        New JavaScript Engine Module Owner
                    </h2>
                </header>
                <div class="body" itemprop="articleBody">
                    <div class="googlereader description" data-google-id="tag:google.com,2005:reader/item/52101be4fa75ff64">
                        <blockquote>
                            <p>
                                As you may know, I wrote <a href="http://brendaneich.com/2008/04/popularity/">JavaScript in ten days</a>. JS was born under the shadow of Java, and in spite of support by <a href="http://blog.pmarca.com/">marca</a> and <a href="http://en.wikipedia.org/wiki/Bill_Joy">Bill Joy</a>, JS in 1995 was essentially a one-man show.
                            </p>
                            <p>
                                I had a bit of help, even at the start, that I’d like to acknowledge again. Ken Smith, a Netscape acquiree from Borland, ported <a href="http://download.oracle.com/javase/1.4.2/docs/api/java/util/Date.html">JDK 1.0-era java.util.Date</a> (we both just <a href="http://movieclips.com/yXM8-breaking-away-movie-chasing-a-truck/">drafted</a> off of the Java truck, per management orders; we did not demur from the <a href="http://www.jwz.org/blog/2010/10/every-day-i-learn-something-new-and-stupid/#comment-1048">Y2K bugs</a> in that Java class). My thanks also to Netscape 2′s front-end hackers, <a href="https://twitter.com/#!/knobchouck">chouck</a>, <a href="http://totic.org/">atotic</a>, and <a href="https://twitter.com/#!/gorpheus">garrett</a> for their support. EDIT: can’t forget <a href="http://www.linkedin.com/in/smurray">spence</a> on the X front end!
                            </p>
                            <p>
                                That was 1995. Engine prototype took ten days in May. Bytecode compiler and interpreter from the start, because Netscape had a <a href="http://www.datacraft.com/livewire.html">server-side JS product</a> in the works. The rest of the year was browser integration, mainly what became known as “DOM level 0″. Only now standardized in <a href="http://developers.whatwg.org/">HTML 5</a> and <a href="http://www.w3.org/TR/2011/WD-domcore-20110531/">Anne’s wg</a>. Sentence fragments here show my PTSD from that sprint :-/.
                            </p>
                            <p>
                                In 1996 I finally received some needed assistance from <a href="http://www.linkedin.com/profile/view?id=28112&amp;authType=name&amp;authToken=fiRT&amp;goback=.con">RRJ</a>, who helped port David M. Gay and Guy Steele’s <a href="http://www.netlib.org/fp/dtoa.c">dtoa.c</a> and fix date/time bugs.
                            </p>
                            <p>
                                Also in summer 1996, <a href="http://nixweb.com/">nix</a> interned at Netscape while a grad student at CMU, and wrote the first <a href="http://apps.ycombinator.com/item?id=1894374">LiveConnect</a>. I am still grateful for his generous contributions in wide-ranging design discussions and code-level interactions.
                            </p>
                            <p>
                                At some point in late summer or early fall 1996, it became clear to me that JS was going to be standardized. Bill Gates was bitching about us changing JS all the time (some truth to it; but hello! Pot meet Kettle…). We had a standards guru, <a href="http://www.linkedin.com/pub/carl-cargill/10/495/404">Carl Cargill</a>, who knew <a href="http://www.ecma-international.org/memento/history.htm">Jan van den Beld</a>, then the Secretary-General of ECMA (now Ecma). Carl steered our standardization of JS to ECMA.
                            </p>
                            <p>
                                Joining ECMA and participating in the first JS standards meeting was an eye-opener. Microsoft sent a B-team, and Borland and a company called NOMBAS also attended. “Success has many fathers” was the theme. The NOMBAS founder greeted me by saying “oh, we’ve been doing JavaScript for *years*”. I did not see how that could be the case, unless JS meant any scripting language with C-based syntax. I had not heard of <a href="http://www.quora.com/How-did-ScriptEase-influence-the-design-of-JavaScript">NOMBAS</a> before then.
                            </p>
                            <p>
                                At that first meeting, I think I did well enough in meta-debate against the Microsoft team that they sent their A-team to the next meeting. This was all to the good, and Microsoft in full-blooded compete mode, but also with individual initiative beyond the call of corporate duty by <a href="http://www.linkedin.com/pub/shon-katzenberger/17/681/516">Shon Katzenberger</a>, materially helped create <a href="http://www.mozilla.org/js/language/E262.pdf">ES1</a>. Sun contributed <a href="http://en.wikipedia.org/wiki/Guy_L._Steele,_Jr.">Guy Steele</a>, who is composed of pure awesome. Guy even brought <a href="http://www.dreamsongs.com/RPG.html">RPG</a> for fun to a few meetings (Richard contributed ES1 Clause 4).
                            </p>
                            <p>
                                Meanwhile, in fall 1996, I was under some pressure from Netscape management to write a proto-spec for JS, but that was not something I could do while also maintaining the “Mocha” engine all by myself in both shipping and future Netscape releases, along with all of the DOM code.
                            </p>
                            <p>
                                This was a ton of work, and on top of it I had to pay off substantial technical debt that I had willingly taken on in the first year. So I actually stayed home for two weeks to rewrite Mocha as the codebase that <a href="http://blog.cdleary.com/2011/06/mapping-the-monkeysphere/#comment-222163115">became known as</a> <a href="https://developer.mozilla.org/en/spidermonkey">SpiderMonkey</a>, mainly to get it done (no other way), also to go on a bit of a strike against the Netscape management team that was still underinvesting in JS. This entailed garbage collection and tagged values instead of slower reference-counting and fat discriminated union values.
                            </p>
                            <p>
                                Also in fall 1996, chouck decided to join me as the second full-time JS team-mate. He and I did some work targeting the (ultimately ill-fated) Netscape 4 release. This work was ahead of its time. We put the JS engine in a separate thread from the “main thread” in Netscape (still in Mozilla). This allowed us to better overlap JS and HTML/CSS/image computations, years ahead of multicore. You could run an iloop in JS and the “slow script dialog” seamlessly floated above it, allowing you to stop the loop or permit it to continue.
                            </p>
                            <p>
                                After summer 1996 and the start of ECMA-262 standardization, Netscape finally invested more in JS. <a href="http://argostravels.blogspot.com/">Clayton Lewis</a> joined as manager, and hired <a href="http://www.norrisboyd.com/">Norris Boyd</a>, who ended up creating Rhino from SpiderMonkey’s DNA transcoded to Java. This was ostensibly because Netscape was investing in Java on the server, in particular in an AppServer that wanted JS scripting.
                            </p>
                            <p>
                                I met <a href="http://shaver.off.net/diary/">shaver</a> for the first time in October 1996 at Netscape’s NY-based <a href="https://groups.google.com/forum/#!topic/comp.lang.tcl/qFm-YEQEbHw">Developer Conference</a>, where he nimbly nerd-blocked some Netscape plugin API fanboys and saved me from having to digress from the main thing, which was increasingly JS.
                            </p>
                            <p>
                                Some time in 1997, shaver contributed “LiveConnect 2″, based on more mature Java reflection APIs not available to nix in 1996. Clayton hired shaver and the JS team grew large by end of 1997, when I decided to take a break from JavaScript (having delivered ES1 and ES2) and join the nascent mozilla.org.
                            </p>
                            <p>
                                I handed the keys to the JS kingdom to <a href="http://www.linkedin.com/pub/waldemar-horwat/1/25/333">Waldemar Horwat</a>, now of Google, in late 1997. Waldemar did much of the work on ES3, and threw his <a href="http://en.wikipedia.org/wiki/William_Lowell_Putnam_Mathematical_Competition">considerable intellect</a> into JS2/ES4 afterwards, but without overcoming the market power and stalling tactics of Microsoft.
                            </p>
                            <p>
                                True story: Waldemar’s Microsoft nemesis on TC39 back then, at the time a static language fan who hated JS, has come around and now endorses JS and dynamic languages.
                            </p>
                            <p>
                                Throughout all of this, I maintained module ownership of SpiderMonkey.
                            </p>
                            <p>
                                Fast-forward to 2008. After a great (at the time) Firefox 3 release where <a href="https://twitter.com/#!/shaver">@shaver</a> and I donned the aging super-hero suits one more time to compete successfully on interpreter performance against JavaScriptCore in WebKit, <a href="http://andreasgal.com/">Andreas Gal</a> joined us for the summer in which we hacked TraceMonkey, which we <a href="http://brendaneich.com/2008/08/tracemonkey-javascript-lightspeed/">launched</a> ahead of Chrome and V8.
                            </p>
                            <p>
                                A note on V8: I’d learned of it in 2006, when I believe it was just starting. At that point there was talk about open-sourcing it, and I welcomed the idea, encouraging any of: hosting on code.google.com, hosting without any pressure to integrate into Firefox on mozilla.org (just like Rhino), or hosting with an integration plan to replace SpiderMonkey in Firefox. I had to disclose that another company was about to release their derived-from-JS <a href="http://www.mozilla.org/projects/tamarin/">engine</a> to Mozilla, but my words included “the more the merrier”. It was early days as far as JS JITs were concerned.
                            </p>
                            <p>
                                V8 never open-sourced in 2006, and stealthed its way to release in September 2008. This may have been a prudent move by Google to avoid exciting Microsoft. Clearly, in 1995, the “Netscape + Java kills Windows” talk from Netscape antagonized Microsoft. I have it on good authority that a Microsoft board member wrote marca at the end of 1995 warning “you’ve waved the cape in the bull’s face — prepare to get the horns!” One could argue that Chrome in 2008 was the new red cape in the bull’s face, which begot IE9 and Chakra.
                            </p>
                            <p>
                                Whatever Google’s reasoning, keeping V8 closed-source for over two years hurt JS in this sense: it meant Apple and Mozilla had to climb the JIT learning curves on their own (at first; then finally with the benefit of being able to inspect V8 sources). Sure, the Anamorphic work on Self and Smalltalk was somewhat documented, and I had learned it in the ’90s, in part with a stint on loan from Netscape to Sun when they were doing due dliigence in preparation for acquiring Anamorphic. But the opportunity to build on a common engine codebase was lost to path dependence.
                            </p>
                            <p>
                                On the upside, different competing open source engines have demonstrably explored a larger design space than one engine codebase could under consolidated management.
                            </p>
                            <p>
                                In any event, the roads not taken in JS’s past still give me pause, because similar roads lie ahead. But the past is done, and once we had launched TraceMonkey, and Apple had launched SquirrelFish Extreme, the world had multiple proofs along with the V8 release that JS was no longer consigned to be “slow” or “a toy”, as one referee dismissed it in rejecting a PLDI submission from Andreas in 2006.
                            </p>
                            <p>
                                You know the rest: JS performance has grown <a href="http://blog.mozilla.com/dmandelin/2011/06/16/know-your-engines-at-oreilly-velocity-2011/">an order of magnitude</a> over the last several years. Indeed, JS still has upside undreamed of in the Java world where 1% performance win is remarkable. And, we are still at an early stage in studying web workloads, in order to synthesize credible benchmarks. On top of all this, the web is still evolving rapidly, so there are no stable workloads as far as I can tell.
                            </p>
                            <p>
                                Around the time TraceMonkey launched, Mozilla was lucky enough to hire <a href="http://blog.mozilla.com/dmandelin/">Dave Mandelin</a>, fresh from PhD work at UCB under <a href="http://www.cs.berkeley.edu/~bodik/">Ras Bodik</a>.
                            </p>
                            <p>
                                The distributed, open source Mozilla JS team delivered <a href="http://arewefastyet.com/">the goods</a> in Firefox 4, and credit goes to all the contributors. I single Dave out here because of his technical and personal leadership skills. Dave is even-tempered, super-smart, and a true empirical/skeptical scientist in the spirit of my hero, <a href="http://en.wikipedia.org/wiki/Richard_Feynman">Richard Feynman</a>.
                            </p>
                            <p>
                                So it is with gratitude and more than a bit of relief, after a very long 16 years in full, 13 years open source, that I’m announcing the transfer of <a href="https://wiki.mozilla.org/Modules/Core#JavaScript">SpiderMonkey’s module ownership</a> to <a href="https://twitter.com/#!/dmandelin">@dmandelin</a>.
                            </p>
                            <p>
                                <a href="http://www.youtube.com/watch?v=SAqq11HYMsk">Hail to the king, baby!</a>
                            </p>
                        </blockquote>
                    </div>
                    <p class="bookmark-source">
                        Source: <a href="http://brendaneich.com/2011/06/new-javascript-engine-module-owner/">http://brendaneich.com/2011/06/new-javascript-engine-module-owner/</a>
                    </p>
                </div>
            </article>
            <nav id="post-nav"></nav><script id="discus-javascript">
    var disqus_shortname = 'improbable';

                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                    document.getElementsByTagName('body')[0].appendChild(dsq);
                })();
            </script><a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            <div id="disqus_thread"></div>
        </section>
        <footer id="site-footer" class="nocontent">
            <p>
                This site is purely my personal work and does not reflect the views of my employer.
            </p>
            <p class="license">
                <a class="icon" rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png"></a> This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
            </p>
        </footer><script async="" defer src="/static/js/common.js">
</script><script id="google-analytics">
    var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-2097834-1']);
            _gaq.push(['_setDomainName', 'improbable.org']);
            _gaq.push(['_trackPageview']);

            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
        </script>
    </body>
</html>
