<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>
            New "ShaperProbe" tool detects ISP traffic shaping
        </title>
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <link rel="stylesheet" href="/static/css/main.min.css" type="text/css" media="all"><!--[if lte IE 8]>
            <link rel="stylesheet" href="/static/css/ie-fixes.css" type="text/css" media="all">
            <script src="/static/js/html5shiv.js"></script>
        <![endif]-->
        <meta http-equiv="last-modified" content="Mon, 23 May 2011 19:55:00 GMT">
        <link rel="alternate" type="application/atom+xml" title="All Posts (Atom)" href="/feeds/all.atom">
        <link rel="alternate" type="application/rss+xml" title="All Posts (RSS)" href="/feeds/all.rss">
        <link rel="icon" type="image/jpeg" sizes="287x287" href="/static/img/favicon-287x287.jpg">
        <link rel="icon" type="image/jpeg" sizes="128x128" href="/static/img/favicon-128x128.jpg">
        <script type="application/javascript">
var _prum={id:"5166be01e6e53d1007000001"};var PRUM_EPISODES=PRUM_EPISODES||{};PRUM_EPISODES.q=[];PRUM_EPISODES.mark=function(b,a){PRUM_EPISODES.q.push(["mark",b,a||new Date().getTime()])};PRUM_EPISODES.measure=function(b,a,b){PRUM_EPISODES.q.push(["measure",b,a,b||new Date().getTime()])};PRUM_EPISODES.done=function(a){PRUM_EPISODES.q.push(["done",a])};PRUM_EPISODES.mark("firstbyte");(function(){var b=document.getElementsByTagName("script")[0];var a=document.createElement("script");a.type="text/javascript";a.async=true;a.charset="UTF-8";a.src="//rum-static.pingdom.net/prum.min.js";b.parentNode.insertBefore(a,b)})();
        </script>
    </head>
    <body class="blog post_detail" itemscope itemtype="http://schema.org/BlogPosting">
        <nav id="site-nav">
            <header id="about">
                <h1>
                    <a href="/about/">Chris Adams</a>
                </h1>
                <h2>
                    Programmer, cyclist, photographer
                </h2>
            </header>
            <ul class="links">
                <li>
                    <a href="/">Home</a>
                </li>
                <li>
                    <a href="/about/">About</a>
                </li>
                <li>
                    <a href="/feeds/all.atom" title="Site Feed">Site Feed</a>
                </li>
            </ul>
            <ul class="social-networks">
                <li>
                    <a href="https://github.com/acdha" rel="me">Github</a>
                </li>
                <li>
                    <a href="http://bitbucket.org/acdha" rel="me">Bitbucket</a>
                </li>
                <li>
                    <a href="http://delicious.com/acdha" rel="me">del.icio.us</a>
                </li>
                <li>
                    <a href="http://twitter.com/acdha" rel="me">Twitter</a>
                </li>
                <li>
                    <a href="https://plus.google.com/116562742092842686896?rel=author" rel="me">Google+</a>
                </li>
                <li>
                    <a href="http://www.flickr.com/photos/acdha" rel="me">Flickr</a>
                </li>
                <li>
                    <a href="http://www.linkedin.com/in/acdha" rel="me">LinkedIn</a>
                </li>
                <li>
                    <a href="http://connect.garmin.com/explore?owner=acdha" rel="me">Garmin Connect</a>
                </li>
            </ul>
            <div id="site-search"></div>
        </nav>
        <section id="main">
            <article class="post">
                <header>
                    <meta itemprop="dateCreated" content="2011-05-23T15:55:00-04:00">
                    <meta itemprop="dateModified" content="2011-05-23T15:55:00-04:00"><time class="date" itemprop="datePublished" datetime="2011-05-23T19:55:00+00:00">May 23</time>
                    <h2 itemprop="title">
                        New "ShaperProbe" tool detects ISP traffic shaping
                    </h2>
                </header>
                <div class="body" itemprop="articleBody">
                    <div class="googlereader description" data-google-id="tag:google.com,2005:reader/item/bc3e060c6aafa5cc">
                        <blockquote>
                            <a href="http://arstechnica.com/tech-policy/news/2011/05/new-shaperprobe-tool-detects-isp-traffic-shaping.ars?utm_source=rss&amp;utm_medium=rss&amp;utm_campaign=rss"><img vspace="4" hspace="4" border="0" align="right" width="230" height="129" src="http://static.arstechnica.net/assets/2011/05/traffic-shaping-fiberoptics-ars-thumb-230x130-21993-f.jpg"></a>
                            <p>
                                Two researchers at Georgia Tech can tell you exactly how American ISPs shape Internet traffic, and which ones do so. Bottom line: of the five largest Internet providers in the country, the three cable companies (Comcast, Time Warner, Cox) employ shaping while the telephone companies (AT&amp;T, Verizon) do not—though that fact is less significant for the user experience than it might first sound.
                            </p>
                            <p>
                                Partha Kanuparthy and Constantine Dovrolis wanted to measure Internet shaping, so they built a tool called <a href="http://www.cc.gatech.edu/~partha/diffprobe/shaperprobe.html">ShaperProbe</a> to do so. The tool relies on users from around the country running tests in which the user's computer transmits data at a constant bit rate, while ShaperProbe's 48 Linux-based server instances watch incoming traffic to see if that rate degrades in predictable ways over time. Using the <a href="http://arstechnica.com/tech-policy/news/2009/01/google-others-launch-m-lab-to-track-network-openness.ars">M-Lab infrastructure</a>, ShaperProbe has collected more than 1 million trial runs from 5,700 ISPs over the last two years (run <a href="http://www.measurementlab.net/measurement-lab-tools#tool5">your own test</a>).
                            </p>
                            <p>
                                The <a href="http://www.cc.gatech.edu/~partha/shaperprobe-TR.pdf">resulting paper</a> (PDF) documents the first accurate attempt to “measure traffic shaping deployments on the Internet.”
                            </p>
                            <h3>
                                Emptying the bucket
                            </h3>
                            <p>
                                Traffic shaping hardware generally relies on the concept of a “token bucket.” Traffic management hardware will generate a digital token for each Internet user at a predetermined rate. These tokens fill a virtual token bucket; transmitting packets over the Internet removes tokens from the bucket. If the bucket empties, no more data can be transmitted until a new token is deposited.&nbsp;
                            </p>
                            <p>
                                The practical result is that the user sits down to her computer with a full token bucket and can immediately blast data through her connection as fast as the connection can go. But after some interval of time, usually measured in seconds, this sort of full-throttle data transmission empties the token bucket and the user is now limited to transmitting at the token generation rate.
                            </p>
                            <p>
                                ShaperProbe measures the length of time it takes for traffic shaping hardware to make a "level shift" to a slower speed limit on the line. Charting this data enough times, and from enough different users with different Internet access tiers, allowed Kanuparthy and Dovrolis to estimate the token bucket parameters—and thus to figure out exactly when and how traffic shaping kicks in for any particular ISP's speed tier.
                            </p>
                            <p>
                                Traffic shaping isn't necessarily some devious attempt to give users less bandwidth than expected; it can also be used to let users transmit "bursty" files more quickly than their speed tier would otherwise allow, shaping them down to their chosen tier only after some set amount of time. This is how Comcast markets its "PowerBoost" technology, for instance.
                            </p>
                            <div style="width:640px;margin:0 auto">
                                <img src="http://static.arstechnica.com/2011/05/23/shaperprobe_results.jpg">
                                <div style="background-color:#eee;color:#333;padding:10px">
                                    <div>
                                        Kanuparthy and Dovrolis
                                    </div>
                                </div>
                            </div>
                            <p>
                                The use of shapers can also be dictated by the underlaying access tech. The researchers note that DSL providers can “dynamically change link capacity instead of shaping, while a cable provider is more likely to shape since DOCSIS provides fixed access capabilities." It can also be applied to the entire Internet link or more narrowly to specific kinds of traffic— which, as the researchers note, is "relevant to the ‘heated’ network neutrality debate."
                            </p>
                            <p>
                                The research shows that Comcast, Road Runner (from Time Warner Cable), and Cox all use downstream shaping—but only Comcast and Cox also use upstream shaping. Neither AT&amp;T nor Verizon shape in either direction.
                            </p>
                            <p>
                                The research is separate from a <a href="http://arstechnica.com/tech-policy/news/2011/03/google-spends-1-million-on-censorship-and-throttling-detection.ars">recent million-dollar Google grant</a> to other Georgia Tech researchers looking at ways to detect Internet censorship or throttling, but it <em>was</em> funded by a previous 2009 Google grant. It also runs on the Google-funded M-Lab hardware network. As Google noted in its most recent Georgia Tech grant, it hopes to create tools to that "users could determine whether their ISPs are providing the kind of service customers are paying for, and whether the data they send and receive over their network connections is being tampered with by governments and/or ISPs."
                            </p>
                            <p>
                                <a href="http://arstechnica.com/tech-policy/news/2011/05/new-shaperprobe-tool-detects-isp-traffic-shaping.ars?utm_source=rss&amp;utm_medium=rss&amp;utm_campaign=rss&amp;comments=1#comments-bar">Read the comments on this post</a>
                            </p>
                        </blockquote>
                    </div>
                    <p class="bookmark-source">
                        Source: <a href="http://arstechnica.com/tech-policy/news/2011/05/new-shaperprobe-tool-detects-isp-traffic-shaping.ars?utm_source=rss&amp;utm_medium=rss&amp;utm_campaign=rss">http://arstechnica.com/tech-policy/news/2011/05/new-shaperprobe-tool-detects-isp-traffic-shaping.ars?utm_source=rss&amp;utm_medium=rss&amp;utm_campaign=rss</a>
                    </p>
                </div>
            </article>
            <nav id="post-nav"></nav><script id="discus-javascript">
    var disqus_shortname = 'improbable';

                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                    document.getElementsByTagName('body')[0].appendChild(dsq);
                })();
            </script><a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            <div id="disqus_thread"></div>
        </section>
        <footer id="site-footer">
            <p>
                This site is purely my personal work and does not reflect the views of my employer.
            </p>
            <p class="license">
                <a class="icon" rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png"></a> This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
            </p>
        </footer><script async="" defer src="/static/js/common.js">
</script><script id="google-analytics">
    var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-2097834-1']);
            _gaq.push(['_setDomainName', 'improbable.org']);
            _gaq.push(['_trackPageview']);

            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
        </script>
    </body>
</html>
