<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>
            The scoped attribute
        </title>
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <link rel="stylesheet" href="/static/css/main.min.css" type="text/css" media="all"><!--[if lte IE 8]>
            <link rel="stylesheet" href="/static/css/ie-fixes.css" type="text/css" media="all">
            <script src="/static/js/html5shiv.js"></script>
        <![endif]-->
        <meta http-equiv="last-modified" content="Wed, 14 Sep 2011 13:04:51 GMT">
        <link rel="alternate" type="application/atom+xml" title="All Posts (Atom)" href="/feeds/all.atom">
        <link rel="alternate" type="application/rss+xml" title="All Posts (RSS)" href="/feeds/all.rss">
        <link rel="icon" type="image/jpeg" sizes="287x287" href="/static/img/favicon-287x287.jpg">
        <link rel="icon" type="image/jpeg" sizes="128x128" href="/static/img/favicon-128x128.jpg">
        <script type="application/javascript">
var _prum={id:"5166be01e6e53d1007000001"};var PRUM_EPISODES=PRUM_EPISODES||{};PRUM_EPISODES.q=[];PRUM_EPISODES.mark=function(b,a){PRUM_EPISODES.q.push(["mark",b,a||new Date().getTime()])};PRUM_EPISODES.measure=function(b,a,b){PRUM_EPISODES.q.push(["measure",b,a,b||new Date().getTime()])};PRUM_EPISODES.done=function(a){PRUM_EPISODES.q.push(["done",a])};PRUM_EPISODES.mark("firstbyte");(function(){var b=document.getElementsByTagName("script")[0];var a=document.createElement("script");a.type="text/javascript";a.async=true;a.charset="UTF-8";a.src="//rum-static.pingdom.net/prum.min.js";b.parentNode.insertBefore(a,b)})();
        </script>
    </head>
    <body class="blog post_detail" itemscope itemtype="http://schema.org/BlogPosting">
        <nav id="site-nav">
            <header id="about">
                <h1>
                    <a href="/about/">Chris Adams</a>
                </h1>
                <h2>
                    Programmer, cyclist, photographer
                </h2>
            </header>
            <ul class="links">
                <li>
                    <a href="/">Home</a>
                </li>
                <li>
                    <a href="/about/">About</a>
                </li>
                <li>
                    <a href="/feeds/all.atom" title="Site Feed">Site Feed</a>
                </li>
            </ul>
            <ul class="social-networks">
                <li>
                    <a href="https://github.com/acdha" rel="me">Github</a>
                </li>
                <li>
                    <a href="http://bitbucket.org/acdha" rel="me">Bitbucket</a>
                </li>
                <li>
                    <a href="http://delicious.com/acdha" rel="me">del.icio.us</a>
                </li>
                <li>
                    <a href="http://twitter.com/acdha" rel="me">Twitter</a>
                </li>
                <li>
                    <a href="https://plus.google.com/116562742092842686896?rel=author" rel="me">Google+</a>
                </li>
                <li>
                    <a href="http://www.flickr.com/photos/acdha" rel="me">Flickr</a>
                </li>
                <li>
                    <a href="http://www.linkedin.com/in/acdha" rel="me">LinkedIn</a>
                </li>
                <li>
                    <a href="http://connect.garmin.com/explore?owner=acdha" rel="me">Garmin Connect</a>
                </li>
            </ul>
            <div id="site-search"></div>
        </nav>
        <section id="main">
            <article class="post">
                <header>
                    <meta itemprop="dateCreated" content="2011-09-14T09:04:51-04:00">
                    <meta itemprop="dateModified" content="2011-09-14T09:04:51-04:00"><time class="date" itemprop="datePublished" datetime="2011-09-14T13:04:51+00:00">Sep 14</time>
                    <h2 itemprop="title">
                        The scoped attribute
                    </h2>
                </header>
                <div class="body" itemprop="articleBody">
                    <div class="googlereader description" data-google-id="tag:google.com,2005:reader/item/bd2fb344eeff98d3">
                        <p class="annotation">
                            This is going to be a very handy tool once it's widely supported
                        </p>
                        <blockquote>
                            <p>
                                The <code>scoped</code> attribute for the <code>&lt;style&gt;</code> element allows you to include styles mid-document that target specific elements. Depending upon how you look at this, it’ll either be a godsend or a curse. Once you’ve reached the end of this article, I hope you can form your own opinion.
                            </p>
                            <p>
                                Let’s take a quick look at the spec:
                            </p>
                            <blockquote>
                                <p>
                                    The <code>scoped</code> attribute is a boolean attribute. If set, it indicates that the styles are intended just for the subtree rooted at the style element’s parent element, as opposed to the whole Document.
                                </p>— <cite><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/semantics.html#attr-style-scoped" title="Scoped attribute — HTML5">WHATWG</a></cite>
                            </blockquote>
                            <h2>
                                Isn’t this bad practice?
                            </h2>
                            <p>
                                For years, we’ve been told (and have actively told others) to separate content and presentation layers. So why would we introduce something that seems to go against everything we’ve been preaching?
                            </p>
                            <p>
                                The separation of these layers is still vitally important, but let’s look at a few use cases to shed some light on why this attribute has been introduced. Scoped style provides a W3C-approved way to:
                            </p>
                            <ul>
                                <li>Add one-off CSS styles.
                                </li>
                                <li>Add user-defined styles to wiki or CMS content.
                                </li>
                                <li>Add theme-defined styles via CMS plugins.
                                </li>
                                <li>Keep syndicated content together (e.g., keeping example code together with the example).
                                </li>
                            </ul>
                            <h2>
                                How does it work?
                            </h2>
                            <p>
                                In this section, I’ll show you how this new attribute will work when it gets rolled out to browsers.
                            </p>
                            <h3>
                                Our starting point
                            </h3>
                            <p>
                                We’ll be using the following code sample as a starting point:
                            </p>
                            <pre>
<code>&lt;article&gt;
  &lt;h1&gt;Style Scoped&lt;/h1&gt;
  &lt;p&gt;The scoped attribute for the style element will eventually allow for you to include style elements mid-document. To do this, you must mark up your style element with the scoped attribute.&lt;/p&gt;
  &lt;section&gt;
    &lt;h2&gt;How does it work?&lt;/h2&gt;
    &lt;p&gt;Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.&lt;/p&gt;
  &lt;/section&gt;
&lt;/article&gt;</code>
</pre>
                            <p>
                                This is a basic example, with two headings and two paragraphs set within the article element.
                            </p>
                            <h3>
                                Adding the <code>scoped</code> attribute
                            </h3>
                            <p>
                                In the next example, we’ll change the foreground color of the second paragraph to red (from whatever was defined in the master CSS file):
                            </p>
                            <pre>
<code>&lt;article&gt;
  &lt;h1&gt;Style Scoped&lt;/h1&gt;
  &lt;p&gt;The scoped attribute for the style element will eventually allow for you to include style elements mid-document. To do this, you must mark up your style element with the scoped attribute.&lt;/p&gt;
  &lt;section&gt;
    &lt;style scoped&gt;
      p { color: red; }
    &lt;/style&gt;
    &lt;h2&gt;How does it work?&lt;/h2&gt;
    &lt;p&gt;Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.&lt;/p&gt;
  &lt;/section&gt;
&lt;/article&gt;</code>
</pre>
                            <p>
                                It’s worth noting that the <code>scoped</code> attribute can’t be the first attribute of the body element. I also received a validation error using <code>&lt;body style="..."&gt;</code>.
                            </p>
                            <p>
                                This screenshot shows how things might render in the browser:
                            </p><img src="http://html5doctor.com/wp-content/uploads/2011/09/scoped1.gif" alt="" title="scoped" width="526" height="297"> How the <code>scoped</code> attribute will render
                            <h2>
                                Can I apply <code>scoped</code> to &lt;link&gt;?
                            </h2>
                            <p>
                                While I was writing this article, Dr. Rich asked whether it was possible to add this attribute to <code>&lt;link&gt;</code> elements. Turns out you can’t, but I stumbled across this tidbit in the WHATWG mailing list:
                            </p>
                            <blockquote>
                                <p>
                                    You can use &lt;style scoped&gt;@import url(whatever);&lt;/style&gt;
                                </p>
                                <p>
                                    And this even enables you to add some specific styles ([be they embedded] or from another external sheet) on a per-use basis if the need arises. For example, a long dissertation relying on many quotes may benefit from adding stronger visual highlights on the &lt;em&gt; elements within the last quote to reinforce the final conclusion.
                                </p>— <cite><a href="http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2011-March/031049.html">Eduard Pascuals WHATWG mailing list response #031049</a></cite>
                            </blockquote>
                            <h2>
                                Backwards compatibility
                            </h2>
                            <p>
                                Unfortunately, scoped style isn’t all puppy dogs and kittens.
                            </p>
                            <p>
                                Since this newly introduced attribute isn’t understood by current browsers, CSS rules in <code>&lt;style scoped&gt;</code> are just added to the page’s CSS. Therefore, if you were to include a <code>scoped</code> style block mid-page, its declarations would be applied to every matching element in the document, regardless of whether the element were inside or outside of the scope’s range.
                            </p>
                            <p>
                                For the sake of backwards compatibility, Louis Lazaris has suggested <a href="http://www.impressivewebs.com/scoped-styles-html5/">a brand new element called <code>&lt;scopedstyle&gt;</code></a>. This new element would only be recognised by supporting browsers and ignored by everything else. This way, scoped styles wouldn’t be added to the whole document.&nbsp;Instead, the browser would just throw away the unrecognised <code>&lt;scopedstyle&gt;</code> element and move on.
                            </p>
                            <h2>
                                Browser support
                            </h2>
                            <table>
                                <caption>
                                    Browser support for
                                </caption>
                                <tr>
                                    <td>
                                        <code>&lt;style scoped&gt;</code> <i>(as of 6th September, 2011)</i>
                                    </td>
                                </tr>
                                <thead>
                                    <tr>
                                        <th>
                                            Browser
                                        </th>
                                        <th>
                                            Support
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <th>
                                            Chrome 13
                                        </th>
                                        <td>
                                            No
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>
                                            Safari 5
                                        </th>
                                        <td>
                                            No
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>
                                            Firefox 6
                                        </th>
                                        <td>
                                            No
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>
                                            Opera 9
                                        </th>
                                        <td>
                                            No
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>
                                            Internet Explorer 9
                                        </th>
                                        <td>
                                            No
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <p>
                                Currently, the <code>scoped</code> attribute isn’t working in any of the browser alpha versions (Opera.Next, Mozilla Aurora, or WebKit nightly builds). There’s work in progress by <a href="https://bugs.webkit.org/show_bug.cgi?id=49142">Roland Steiner for support in WebKit</a>.
                            </p>
                            <h2>
                                Using <code>&lt;style scoped&gt;</code> today
                            </h2>
                            <p>
                                So you’ve read this article and decided that you <em>need</em> scoped style in your life. What now? Well, just like every other new HTML5 thing, we have a polyfill for it. <a href="http://twitter.com/#!/thingsinjars">Simon Madine</a> has created a <a href="https://github.com/thingsinjars/jQuery-Scoped-CSS-plugin">jQuery scoped CSS plugin on GitHub</a>.
                            </p>
                            <p>
                                Please note that Oli used a wrapper <code>&lt;div&gt;</code> because of <a href="http://www.w3.org/Bugs/Public/show_bug.cgi?id=13102">validation problems explained in this bug</a>.
                            </p>
                            <p>
                                You could also assign a CSS prefix to target the section of your document you want to style. You’d still be able to stick your styles inline, but you’ve also provided a fallback for the older browsers. In fact, Dr. Oli has done just that on his <a href="http://html5doctor.com/blockquote-q-cite/">latest article</a>. (View source and search for <code>&lt;div class="faint"&gt;</code>.)
                            </p>
                            <h2>
                                Opinions
                            </h2>
                            <p>
                                There’s no denying that we’re breaking backwards compatibility by introducing <code>&lt;style scoped&gt;</code>. To me, this just doesn’t make any sense. I feel this needs to be addressed by either creating a new element like <code>&lt;scopedstyle&gt;</code> or using some protective mechanism like the <code>&lt;!--</code> and <code>--&gt;</code> delimiters that have been used within <code>&lt;style&gt;</code> and <code>&lt;script&gt;</code> elements.
                            </p>
                            <p>
                                Let’s not end this article with negative sentiment, though. As with anything, it’s what you make of it. Scoped style is pretty plain vanilla, but if people abuse it, it’ll end up with a bad rap. <a href="http://html5doctor.com/author/olib/">Dr. Oli</a> has spoken at length about his love for this attribute as it allows him to have live code examples with the CSS in <code>&lt;pre&gt;</code> and also in a <code>&lt;style scoped&gt;</code> within a <code>&lt;figure&gt;</code>.
                            </p>
                            <p>
                                So now it’s time for you to express your views. What do you think about the new <code>scoped</code> attribute? Do you think it has a future? Should it be fast-tracked into the spec? Or do you think it’s a waste of time that could ultimately end up mixing our content and presentation layers together again? Let us know in the comments!
                            </p>
                            <div>
                                <h3>
                                    Related Posts:
                                </h3>
                                <ul>
                                    <li>
                                        <a href="http://html5doctor.com/blockquote-q-cite/" rel="bookmark">Quoting and citing with <code>&lt;blockquote&gt;</code>, <code>&lt;q&gt;</code>, <code>&lt;cite&gt;</code>, and the cite attribute</a>
                                    </li>
                                    <li>
                                        <a href="http://html5doctor.com/the-details-and-summary-elements/" rel="bookmark">The details and summary elements</a>
                                    </li>
                                    <li>
                                        <a href="http://html5doctor.com/html-5-reset-stylesheet/" rel="bookmark">HTML5 Reset Stylesheet</a>
                                    </li>
                                    <li>
                                        <a href="http://html5doctor.com/your-questions-answered-6/" rel="bookmark">Your Questions Answered #6</a>
                                    </li>
                                    <li>
                                        <a href="http://html5doctor.com/avoiding-common-html5-mistakes/" rel="bookmark">Avoiding common HTML5 mistakes</a>
                                    </li>
                                </ul>
                            </div>
                            <p>
                                <a href="http://html5doctor.com/the-scoped-attribute/" rel="bookmark">The scoped attribute</a> originally appeared on <a href="http://html5doctor.com">HTML5 Doctor</a> on September 13, 2011.
                            </p><img src="http://feeds.feedburner.com/~r/html5doctor/~4/NbeGPotgLU0" height="1" width="1">
                        </blockquote>
                    </div>
                    <p class="bookmark-source">
                        Source: <a href="http://html5doctor.com/the-scoped-attribute/?utm_source=feedburner&amp;utm_medium=feed&amp;utm_campaign=Feed%3A+html5doctor+%28HTML5doctor%29">http://html5doctor.com/the-scoped-attribute/?utm_source=feedburner&amp;utm_medium=feed&amp;utm_campaign=Feed%3A+html5doctor+%28HTML5doctor%29</a>
                    </p>
                </div>
            </article>
            <nav id="post-nav"></nav><script id="discus-javascript">
    var disqus_shortname = 'improbable';

                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                    document.getElementsByTagName('body')[0].appendChild(dsq);
                })();
            </script><a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            <div id="disqus_thread"></div>
        </section>
        <footer id="site-footer" class="nocontent">
            <p>
                This site is purely my personal work and does not reflect the views of my employer.
            </p>
            <p class="license">
                <a class="icon" rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png"></a> This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
            </p>
        </footer><script async="" defer src="/static/js/common.js">
</script><script id="google-analytics">
    var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-2097834-1']);
            _gaq.push(['_setDomainName', 'improbable.org']);
            _gaq.push(['_trackPageview']);

            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
        </script>
    </body>
</html>
