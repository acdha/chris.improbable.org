<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>
            SUMO in Q2
        </title>
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <link rel="stylesheet" href="/static/css/main.min.css" type="text/css" media="all"><!--[if lte IE 8]>
            <link rel="stylesheet" href="/static/css/ie-fixes.css" type="text/css" media="all">
            <script src="/static/js/html5shiv.js"></script>
        <![endif]-->
        <meta http-equiv="last-modified" content="Wed, 02 Mar 2011 22:13:42 GMT">
        <link rel="alternate" type="application/atom+xml" title="All Posts (Atom)" href="/feeds/all.atom">
        <link rel="alternate" type="application/rss+xml" title="All Posts (RSS)" href="/feeds/all.rss">
        <link rel="icon" type="image/jpeg" sizes="287x287" href="/static/img/favicon-287x287.jpg">
        <link rel="icon" type="image/jpeg" sizes="128x128" href="/static/img/favicon-128x128.jpg">
        <script type="application/javascript">
var _prum={id:"5166be01e6e53d1007000001"};var PRUM_EPISODES=PRUM_EPISODES||{};PRUM_EPISODES.q=[];PRUM_EPISODES.mark=function(b,a){PRUM_EPISODES.q.push(["mark",b,a||new Date().getTime()])};PRUM_EPISODES.measure=function(b,a,b){PRUM_EPISODES.q.push(["measure",b,a,b||new Date().getTime()])};PRUM_EPISODES.done=function(a){PRUM_EPISODES.q.push(["done",a])};PRUM_EPISODES.mark("firstbyte");(function(){var b=document.getElementsByTagName("script")[0];var a=document.createElement("script");a.type="text/javascript";a.async=true;a.charset="UTF-8";a.src="//rum-static.pingdom.net/prum.min.js";b.parentNode.insertBefore(a,b)})();
        </script>
    </head>
    <body class="blog post_detail" itemscope itemtype="http://schema.org/BlogPosting">
        <nav id="site-nav">
            <header id="about">
                <h1>
                    <a href="/about/">Chris Adams</a>
                </h1>
                <h2>
                    Programmer, cyclist, photographer
                </h2>
            </header>
            <ul class="links">
                <li>
                    <a href="/">Home</a>
                </li>
                <li>
                    <a href="/about/">About</a>
                </li>
                <li>
                    <a href="/feeds/all.atom" title="Site Feed">Site Feed</a>
                </li>
            </ul>
            <ul class="social-networks">
                <li>
                    <a href="https://github.com/acdha" rel="me">Github</a>
                </li>
                <li>
                    <a href="http://bitbucket.org/acdha" rel="me">Bitbucket</a>
                </li>
                <li>
                    <a href="http://delicious.com/acdha" rel="me">del.icio.us</a>
                </li>
                <li>
                    <a href="http://twitter.com/acdha" rel="me">Twitter</a>
                </li>
                <li>
                    <a href="https://plus.google.com/116562742092842686896?rel=author" rel="me">Google+</a>
                </li>
                <li>
                    <a href="http://www.flickr.com/photos/acdha" rel="me">Flickr</a>
                </li>
                <li>
                    <a href="http://www.linkedin.com/in/acdha" rel="me">LinkedIn</a>
                </li>
                <li>
                    <a href="http://connect.garmin.com/explore?owner=acdha" rel="me">Garmin Connect</a>
                </li>
            </ul>
            <div id="site-search"></div>
        </nav>
        <section id="main">
            <article class="post">
                <header>
                    <meta itemprop="dateCreated" content="2011-03-02T17:13:42-04:00">
                    <meta itemprop="dateModified" content="2011-03-02T17:13:42-04:00"><time class="date" itemprop="datePublished" datetime="2011-03-02T21:13:42+00:00">Mar 02</time>
                    <h2 itemprop="title">
                        SUMO in Q2
                    </h2>
                </header>
                <div class="body" itemprop="articleBody">
                    <div class="googlereader description" data-google-id="tag:google.com,2005:reader/item/c95402252fe43959">
                        <p class="annotation">
                            I'd definitely like to switch to this model as well - it's just fundamentally a saner way to support a living entity
                        </p>
                        <blockquote>
                            <p>
                                At the end of 2010, I issued a challenge to my team: <a title="The future of SUMO development" href="http://coffeeonthekeyboard.com/the-future-of-sumo-development-511/">deploy support.mozilla.com continuously</a> by the end of 2011. So, as we move into the last part of Q1, how are we doing, and what’s next?
                            </p>
                            <h3>
                                So Far
                            </h3>
                            <p>
                                This quarter we’ve managed to completely <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=616703">break free from our old svn</a> repository. All our <a href="https://github.com/jsocol/kitsune">code is in git</a> now. This has simplified our deployments significantly. We’ve also <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=616702">moved a bunch of code</a> from difficult-to-maintain RewriteRules into the product and made it easier to manage.
                            </p>
                            <p>
                                We’ve still got some work to do on JavaScript unit tests and <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=625376">moving our crontab into version control</a>, but these are both on track for this quarter, we just have to make sure we make the time.
                            </p>
                            <p>
                                Overall, I think we’ve done pretty well so far this quarter. I would give us a B, and we can still get to an A if we can tackle JS tests and crontabs.
                            </p>
                            <h3>
                                Coming Up
                            </h3>
                            <p>
                                The two things I’d like to see next are <strong>faster cycles</strong> and moving toward a <strong>more CD friendly</strong> way of building things. There are two challenges these help address.
                            </p>
                            <p>
                                Faster release cycles will get us thinking about managing time and planning work when releases aren’t centered around a big piece of functionality. Instead of starting with a big thing and picking a set of little things to lump in with it, we’ll need to balance fixing little things with work on bigger features.
                            </p>
                            <p>
                                By the beginning of June, I want us to <strong>release every week</strong>, whether there’s something big or not.
                            </p>
                            <p>
                                CD also presents a new challenge for big features: how do you deal with code that isn’t completely ready yet?
                            </p>
                            <p>
                                There are a couple of ways of handling this. One is to use longer-lived feature branches. That works pretty well for desktop software like Firefox where you can hand someone a binary and say “test this.” But it’s a challenge with a web app because, unless we move our staging environments around all the time, it blocks QA from testing something until it’s not only ready but, in fact, <em>already on production</em>.
                            </p>
                            <p>
                                A better solution is to use feature flags to hide new functionality until it’s ready. In this model, everything lives on the same branch (you still do feature branches for bug fix/review and for those times something does need to live a little longer before merging) and all staging servers—and eventually production—run the same code, but with a different set of flags turned on. You can turn a feature on in production after it’s been verified on stage.
                            </p>
                            <p>
                                This isn’t easier. It means structuring code differently, thinking about a new set of constraints. It’s what we should do.
                            </p>
                            <p>
                                <em>W</em><em>e will screw up</em>, probably a couple of times, before we get this down. That’s why we should start now, when our mistakes will be confined to staging servers.
                            </p>
                            <p>
                                In Q2 I want us to <strong>stop using the ‘next’ branch</strong> and start using <a title="Introducing Waffle for Django" href="http://coffeeonthekeyboard.com/introducing-waffle-for-django-541/">Waffle</a> to control features until they’re ready.
                            </p>
                            <p>
                                Not everything needs to hide behind a flag: small bug fixes obviously don’t. This may be giving us a window into what QA is like under CD: big things are manually tested before we turn them on, but little fixes, already verified by the developer and reviewer, make it through to production without manual intervention from QA.
                            </p>
                            <p>
                                We also need to start planning time to remove flags and dead code once a feature has shipped. That is part of the development cost of a feature, and will hopefully be offset by reducing the time it takes to get something to production once it is ready.
                            </p>
                            <h3>
                                Big Changes
                            </h3>
                            <p>
                                While Q1 has been about a larger set of smaller, more concrete and isolated changes, Q2 is going to be about a smaller set of much bigger changes.
                            </p>
                            <p>
                                Q1 was about changing our code. Q2 is about changing our thinking.
                            </p>
                            <p>
                                I’m excited about diving into these challenges. I can’t wait for Q2.
                            </p>
                        </blockquote>
                    </div>
                    <p class="bookmark-source">
                        Source: <a href="http://coffeeonthekeyboard.com/sumo-in-q2-563/">http://coffeeonthekeyboard.com/sumo-in-q2-563/</a>
                    </p>
                </div>
            </article>
            <nav id="post-nav"></nav><script id="discus-javascript">
    var disqus_shortname = 'improbable';

                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                    document.getElementsByTagName('body')[0].appendChild(dsq);
                })();
            </script><a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            <div id="disqus_thread"></div>
        </section>
        <footer id="site-footer">
            <p>
                This site is purely my personal work and does not reflect the views of my employer.
            </p>
            <p class="license">
                <a class="icon" rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png"></a> This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
            </p>
        </footer><script async="" defer src="/static/js/common.js">
</script><script id="google-analytics">
    var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-2097834-1']);
            _gaq.push(['_setDomainName', 'improbable.org']);
            _gaq.push(['_trackPageview']);

            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
        </script>
    </body>
</html>
