<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>WEFT-less</title>
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <link rel="stylesheet" href="/static/css/main.min.css" type="text/css" media="all">
        <!--[if lte IE 8]>
            <link rel="stylesheet" href="/static/css/ie-fixes.css" type="text/css" media="all">
            <script src="/static/js/html5shiv.js"></script>
        <![endif]-->

        <meta http-equiv="last-modified" content="Tue, 09 Mar 2010 20:09:04 GMT">
        <link rel="alternate" type="application/atom+xml" title="All Posts (Atom)" href="/feeds/all.atom">
        <link rel="alternate" type="application/rss+xml" title="All Posts (RSS)" href="/feeds/all.rss">
        <link rel="icon" type="image/jpeg" sizes="287x287" href="/static/img/favicon-287x287.jpg">
        <link rel="icon" type="image/jpeg" sizes="128x128" href="/static/img/favicon-128x128.jpg">
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-2097834-1', 'auto');
            ga('send', 'pageview');
        </script>
    </head>
    <body class="blog post_detail" itemscope itemtype="http://schema.org/BlogPosting">
        <nav id="site-nav">
            <header id="about">
                <h1><a href="/about/">Chris Adams</a></h1>
                <h2>Programmer, cyclist, photographer</h2>
            </header>
            <ul class="links">
                <li>
                    <a href="/">Home</a>
                </li>
                <li>
                    <a href="/about/">About</a>
                </li>
                <li>
                    <a href="/feeds/all.atom" title="Site Feed">Site Feed</a>
                </li>
            </ul>
            <ul class="social-networks">
                <li>
                    <a href="https://github.com/acdha" rel="me">Github</a>
                </li>
                <li>
                    <a href="https://bitbucket.org/acdha" rel="me">Bitbucket</a>
                </li>
                <li>
                    <a href="https://pinboard.in/u:acdha/" rel="me">Pinboard</a>
                </li>
                <li>
                    <a href="https://twitter.com/acdha" rel="me">Twitter</a>
                </li>
                <li>
                    <a href="https://www.flickr.com/photos/acdha" rel="me">Flickr</a>
                </li>
                <li>
                    <a href="https://www.linkedin.com/in/acdha" rel="me">LinkedIn</a>
                </li>
            </ul>
            <div id="site-search"></div>
        </nav>
        <section id="main">
            <article class="post">
                <header>
                    <meta itemprop="dateCreated" content="2009-10-21T14:50:08-04:00">
                    <meta itemprop="dateModified" content="2009-10-21T14:50:08-04:00">
                    <time class="date" itemprop="datePublished" datetime="2009-10-21T18:50:08+00:00">Oct 21</time>
                    <h2 class="" itemprop="title">WEFT-less</h2>
                </header>

                <div class="body" itemprop="articleBody"><div class="googlereader description" data-google-id="tag:google.com,2005:reader/item/f9715c933951125b">
                        <blockquote>
                            <p>
                                <a href="http://mezzoblue.com/archives/2009/10/05/starting_wit/">Last we left off</a>, I'd just started going down the road of playing with <code>@font-face</code>, sans IE. This is the follow-up where we bring Internet Explorer back into the equation and look at the hoops we need to jump through to bring it in line.
                            </p>
                            <p>
                                A quick refresher: following a different path than every other browser out there, IE requires a custom-created, rights-managed font file called EOT (Embedded OpenType). The syntax to safely serve up an EOT to IE was shown in that <a href="http://mezzoblue.com/archives/2009/10/05/starting_wit/">previously-mentioned post</a>. What we're covering here is, how in the world do you create an EOT file in the first place?
                            </p>
                            <p>
                                Well, there's WEFT, Microsoft's one and only tool for creating EOT files. Let's try WEFT, shall we? Go to Microsoft's site for <a href="http://www.microsoft.com/typography/web/embedding/weft3/download.aspx">WEFT</a> and hit the download link. Wait, what's this business about Internet Explorer 4 and Windows 98? Uh-oh.
                            </p>
                            <p>
                                The most recent WEFT point release was in 2003, but if you look at the screenshots on <a href="http://www.microsoft.com/typography/web/embedding/weft3/tutorial.aspx">the tutorial for the most recent major version</a>, you might be able to guess what sort of an experience you're in for.
                            </p>
                            <div>
                                <img src="http://www.mezzoblue.com/i/articles/2009/oct/weft-ie.gif" width="337" height="133" alt="IE, version x.old">
                                <p>
                                    <span>Figure:</span> This is the era of browser WEFT was built during. Is that IE2? IE3? It's been so long I can't remember.
                                </p>
                            </div>
                            <p>
                                Obviously it's Windows-only. I grabbed a copy and tried it in Windows XP under Parallels. That went well:
                            </p>
                            <div>
                                <img src="http://www.mezzoblue.com/i/articles/2009/oct/weft-broken.jpg" width="400" height="400" alt="WEFT in all its glory">
                                <p>
                                    <span>Figure:</span> No WEFT for you. And Windows apps with images as toolbar backgrounds? So Win95.
                                </p>
                            </div>
                            <p>
                                I've booted multiple virtual installations of Windows XP under Parallels, but that's the oldest version of Windows I have on hand (what a ridiculous phrase to type) and it simply doesn't want to run.
                            </p>
                            <p>
                                I have managed to use WEFT in the past. Back in the late part of the 90's when it was still somewhat fresh, I distinctly remember grabbing a copy and converting some fonts to EOT. I also remember the GUI being a confusing pile of hurt, and the process being anything but transparent.
                            </p>
                            <p>
                                Essentially, you need to point WEFT at the page you're trying to embed the fonts in, so a) it can create domain-specific hooks and only run on that site (good luck getting the EOT working locally or on a staging server), and b) so it can subset the character set to only the glyphs you're actually using. The former is an overly-restrictive attempt at DRM. The latter is actually useful for controlling file sizes, aside from the total lack of manual control.
                            </p>
                            <p>
                                Microsoft mentions on the download page that some people report it working in virtualized Windows under OS X, and I have heard independent reports of it working for other people. But I've also heard I'm not the only one in the not-working camp. I guess if you get it working, consider yourself lucky in a pyrrhic sort of way.
                            </p>
                            <p>
                                But anyway, forget WEFT. Microsoft has clearly long given up on it. Abandonware isn't going to solve today's modern web design problems, what else have we got?
                            </p>
                            <p>
                                Searching that problem turned up Edward O'Connor's post from a few months back about his experience <a href="http://edward.oconnor.cx/2009/07/how-to-create-eot-files-without-microsoft-weft">installing command line tools that will ultimately generate EOT files</a>.
                            </p>
                            <p>
                                At this point I'm going to cut a very long story short and say that, despite being fairly comfortable hacking around a Terminal window and installing remote packages and the like, I wasted almost a day doing this with nothing to show for it. I suspect there's nothing wrong with Edward's methods, but some OTF files seem to complicate things in a way it simply doesn't account for. Others reportedly work; the ones I tried didn't.
                            </p>
                            <p>
                                (As an aside: there are a few web-based tools out there that do similar without the command line hackery. <a href="http://www.kirsle.net/wizards/ttf2eot.cgi">TTF 2 EOT</a> does what its name suggests, and there's a tool called Online Font Converter that supposedly converts OTF files to TTF and a few other formats. I'm not linking to that one because I'm a little suspicious of the site (AdSense-heavy, and the zip files it produced wouldn't open for me), but if you really want to find it just search for the capitalized title in the last sentence. But you're probably better of using FontSquirrel anyway, mentioned below.)
                            </p>
                            <p>
                                (As a second aside, you might be luckier than I was. You might be able to use any of these tools to go from OTF to EOT and wonder what in the world I'm talking about. Given that I'm definitely not the only one who had this problem, it seems likely that sooner or later you might run into a font that just doesn't want to convert. When that happens, keep reading.)
                            </p>
                            <p>
                                After spending that time hacking around in the Terminal I was ready to give up on the entire process of WEFT-less EOT files, and then Jonathan Snook happened to mention he had a method. A bit of dialogue resulted in my prodding him into doing a screencast, and voila:
                            </p>
                            <p>
                                <a href="http://snook.ca/archives/html_and_css/screencast-converting-ttf2eot">Converting OTF or TTF to EOT</a>
                            </p>
                            <p>
                                The really important bit here, the part that I couldn't get right before, is the manual adjustment in FontForge. The automated tools mentioned above in the OTF › EOT conversion chain don't account for the namerecord tweaking that seems essential to get an EOT rendering in Internet Explorer. I had previously installed a tool that <a href="http://karoshiethos.com/2009/08/05/creating-eot-files-with-ttf2eot/">converted TTF files into XML</a> so I could pull off the namerecord change in text. No such luck. FontForge's awful XWindows GUI tool was the only thing that worked for me. No really, it's <strong>ugly</strong>; the UI is even worse than WEFT. But it happens to work, which is its saving grace.
                            </p>
                            <div>
                                <img src="http://www.mezzoblue.com/i/articles/2009/oct/fontforge.gif" width="400" height="275" alt="FontForge">
                                <p>
                                    <span>Figure:</span> FontForge in all its glory.
                                </p>
                            </div>
                            <p>
                                Also, between the time I started writing this post and now, <a href="http://www.fontsquirrel.com/fontface/generator">FontSquirrel released a @font-face generator</a> that appears to automate the whole process. I haven't had a chance to test yet, so it's unclear to me whether it fixes the namerecord problems or not. If so, great, but one reason to still consider using FontForge is its ability to manually delete glyph records. Being able to drop Greek characters, accents and diacritics, ligatures, and other glyphs that aren't typically used on an English-speaking site is handy when you have 100k+ OTF files that you'd like to embed.
                            </p>
                            <p>
                                Finally, a couple of related links I've found interesting:
                            </p>
                            <ul>
                                <li>
                                    <a href="http://snook.ca/archives/html_and_css/becoming-a-font-embedding-master">Becoming a Font Embedding Master</a>, also from Jonathan Snook
                                </li>
                                <li>
                                    <a href="http://nicewebtype.com/notes/2009/10/20/where-to-get-web-fonts/">Where to Get Web Fonts</a> from Tim Brown at Nice Web Type
                                </li>
                                <li>
                                    <a href="http://www.typotheque.com/webfonts">Typotheque</a>, a foundry that explicitly allows web licensing of their catalogue, hosts them, and offers a really interesting pricing model. Worth a look.
                                </li>
                            </ul>
                        </blockquote>
                    </div>
                    <p class="bookmark-source">
                        Source: <a href="http://mezzoblue.com/archives/2009/10/21/weft-less/">http://mezzoblue.com/archives/2009/10/21/weft-less/</a>
                    </p>
                </div>
            </article>

            <nav id="post-nav">


            </nav>

            <script id="discus-javascript">
                var disqus_shortname = 'improbable';

                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
                    document.getElementsByTagName('body')[0].appendChild(dsq);
                })();
            </script>

            <a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            <div id="disqus_thread"></div>
        </section>

        <footer id="site-footer" class="nocontent">
            <p>
                This site is purely my personal work and does not reflect the views of my employer.
            </p>
            <p class="license">
                <a class="icon" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png"></a>
                This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
            </p>
        </footer>

        <script async src="/static/js/common.js"></script>
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/run_prettify.min.js" integrity="sha256-hj+5FRlAuvAFANiefn0PpJYCkV1X4QT9EgiPd+6QnCw=" crossorigin="anonymous"></script>
    </body>
</html>
