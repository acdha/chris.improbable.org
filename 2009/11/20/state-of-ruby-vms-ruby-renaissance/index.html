<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>
            State of Ruby VMs: Ruby Renaissance
        </title>
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <link rel="stylesheet" href="/static/css/main.min.css" type="text/css" media="all"><!--[if lte IE 8]>
            <link rel="stylesheet" href="/static/css/ie-fixes.css" type="text/css" media="all">
            <script src="/static/js/html5shiv.js"></script>
        <![endif]-->
        <meta http-equiv="last-modified" content="Fri, 20 Nov 2009 22:03:41 GMT">
        <link rel="alternate" type="application/atom+xml" title="All Posts (Atom)" href="/feeds/all.atom">
        <link rel="alternate" type="application/rss+xml" title="All Posts (RSS)" href="/feeds/all.rss">
        <link rel="icon" type="image/jpeg" sizes="287x287" href="/static/img/favicon-287x287.jpg">
        <link rel="icon" type="image/jpeg" sizes="128x128" href="/static/img/favicon-128x128.jpg">
        <script type="application/javascript">
var _prum={id:"5166be01e6e53d1007000001"};var PRUM_EPISODES=PRUM_EPISODES||{};PRUM_EPISODES.q=[];PRUM_EPISODES.mark=function(b,a){PRUM_EPISODES.q.push(["mark",b,a||new Date().getTime()])};PRUM_EPISODES.measure=function(b,a,b){PRUM_EPISODES.q.push(["measure",b,a,b||new Date().getTime()])};PRUM_EPISODES.done=function(a){PRUM_EPISODES.q.push(["done",a])};PRUM_EPISODES.mark("firstbyte");(function(){var b=document.getElementsByTagName("script")[0];var a=document.createElement("script");a.type="text/javascript";a.async=true;a.charset="UTF-8";a.src="//rum-static.pingdom.net/prum.min.js";b.parentNode.insertBefore(a,b)})();
        </script>
    </head>
    <body class="blog post_detail" itemscope itemtype="http://schema.org/BlogPosting">
        <nav id="site-nav">
            <header id="about">
                <h1>
                    <a href="/about/">Chris Adams</a>
                </h1>
                <h2>
                    Programmer, cyclist, photographer
                </h2>
            </header>
            <ul class="links">
                <li>
                    <a href="/">Home</a>
                </li>
                <li>
                    <a href="/about/">About</a>
                </li>
                <li>
                    <a href="/feeds/all.atom" title="Site Feed">Site Feed</a>
                </li>
            </ul>
            <ul class="social-networks">
                <li>
                    <a href="https://github.com/acdha" rel="me">Github</a>
                </li>
                <li>
                    <a href="http://bitbucket.org/acdha" rel="me">Bitbucket</a>
                </li>
                <li>
                    <a href="http://delicious.com/acdha" rel="me">del.icio.us</a>
                </li>
                <li>
                    <a href="http://twitter.com/acdha" rel="me">Twitter</a>
                </li>
                <li>
                    <a href="https://plus.google.com/116562742092842686896?rel=author" rel="me">Google+</a>
                </li>
                <li>
                    <a href="http://www.flickr.com/photos/acdha" rel="me">Flickr</a>
                </li>
                <li>
                    <a href="http://www.linkedin.com/in/acdha" rel="me">LinkedIn</a>
                </li>
                <li>
                    <a href="http://connect.garmin.com/explore?owner=acdha" rel="me">Garmin Connect</a>
                </li>
            </ul>
            <div id="site-search"></div>
        </nav>
        <section id="main">
            <article class="post">
                <header>
                    <meta itemprop="dateCreated" content="2009-11-20T17:03:41-04:00">
                    <meta itemprop="dateModified" content="2009-11-20T17:03:41-04:00"><time class="date" itemprop="datePublished" datetime="2009-11-20T21:03:41+00:00">Nov 20</time>
                    <h2 itemprop="title">
                        State of Ruby VMs: Ruby Renaissance
                    </h2>
                </header>
                <div class="body" itemprop="articleBody">
                    <div class="googlereader description" data-google-id="tag:google.com,2005:reader/item/585dafd89a9cb065">
                        <blockquote>
                            <p>
                                <img align="left" style="margin-right:1em" src="http://www.igvita.com/posts/09/ruby-logo.png">Ruby is commonly associated with the frameworks (Rails, RSpec, and many others) that it enabled, but it is much more than that. The same ideology and design principles that popularized the language at the start are also the reason why it is being currently ported to a variety of alternative platforms: JVM, Objective-C, Smalltalk VM and Microsoft’s DLR. Technical details aside, few will disagree that <a href="http://www.artima.com/intv/ruby.html">Matz’s focus</a> on “how we feel while programming” and the objective of “making the programmer happy” has resonated with the larger community.
                            </p>
                            <p>
                                In a short span of just a couple of years, the Ruby VM space has evolved to more than just a handful of choices: <a href="http://www.ruby-lang.org/en/">MRI</a>, <a href="http://jruby.org/">JRuby</a>, <a href="http://ironruby.net/">IronRuby</a>, <a href="http://www.macruby.org/">MacRuby</a>, <a href="http://rubini.us/">Rubinius</a>, <a href="http://maglev.gemstone.com/">MagLev</a>, <a href="http://www.rubyenterpriseedition.com/">REE</a> and <a href="https://wiki.sdn.sap.com/wiki/display/Research/BlueRuby">BlueRuby</a>. In fact, keeping up with all of the most recent developments within each VM is now easily a full-time job. For that reason, and with RubyConf ‘09 in full swing, let’s take a quick survey of the space and where it’s taking us.
                            </p>
                            <h4>
                                <strong>2010: Year of Ruby Renaissance</strong>
                            </h4>
                            <p>
                                Observing the trends and acceleration of development amongst all the VM’s, it is clear that 2010 is going to be an exciting year for the language. While more than a few developers have proclaimed Ruby (and more often, Rails) as dead within the past year, likely due to it losing the initial novelty angle, in reality the language is at the cusp of becoming available to a much broader community. Within the next year, MacRuby, Rubinius, IronRuby, and MagLev should all hit the 1.0 status, effectively making all the things we love about Ruby available to entirely new communities of programmers. HotCocoa with MacRuby makes writing Mac apps a breeze, IronRuby will bring Ruby scripting to the .NET crowd, Rubinius will become a viable deployment platform, and MagLev will give us the distributed persistence model offered by their Smalltalk VM. All of this without even mentioning the growing adoption of JRuby, which marries the best of JVM with Ruby, or the rising popularity of REE fork of Matz’s Ruby which offers significant performance and memory improvements.
                            </p>
                            <p align="center">
                                <img src="http://www.igvita.com/posts/09/ruby-vms.png">
                            </p>
                            <p>
                                In other words, <em>if the “Ruby revolution is over”, then the next year is likely to be the first year of its Renaissance</em>. It won’t happen overnight, but slowly and surely we will see the same idioms, tools, and DSL’s we are all accustomed to in Ruby make their way to adjacent platforms. Many projects and companies are already using RSpec and WebRat to test their non-Ruby code. Likewise, why not use Ruby for DOM manipulation via Silverlight (<a href="http://visitmix.com/labs/gestalt/">Gestalt</a>), or abstract Java or Cocoa API’s into concise DSL’s? It’s an exciting time to be a Rubyist.
                            </p>
                            <h4>
                                <strong>MRI: Matz’s Ruby (1.8.x / 1.9.x)</strong>
                            </h4>
                            <p>
                                <img align="left" style="margin-right:1em" src="http://www.igvita.com/posts/09/mri-logo.png">MRI Ruby, which is the original and the default platform for the vast majority of Ruby users have been making steady progress throughout the past year. First, we saw the <a href="http://www.ruby-lang.org/en/news/2009/01/30/ruby-1-9-1-released/">1.9.1 release</a> at the beginning of the year, which made Ruby 1.9 a viable deployment platform, although the overall pickup has remained relatively low. In mid July, <a href="http://www.ruby-lang.org/en/news/2009/07/20/ruby-1-9-2-preview-1-released/">Ruby 1.9.2 preview 1</a> hit the shelves, and the original schedule planned for the final 1.9.2 release on December 25th. However, <a href="http://twitter.com/yugui">Yuki Sonoda</a> (release manager) recently indicated that the <a href="http://www.ruby-forum.com/topic/195825">schedule will be canceled</a> in favor of making Ruby 1.9.2 compatible with the RubySpec suite prior to the final release - this is great news for everyone and well worth the wait.
                            </p>
                            <p>
                                Sitting in the audience at RubyKaigi in Tokyo earlier this year, it was clear that the focus of the development team is on Ruby 1.9. Moving forward, there will be one more release within the 1.8.x branch (Ruby 1.8.8), and it will serve as a bridge between 1.8 and 1.9. If you haven’t already, you should investigate migrating your code to Ruby 1.9 - <a href="http://isitruby19.com/">most of the critical gems</a>, and all popular frameworks work out of the box, not to mention the numerous performance improvements.
                            </p>
                            <p>
                                In the coming year, we <a href="http://twitter.com/yugui/status/5739171454">may even see a Ruby 2.0</a>, and in all likelihood a continual improvement in speed and library support. Matz showed off a number of experimental branches at RubyKaigi, and Koichi Sasada indicated that many of the performance optimizations are yet to be turned on for Ruby 1.9 - to date the focus has been on compatibility and feature completeness.
                            </p>
                            <h4>
                                <strong>JRuby: Ruby on the JVM</strong>
                            </h4>
                            <p>
                                Out of all the “alternative” Ruby VM’s, JRuby is by far the most mature project both in terms of compatibility and community coverage. By combining the best of the JVM platform - generational GC, true concurrency (no GIL), and transparent interop with any Java library - with Ruby syntax, it is no surprise that JRuby has been quietly <a href="http://adtmag.com/articles/2009/11/10/jruby-1.4-released.aspx">gaining market share</a> in the community. It is fast, it runs Rails, and it will soon be compatible with Ruby 1.9.
                            </p>
                            <p>
                                <img align="left" style="margin-right:1em" src="http://www.igvita.com/posts/09/jruby-duke.png">Within the past year the JRuby team, which consists of 7 active committers (3 of whom <a href="http://arstechnica.com/open-source/news/2009/07/jruby-team-leaves-sun-joins-engine-yard.ars">migrated from Sun to Engine Yard</a> earlier this year) , and dozens of intermittent contributors has fixed more user reported issues than in all previous releases combined. <a href="http://jruby.org/2009/11/02/jruby-1-4-0.html">JRuby 1.4.0</a> is a good indicator of the health of the project: a large collection of new features, and over 307 bug fixes since JRuby 1.3.1.
                            </p>
                            <p>
                                Tickets for <a href="http://jrubyconf.com/">JRubyConf</a> were sold out in a matter of hours following the announcement, and in all likelihood serve as a good indicator that JRuby is the platform to watch in the coming year. The combination of the JVM optimizations and its widescale deployment within the enterprise world will definitely make it an appealing Ruby VM.
                            </p>
                            <h4>
                                <strong>MacRuby: Objective-C, LLVM and Ruby</strong>
                            </h4>
                            <p>
                                <img align="left" style="margin-right:1em" src="http://www.igvita.com/posts/09/macruby-logo.png">Want to mix and match Cocoa API’s or access OSX system libraries all within a Ruby VM? Then MacRuby is the answer and the VM is picking up steam fast. On March 9th, <a href="http://www.macruby.org/blog/2009/03/09/macruby-0.4.html">MacRuby 0.4</a> shipped with a threaded GC, full 64-bit support, DTrace probes, and many improvements to the HotCocoa API’s. Since then, the project has switched from <a href="http://en.wikipedia.org/wiki/YARV">YARV</a> to a completely new VM based on LLVM compiler infrastructure (<a href="http://www.macruby.org/blog/2009/10/07/macruby05b1.html">shipped in 0.5 beta 1</a>), and the benefits are numerous: machine code compilation, true concurrency (no GIL), a working JIT, and even ahead of time compilation (AOT)!
                            </p>
                            <p>
                                In other words, MacRuby is now a true Ruby compiler. You can write a HotCocoa app, leverage native POSIX threads, or even take advantage of Apple’s <a href="http://en.wikipedia.org/wiki/Grand_Central_Dispatch">Grand Central Dispatch</a> (GCD) and then compile your program and distribute it as a binary to any OSX user.
                            </p>
                            <p>
                                With 7 members on the team and a growing community (<a href="http://rubyonosx.com/">RubyOnOSX</a>), MacRuby is quickly becoming one of the most promising open-source projects for Apple - it would be great to see them officially embrace it in the coming year. With the new VM and numerous performance improvements, MacRuby has the potential to bring Ruby to all the Objective-C developers and open up an entirely new market for Ruby. In theory, we could even see MacRuby on the IPhone, that is, if we overcome a few minor snags, like a <a href="http://merbist.com/2009/05/27/macruby-changing-the-ruby-ecosystem/#comment-659">missing GC</a>. Definitely a project to watch in the coming year as it edges towards the 1.0 status.
                            </p>
                            <h4>
                                <strong>MagLev: Smalltalk VM and Ruby</strong>
                            </h4>
                            <p>
                                <img align="left" style="margin-right:1em" src="http://www.igvita.com/posts/09/maglev-logo.png">The GemStone team has been quietly making steady progress with <a href="http://maglev.gemstone.com/">MagLev</a> over the past year. The development is being done in parallel with work on their upcoming GemStone 3.0 VM and is promising to bring Ruby to their 64-bit Smalltalk VM, which offers a JIT, years of VM optimizations, and most importantly, a <a href="http://pivotallabs.com/talks/28-maglev">built-in persistence and distribution layer</a>. In other words, you could think of Maglev as a distributed database that runs Ruby code internally - thousands of concurrent VM’s can be spread across hundreds of nodes, all accessing the same data with ACID semantics.
                            </p>
                            <p>
                                At RailsConf this year the team showed off a working Sinatra app, and since then they have gone from passing 5000 to nearly ~27900 RubySpecs. Rack, Sinatra, MiniTest and a few others already run unmodified on the VM and the tentative plan is for the project to hit 1.0 sometime in the upcoming year. At the moment, there is a closed alpha test in progress, but soon it will be opened to the larger public. <em>(Update: grab the <a href="http://groups.google.com/group/maglev-discussion/browse_thread/thread/1102993e9e21492a">public beta here</a>).</em>
                            </p>
                            <p>
                                The persistence layer offered by the VM is definitely one of the most interesting features, but the team has also indicated that MagLev will support other persistence models as well - you’ll be able to use ActiveRecord with MySQL, etc.
                            </p>
                            <h4>
                                <strong>Ruby Enterprise Edition</strong>
                            </h4>
                            <p>
                                <img align="left" style="margin-right:1em" src="http://www.igvita.com/posts/09/phusion-logo.png">Launched in mid 2008, REE is a fork of Ruby 1.8.7 optimized for server and production deployments of MRI Ruby. Combination of <a href="http://github.com/brentr/matzruby/tree/v1_8_7_72-mbari">MBARI patches</a>, improvements in thread and scheduling overhead by <a href="http://timetobleed.com/fixing-threads-in-ruby-18-a-2-10x-performance-boost/">Joe Damato and Aman Gupta</a>, a copy-on-write (COW) fork model, and a tunable GC all contribute to a measurable difference in the amount of used memory and overall performance. Earlier this year Twitter <a href="http://blog.evanweaver.com/articles/2009/09/24/ree/">switched their infrastructure to REE</a> and reported a 30% improvement in throughput!
                            </p>
                            <p>
                                <a href="http://www.modrails.com/">Phusion Passenger</a>, developed by the same team, has also seen a good pickup in the community within the past year, but it remains to be seen if REE adoption will continue to grow in light of all the progress by alternative VM’s.
                            </p>
                            <h4>
                                <strong>IronRuby: Ruby on .NET</strong>
                            </h4>
                            <p>
                                <img align="left" style="margin-right:1em" src="http://www.igvita.com/posts/09/ironruby-logo.png">IronRuby is a .NET implementation of the Ruby VM which leverages Microsoft’s Dynamic Language Runtime (DLR), and hence enables an entire host of interesting use cases for Ruby. For example, not only is there seamless integration with all the .NET libraries and infrastructure, but running on top of the DLR also means that Ruby can be run within Silverlight (yep, right in your browser - <a href="http://visitmix.com/labs/gestalt/">check out Gestalt</a>).
                            </p>
                            <p>
                                The 1.0 release is looming on the horizon and the team has been making great progress. IronRuby now <a href="http://ironruby.info/">passes over 92% of all the RubySpecs</a> and the adaptive compiler, combined with the optimized DLR also means much lower VM startup times, as well as significant performance improvements over MRI. <em>(Update: <a href="http://ironruby.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=35312">download IronRuby 1.0 RC1</a>)</em>
                            </p>
                            <p>
                                It remains to be seen if the .NET community will embrace IronRuby, but it <a href="http://www.sapphiresteel.com/Who-Needs-IronRuby">sounds like tool support</a> (Visual Studio, Intellisense, etc) might be the next big hurdle for the project.
                            </p>
                            <h4>
                                <strong>Rubinius: Ruby written in (mostly) Ruby</strong>
                            </h4>
                            <p>
                                <img align="left" style="margin-right:1em" src="http://www.igvita.com/posts/09/rubinius-logo.png">Rubinius is an initiative to implement as much of Ruby as possible via Ruby code itself - turtles all the way down. In the works since 2006, the Rubinius team <a href="http://blog.fallingsnow.net/2008/11/18/a-sad-day/">lost a few developers</a> early this year, but the project is <a href="http://blog.fallingsnow.net/2009/05/28/rumors-of-our-demise-are-greatly-exaggerated/">alive and healthy</a>. The VM has been rewritten in C++, a JIT compiler has been added, and you can now run mongrel, thin, rack, amqp, and a number of other gems all unmodified. The <a href="http://rubini.us/roadmap.html">roadmap shows</a> 1.0RC in the works, and a focus on enabling real-world application deployments (packaging, distribution, etc).
                            </p>
                            <p>
                                It is too early to talk about performance, but the combination of the JIT and LLVM infrastructure means that Rubinius will have true concurrency (no GIL), and <a href="http://www.engineyard.com/blog/2009/improving-the-rubinius-bytecode-compiler/">plenty of opportunities</a> for introspection and optimization of your code - an inherent benefit of rewriting Ruby in Ruby itself.
                            </p>
                            <p>
                                Both FFI and RubySpecs, which are now used by virtually every other VM are a direct result of the project, so all things considered, Rubinius can already be called a resounding success. However, with 1.0 on the horizon, it remains to be seen how and if the community will react to the release. Getting a few production deployments under the belt, as well as building a larger user community, are likely to be the big challenges for the year ahead.
                            </p>
                            <h4>
                                <strong>BlueRuby: Ruby on ABAP VM</strong>
                            </h4>
                            <p>
                                <img align="left" style="margin-right:1em" src="http://www.igvita.com/posts/09/sap-logo.png">An <a href="https://wiki.sdn.sap.com/wiki/display/Research/BlueRuby">exploratory research project</a> form SAP Labs, BlueRuby is an initiative to bring the Ruby runtime to the ABAP VM powering the AP NetWeaver and SAP ERP 6.0 products. It is already passing 75.5% of all the RubySpecs and is being pushed by SAP as a way to <a href="https://www.sdn.sap.com/irj/scn/index?rid=/library/uuid/10ba055e-6856-2c10-b88f-873f208fcdf9">adopt TDD practices</a> within their products. At this point, there is no known release schedule or public roadmap for BlueRuby, so don’t expect Rails apps on top of SAP NetWeaver anytime soon, but it does have the potential to bring Ruby and all the best practices enabled by it to thousands of enterprise developers.
                            </p>
                            <h4>
                                <strong>Rubies everywhere!</strong>
                            </h4>
                            <p>
                                Talking to the developers of all of the alternative VM's you can't help but to feel excited about the future of Ruby. There is a clear pattern emerging: using Ruby to go beyond Ruby, and as a bridge to other communities. Halfway through RubyConf, it is a clear theme here as well - several serialization talks, code generation, and an entire evening of presentations on all the Ruby VM's.
                            </p>
                            <div>
                                <a href="http://feeds.feedburner.com/~ff/igvita?a=_RLQ_jnJvT8:l3SU41YodM0:yIl2AUoC8zA"><img src="http://feeds.feedburner.com/~ff/igvita?d=yIl2AUoC8zA" border="0"></a> <a href="http://feeds.feedburner.com/~ff/igvita?a=_RLQ_jnJvT8:l3SU41YodM0:D7DqB2pKExk"><img src="http://feeds.feedburner.com/~ff/igvita?i=_RLQ_jnJvT8:l3SU41YodM0:D7DqB2pKExk" border="0"></a> <a href="http://feeds.feedburner.com/~ff/igvita?a=_RLQ_jnJvT8:l3SU41YodM0:F7zBnMyn0Lo"><img src="http://feeds.feedburner.com/~ff/igvita?i=_RLQ_jnJvT8:l3SU41YodM0:F7zBnMyn0Lo" border="0"></a> <a href="http://feeds.feedburner.com/~ff/igvita?a=_RLQ_jnJvT8:l3SU41YodM0:V_sGLiPBpWU"><img src="http://feeds.feedburner.com/~ff/igvita?i=_RLQ_jnJvT8:l3SU41YodM0:V_sGLiPBpWU" border="0"></a> <a href="http://feeds.feedburner.com/~ff/igvita?a=_RLQ_jnJvT8:l3SU41YodM0:gIN9vFwOqvQ"><img src="http://feeds.feedburner.com/~ff/igvita?i=_RLQ_jnJvT8:l3SU41YodM0:gIN9vFwOqvQ" border="0"></a>
                            </div>
                        </blockquote>
                    </div>
                    <p class="bookmark-source">
                        Source: <a href="http://www.igvita.com/2009/11/20/state-of-ruby-vms-ruby-renaissance/?utm_source=feedburner&amp;utm_campaign=Feed%3A+igvita+%28igvita.com%29&amp;utm_content=feed">http://www.igvita.com/2009/11/20/state-of-ruby-vms-ruby-renaissance/?utm_source=feedburner&amp;utm_campaign=Feed%3A+igvita+%28igvita.com%29&amp;utm_content=feed</a>
                    </p>
                </div>
            </article>
            <nav id="post-nav"></nav><script id="discus-javascript">
    var disqus_shortname = 'improbable';

                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                    document.getElementsByTagName('body')[0].appendChild(dsq);
                })();
            </script><a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            <div id="disqus_thread"></div>
        </section>
        <footer id="site-footer" class="nocontent">
            <p>
                This site is purely my personal work and does not reflect the views of my employer.
            </p>
            <p class="license">
                <a class="icon" rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png"></a> This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
            </p>
        </footer><script async="" defer src="/static/js/common.js">
</script><script id="google-analytics">
    var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-2097834-1']);
            _gaq.push(['_setDomainName', 'improbable.org']);
            _gaq.push(['_trackPageview']);

            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
        </script>
    </body>
</html>
