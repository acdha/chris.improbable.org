<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Get a Twitter Account’s Registration Date via Snow Leopard Service</title>
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <link rel="stylesheet" href="/static/css/main.min.css" type="text/css" media="all">
        <!--[if lte IE 8]>
            <link rel="stylesheet" href="/static/css/ie-fixes.css" type="text/css" media="all">
            <script src="/static/js/html5shiv.js"></script>
        <![endif]-->

        <meta http-equiv="last-modified" content="Sat, 12 Sep 2009 05:43:07 GMT">
        <link rel="alternate" type="application/atom+xml" title="All Posts (Atom)" href="/feeds/all.atom">
        <link rel="alternate" type="application/rss+xml" title="All Posts (RSS)" href="/feeds/all.rss">
        <link rel="icon" type="image/jpeg" sizes="287x287" href="/static/img/favicon-287x287.jpg">
        <link rel="icon" type="image/jpeg" sizes="128x128" href="/static/img/favicon-128x128.jpg">
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-2097834-1', 'auto');
            ga('send', 'pageview');
        </script>
    </head>
    <body class="blog post_detail" itemscope itemtype="http://schema.org/BlogPosting">
        <nav id="site-nav">
            <header id="about">
                <h1><a href="/about/">Chris Adams</a></h1>
                <h2>Programmer, cyclist, photographer</h2>
            </header>
            <ul class="links">
                <li>
                    <a href="/">Home</a>
                </li>
                <li>
                    <a href="/about/">About</a>
                </li>
                <li>
                    <a href="/feeds/all.atom" title="Site Feed">Site Feed</a>
                </li>
            </ul>
            <ul class="social-networks">
                <li>
                    <a href="https://github.com/acdha" rel="me">Github</a>
                </li>
                <li>
                    <a href="https://bitbucket.org/acdha" rel="me">Bitbucket</a>
                </li>
                <li>
                    <a href="https://pinboard.in/u:acdha/" rel="me">Pinboard</a>
                </li>
                <li>
                    <a href="https://twitter.com/acdha" rel="me">Twitter</a>
                </li>
                <li>
                    <a href="https://www.flickr.com/photos/acdha" rel="me">Flickr</a>
                </li>
                <li>
                    <a href="https://www.linkedin.com/in/acdha" rel="me">LinkedIn</a>
                </li>
            </ul>
            <div id="site-search"></div>
        </nav>
        <section id="main">
            <article class="post">
                <header>
                    <meta itemprop="dateCreated" content="2009-09-12T01:43:07-04:00">
                    <meta itemprop="dateModified" content="2009-09-12T01:43:07-04:00">
                    <time class="date" itemprop="datePublished" datetime="2009-09-12T05:43:07+00:00">Sep 12</time>
                    <h2 class="" itemprop="title">Get a Twitter Account’s Registration Date via Snow Leopard Service</h2>
                </header>

                <div class="body" itemprop="articleBody"><div class="googlereader description" data-google-id="tag:google.com,2005:reader/item/5c1e8e8b9587d5cf">
                        <blockquote>
                            <p>
                                Creating <a title="link to Macworld article" href="http://www.macworld.com/article/142419/2009/08/snowleopardservices.html">services</a> in <a href="http://www.apple.com/macosx/">Snow Leopard</a> is all the rage lately. So is <a href="http://twitter.com/">Twitter</a>. This tutorial brings both of them together and should serve as a fine example of just how slick and useful services in Snow Leopard can be.
                            </p>
                            <h2>
                                Step 1: Write a script to grab a twitter account’s registration date
                            </h2>
                            <p>
                                I recently became curious about how long some of the people I follow have been on Twitter. Using <a title="Twitter API doc" href="http://apiwiki.twitter.com/Twitter-REST-API-Method%3A-users%C2%A0show">this info from Twitter’s API documentation</a>, I made the following curl command to grab info on my own account:
                            </p>
                            <pre>
curl -s http://twitter.com/users/show.xml?screen_name=pmbuko
</pre>
                            <p>
                                This returns a bunch of info in XML format:
                            </p>
                            <pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;user&gt;
  &lt;id&gt;14845946&lt;/id&gt;
  &lt;name&gt;Peter Bukowinski&lt;/name&gt;
  &lt;screen_name&gt;pmbuko&lt;/screen_name&gt;
  &lt;location&gt;Virginia&lt;/location&gt;
  &lt;description&gt;IT geek, father of two, California ex-patriate, frequent flier&lt;/description&gt;
  &lt;profile_image_url&gt;http://a3.twimg.com/profile_images/368893865/wtfisthat_normal.jpg&lt;/profile_image_url&gt;
  &lt;url&gt;http://yourmacguy.wordpress.com&lt;/url&gt;
  &lt;protected&gt;false&lt;/protected&gt;
  &lt;followers_count&gt;80&lt;/followers_count&gt;
  &lt;profile_background_color&gt;E9DCBD&lt;/profile_background_color&gt;
  &lt;profile_text_color&gt;323232&lt;/profile_text_color&gt;
  &lt;profile_link_color&gt;FF5500&lt;/profile_link_color&gt;
  &lt;profile_sidebar_fill_color&gt;0055FF&lt;/profile_sidebar_fill_color&gt;
  &lt;profile_sidebar_border_color&gt;0000FF&lt;/profile_sidebar_border_color&gt;
  &lt;friends_count&gt;78&lt;/friends_count&gt;
  &lt;created_at&gt;Tue May 20 14:45:16 +0000 2008&lt;/created_at&gt;
  &lt;favourites_count&gt;11&lt;/favourites_count&gt;
  &lt;utc_offset&gt;-18000&lt;/utc_offset&gt;
  &lt;time_zone&gt;Eastern Time (US &amp;amp; Canada)&lt;/time_zone&gt;
  &lt;profile_background_image_url&gt;http://a3.twimg.com/profile_background_images/2548407/background3.jpg&lt;/profile_background_image_url&gt;
  &lt;profile_background_tile&gt;true&lt;/profile_background_tile&gt;
  &lt;statuses_count&gt;1361&lt;/statuses_count&gt;
  &lt;notifications&gt;false&lt;/notifications&gt;
  &lt;verified&gt;false&lt;/verified&gt;
  &lt;following&gt;false&lt;/following&gt;
  &lt;status&gt;
    &lt;created_at&gt;Sat Sep 12 01:38:58 +0000 2009&lt;/created_at&gt;
    &lt;id&gt;3924831726&lt;/id&gt;
    &lt;text&gt;@hotdogsladies That's the best description I've heard yet. You must be between Durant and Dwight.&lt;/text&gt;
    &lt;source&gt;&amp;lt;a href=&amp;quot;http://www.atebits.com/&amp;quot; rel=&amp;quot;nofollow&amp;quot;&amp;gt;Tweetie&amp;lt;/a&amp;gt;&lt;/source&gt;
    &lt;truncated&gt;false&lt;/truncated&gt;
    &lt;in_reply_to_status_id&gt;3924654818&lt;/in_reply_to_status_id&gt;
    &lt;in_reply_to_user_id&gt;749863&lt;/in_reply_to_user_id&gt;
    &lt;favorited&gt;false&lt;/favorited&gt;
    &lt;in_reply_to_screen_name&gt;hotdogsladies&lt;/in_reply_to_screen_name&gt;
  &lt;/status&gt;
&lt;/user&gt;
</pre>
                            <p>
                                The line that contains the info I want is the first &lt;created_at&gt; line, showing that I registered on May 20, 2008 — a relative late-comer, I know…. If you’ve visited this blog before, you’re likely aware of my love for awk. I’ll pipe curl’s output to awk to isolate the data I want:
                            </p>
                            <pre>
curl -s http://twitter.com/users/show.xml?screen_name=pmbuko | \
awk '/^  &lt;created_at&gt;/{sub("&lt;/created_at&gt;","");print $2" "$3", "$6}'
</pre>
                            <p>
                                This outputs “May 20, 2008″ — great! Now let’s build a service with Automator that will allow us to right-click on any Twitter account name and have a dialog pop up with that account’s registration date.
                            </p>
                            <h2>
                                Step 2: Build a service with Automator
                            </h2>
                            <p>
                                Open up <strong><em>Automator.app</em><span style="font-weight:normal">, found in your Applications folder</span></strong>. You’ll be presented with some workflow template choices. Double-click the <strong><em>Service</em></strong> item.
                            </p>
                            <p>
                                <img title="SLS1" src="http://yourmacguy.files.wordpress.com/2009/09/sls1.png?w=600" alt="SLS1">
                            </p>
                            <p>
                                Note that the Service template has an input section already at the top.
                            </p>
                            <p>
                                <img title="SLS2" src="http://yourmacguy.files.wordpress.com/2009/09/sls2.png?w=518&amp;h=58" alt="SLS2" width="518" height="58">
                            </p>
                            <p>
                                Leave the options set to defaults. Now type “<strong><em>shell”</em></strong> into the search box in the upper left area of the window and then drag the <strong><em>Run Shell Script</em></strong> action into the workflow area.
                            </p>
                            <p>
                                <img title="SLS3" src="http://yourmacguy.files.wordpress.com/2009/09/sls3.png?w=600" alt="SLS3">
                            </p>
                            <p>
                                Leave the <strong><em>Shell</em></strong> option set to <strong><em>/bin/bash</em></strong>, but change the <strong><em>Pass input</em></strong> option to <strong><em>as arguments</em></strong>. Replace the placeholder data in the script area with the following:
                            </p>
                            <pre>
curl -s http://twitter.com/users/show.xml?screen_name=$1 | \
awk '/^  &lt;created_at&gt;/{sub("&lt;/created_at&gt;","");print $2" "$3", "$6}'
</pre>
                            <p>
                                Note that I used “<strong><em>$1</em></strong>” instead of an account name. In bash, the $1 variable in a script contains the first argument passed to the script. In this case, we’re passing whatever text we selected or right-clicked on to the script. Now we need a way to display the text on screen. AppleScript is perfect for this, so type “<strong><em>script</em></strong>” into the search box and then drag the <strong><em>Run AppleScript</em></strong> action to the bottom of the workflow area.
                            </p>
                            <p>
                                <img title="SLS4.1" src="http://yourmacguy.files.wordpress.com/2009/09/sls4-1.png?w=600" alt="SLS4.1">
                            </p>
                            <p>
                                Now, replace the contents of the script area with this:
                            </p>
                            <pre>
on run {regDate}
    tell application "Finder"
        activate
        display dialog "Twitter account registered on " &amp; regdate &amp; "." buttons{"OK"}
    end tell
end run
</pre>
                            <p>
                                The first line imports the info from the previous step to a variable named <strong><em>regDate</em></strong>. Then we’re telling the Finder to display a dialog with the text “Twitter account registered on [regDate].” Simple, right? Now click the hammer icon in the Applescript action to compile the script and check for errors. You’ll see the text change font and colors if all went well.
                            </p>
                            <p>
                                <img title="SLS5.1" src="http://yourmacguy.files.wordpress.com/2009/09/sls5-1.png?w=600" alt="SLS5.1">
                            </p>
                            <h2>
                                Step 3: Save and test the service
                            </h2>
                            <p>
                                You’re done building the service, so save it. I named mine <strong><em>Get Twit Age</em></strong>, but feel free to name yours however you want. Snow Leopard’s Automator will automatically save it in the correct location for use. In order to test this service, you need to be running a <a title="daringfireball" href="http://daringfireball.net/2009/09/itunes_and_cocoa">Cocoa application</a><sup><a title="daringfireball" href="http://daringfireball.net/2009/09/itunes_and_cocoa">1</a></sup> that has selectable text. Since we’re talking about Twitter, here, may I suggest Safari? Open the page of a Twitter user’s account (http://twitter.com/<em>username</em>) that you’d like to know the age of. Right-click on their account name and then select <strong><em>Get Twit Age</em></strong> (or whatever you called your service) near the bottom of the contextual menu. In a few moments, you should see a dialog box containing the account’s registration date.
                            </p>
                            <p>
                                <img title="SLS6.1" src="http://yourmacguy.files.wordpress.com/2009/09/sls6-1.png?w=436&amp;h=228" alt="SLS6.1" width="436" height="228">
                            </p>
                            <p>
                                And there you have it. If you happen to right-click on some text that doesn’t correspond to a twitter account, you won’t get an error but the dialog will simply display “Twitter account registered on .”
                            </p>
                            <p>
                                Hopefully, this tutorial gave you an idea of how easy it is to combine snippets of code to create a useful service. Now get out there and automate!
                            </p>
                            <hr>
                            1. John Gruber points out in his <a href="http://daringfireball.net/2009/09/itunes_and_cocoa">article about iTunes 9 and Cocoa</a> that while all apps can access system-wide services via the Services item in the Application menu, only Cocoa-based apps can access contextual services.<br>
                            <a rel="nofollow" href="http://feeds.wordpress.com/1.0/gocomments/yourmacguy.wordpress.com/406/"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/comments/yourmacguy.wordpress.com/406/"></a> <a rel="nofollow" href="http://feeds.wordpress.com/1.0/godelicious/yourmacguy.wordpress.com/406/"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/delicious/yourmacguy.wordpress.com/406/"></a> <a rel="nofollow" href="http://feeds.wordpress.com/1.0/gofacebook/yourmacguy.wordpress.com/406/"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/facebook/yourmacguy.wordpress.com/406/"></a> <a rel="nofollow" href="http://feeds.wordpress.com/1.0/gotwitter/yourmacguy.wordpress.com/406/"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/twitter/yourmacguy.wordpress.com/406/"></a> <a rel="nofollow" href="http://feeds.wordpress.com/1.0/gostumble/yourmacguy.wordpress.com/406/"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/stumble/yourmacguy.wordpress.com/406/"></a> <a rel="nofollow" href="http://feeds.wordpress.com/1.0/godigg/yourmacguy.wordpress.com/406/"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/digg/yourmacguy.wordpress.com/406/"></a> <a rel="nofollow" href="http://feeds.wordpress.com/1.0/goreddit/yourmacguy.wordpress.com/406/"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/reddit/yourmacguy.wordpress.com/406/"></a> <img alt="" border="0" src="http://stats.wordpress.com/b.gif?host=yourmacguy.wordpress.com&amp;blog=4297208&amp;post=406&amp;subd=yourmacguy&amp;ref=&amp;feed=1" width="1" height="1">
                        </blockquote>
                    </div>
                    <p class="bookmark-source">
                        Source: <a href="http://yourmacguy.wordpress.com/2009/09/12/twitter-reg-date-via-sl-services/">http://yourmacguy.wordpress.com/2009/09/12/twitter-reg-date-via-sl-services/</a>
                    </p>
                </div>
            </article>

            <nav id="post-nav">


            </nav>

            <script id="discus-javascript">
                var disqus_shortname = 'improbable';

                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
                    document.getElementsByTagName('body')[0].appendChild(dsq);
                })();
            </script>

            <a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            <div id="disqus_thread"></div>
        </section>

        <footer id="site-footer" class="nocontent">
            <p>
                This site is purely my personal work and does not reflect the views of my employer.
            </p>
            <p class="license">
                <a class="icon" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png"></a>
                This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
            </p>
        </footer>

        <script async src="/static/js/common.js"></script>
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/run_prettify.min.js" integrity="sha256-hj+5FRlAuvAFANiefn0PpJYCkV1X4QT9EgiPd+6QnCw=" crossorigin="anonymous"></script>
    </body>
</html>
