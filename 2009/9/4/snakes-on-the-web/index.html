<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>
            Snakes on the Web
        </title>
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <link rel="stylesheet" href="/static/css/main.min.css" type="text/css" media="all"><!--[if lte IE 8]>
            <link rel="stylesheet" href="/static/css/ie-fixes.css" type="text/css" media="all">
            <script src="/static/js/html5shiv.js"></script>
        <![endif]-->
        <meta http-equiv="last-modified" content="Fri, 04 Sep 2009 20:15:37 GMT">
        <link rel="alternate" type="application/atom+xml" title="All Posts (Atom)" href="/feeds/all.atom">
        <link rel="alternate" type="application/rss+xml" title="All Posts (RSS)" href="/feeds/all.rss">
        <link rel="icon" type="image/jpeg" sizes="287x287" href="/static/img/favicon-287x287.jpg">
        <link rel="icon" type="image/jpeg" sizes="128x128" href="/static/img/favicon-128x128.jpg">
        <script type="application/javascript">
var _prum={id:"5166be01e6e53d1007000001"};var PRUM_EPISODES=PRUM_EPISODES||{};PRUM_EPISODES.q=[];PRUM_EPISODES.mark=function(b,a){PRUM_EPISODES.q.push(["mark",b,a||new Date().getTime()])};PRUM_EPISODES.measure=function(b,a,b){PRUM_EPISODES.q.push(["measure",b,a,b||new Date().getTime()])};PRUM_EPISODES.done=function(a){PRUM_EPISODES.q.push(["done",a])};PRUM_EPISODES.mark("firstbyte");(function(){var b=document.getElementsByTagName("script")[0];var a=document.createElement("script");a.type="text/javascript";a.async=true;a.charset="UTF-8";a.src="//rum-static.pingdom.net/prum.min.js";b.parentNode.insertBefore(a,b)})();
        </script>
    </head>
    <body class="blog post_detail" itemscope itemtype="http://schema.org/BlogPosting">
        <nav id="site-nav">
            <header id="about">
                <h1>
                    <a href="/about/">Chris Adams</a>
                </h1>
                <h2>
                    Programmer, cyclist, photographer
                </h2>
            </header>
            <ul class="links">
                <li>
                    <a href="/">Home</a>
                </li>
                <li>
                    <a href="/about/">About</a>
                </li>
                <li>
                    <a href="/feeds/all.atom" title="Site Feed">Site Feed</a>
                </li>
            </ul>
            <ul class="social-networks">
                <li>
                    <a href="https://github.com/acdha" rel="me">Github</a>
                </li>
                <li>
                    <a href="http://bitbucket.org/acdha" rel="me">Bitbucket</a>
                </li>
                <li>
                    <a href="http://delicious.com/acdha" rel="me">del.icio.us</a>
                </li>
                <li>
                    <a href="http://twitter.com/acdha" rel="me">Twitter</a>
                </li>
                <li>
                    <a href="https://plus.google.com/116562742092842686896?rel=author" rel="me">Google+</a>
                </li>
                <li>
                    <a href="http://www.flickr.com/photos/acdha" rel="me">Flickr</a>
                </li>
                <li>
                    <a href="http://www.linkedin.com/in/acdha" rel="me">LinkedIn</a>
                </li>
                <li>
                    <a href="http://connect.garmin.com/explore?owner=acdha" rel="me">Garmin Connect</a>
                </li>
            </ul>
            <div id="site-search"></div>
        </nav>
        <section id="main">
            <article class="post">
                <header>
                    <meta itemprop="dateCreated" content="2009-09-04T16:15:37-04:00">
                    <meta itemprop="dateModified" content="2009-09-04T16:15:37-04:00"><time class="date" itemprop="datePublished" datetime="2009-09-04T20:15:37+00:00">Sep 04</time>
                    <h2 itemprop="title">
                        Snakes on the Web
                    </h2>
                </header>
                <div class="body" itemprop="articleBody">
                    <div class="googlereader description" data-google-id="tag:google.com,2005:reader/item/2e9e79f8d635f850">
                        <blockquote>
                            <p>
                                A talk given at PyCon Argentina and PyCon Brazil, 2009.
                            </p>
                            <p>
                                Web development sucks.
                            </p>
                            <p>
                                It's true: web development, at its worst, is difficult, repetitive, and boring. The tools we have suck. At best, they make web development slightly less painful, but we're a long way from making web development awesome.
                            </p>
                            <p>
                                The history of web development tools is a history of trying to solve this problem. It's a history of asking, "how can we make this suck less?" It's important to understand this history, because we can look at past trends and use them to predict the future.
                            </p>
                            <p>
                                That's exactly what I plan to do. I want to answer three questions:
                            </p>
                            <ul>
                                <li>What sucks, now, about web development?
                                </li>
                                <li>How will we fix it?
                                </li>
                                <li>Can we fix it with Python?
                                </li>
                            </ul>
                            <p>
                                To do so, I'll start with ancient<a href="http://www.jacobian.org/writing/#ancient"><sup>1</sup></a> history.
                            </p>
                            <div>
                                <h3>
                                    A brief, opinionated history of web development
                                </h3>
                                <p>
                                    In the beginning, <a href="http://en.wikipedia.org/wiki/Tim_Berners-Lee">TBL</a> invented the Web, and it was good.
                                </p>
                                <p>
                                    I like to think of this time as the "Stone Age" of web development, an age characterized by clumsy, difficult tools. We wrote HTML, by hand, usually in a <a href="http://en.wikipedia.org/wiki/Vi">text editor</a>. The concept of dynamic web pages didn't exist: if you wanted to publish a thousand stories online, you wrote a thousand <tt><span>.html</span></tt> documents.
                                </p>
                                <p>
                                    This sucked. Obviously.
                                </p>
                                <p>
                                    And it led to an obvious question: what if we could generate HTML programatically, like from a database or something?
                                </p>
                                <p>
                                    And thus was <a href="http://en.wikipedia.org/wiki/Common_Gateway_Interface">CGI</a> born, and the Bronze Age of the web began. We had tools, finally, to automate some of our repetitive tasks. We could handle user input! Connect web pages to databases! Flow content through templates!
                                </p>
                                <p>
                                    But CGI sucks. It's horribly slow, for one. Worse, it encourages incredibly bad development style. Either you have dozens (hundreds!) of <tt><span>.cgi</span></tt> programs, with all sorts of repetitive code... or you end up with a single, gigantic, monolithic <tt><span>go.cgi</span></tt>. CGI usually proves horrifically hard to maintain. The fact that most CGI of this era were written in Perl -- or, worse, C -- doesn't help.
                                </p>
                                <p>
                                    So, again, smart people started asking questions. At first, we asked, "how can we make CGI suck less?" Note that this isn't a very big question -- it's not really a rethinking of how web development should work -- but it still led to a leap forward: the first generation of application servers.
                                </p>
                                <p>
                                    I'm talking here about things like mod_perl, mod_python, and especially PHP. PHP, which is essentially "CGI done right," quickly become overwhelmingly dominant, and the Iron Age of the web began<a href="http://www.jacobian.org/writing/#php"><sup>2</sup></a>.
                                </p>
                                <p>
                                    Now, I mentioned before that the questions that led to PHP weren't very good questions, and so the leap forward wasn't all that dramatic. The Iron Age is very similar to the Bronze Age: the tools all look mostly the same, they just use slightly better tech. That is, PHP suffers from most of the same problems as CGI, but to a lesser extent.
                                </p>
                                <p>
                                    The biggest problem, at least to my mind, with the first few ages of web development is that the mindset is essentially page-oriented. All we did in these early years was trade <tt><span>page.html</span></tt> for <tt><span>page.cgi</span></tt> for <tt><span>page.php</span></tt>. We still represented web sites as a collection of pages, written in a string of improving languages.
                                </p>
                                <p>
                                    So the real revolution came when we started to question this basic assumption. "What if," we asked, "we could think of these things as <em>applications</em>, not pages?"
                                </p>
                                <p>
                                    This question led directly to the creation of Django, and to the Industrial Revolution: Web Frameworks.
                                </p>
                                <p>
                                    Now, technical revolutions happen organically. Take the printing press: though <a href="http://en.wikipedia.org/wiki/Johannes_Gutenberg">Gutenberg</a> is credited with its invention, in fact the press was simultaneously discovered by at least two other inventors<a href="http://www.jacobian.org/writing/#press"><sup>3</sup></a> in Europe around the same time. Indeed, it's actually inaccurate to credit <em>any</em> of these men with building the first press: press-printed material dating back to the 7th century has been found in China and Korea<a href="http://www.jacobian.org/writing/#eastasia"><sup>4</sup></a>.
                                </p>
                                <p>
                                    Like the printing press, then, frameworks existed long before the current crop (<a href="http://developer.apple.com/tools/webobjects/">WebObjects</a> is just one example). Like the Industrial Revolution, the Framework Revolution happened in many places, and in many different ways. I don't want for a minute to pretend that Django was the first framework -- or among the first -- nor was Django born in a vacuum. Django is, like the other frameworks of our time, a product of the age and of these questions about web development.
                                </p>
                            </div>
                            <div>
                                <h3>
                                    The Industrial Age: Web Frameworks
                                </h3>
                                <p>
                                    Now we find ourselves in the Industrial Age, the Age of the Framework. Since I'm talking about "frameworks" quite a bit, I think it's worth a bit of time to clarify what I mean. As I see it, the main characteristics of a modern web framework are:
                                </p>
                                <ul>
                                    <li>
                                        <p>
                                            They operate at a high conceptual level. Instead of thinking about HTTP, HTML, and web "pages", frameworks allow us to think and to operate at the level of web <em>application</em>. This means less code, and it also allows us to be much more ambitious about what we're building.
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            Frameworks provide much larger building blocks.
                                        </p>
                                        <p>
                                            I like to use a construction analogy: traditionally, most houses are <a href="http://en.wikipedia.org/wiki/Stick-built">stick-built</a>: you just nail together a whole bunch of lumber, one stick at a time, until the house finally appears. The raw materials are simple: wood, nails, glue, shingles, bricks. You've got all sorts of flexibility, but construction takes a long, long time.
                                        </p>
                                        <p>
                                            Today there's another option: <a href="http://en.wikipedia.org/wiki/Modular_home">factory-built homes</a>. Here, the house is built in huge sections in a factory, mostly automatically. Each room, pre-built, is loaded on a truck and the a crane puts the house together on-site. Architecture is more constrained -- you have to put the house together from the array of room options supported by the factory -- but you can literally be moving into the house 30 days after signing off on the final blueprints.
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            Frameworks encourage rapid development. It's no coincidence that the Age of the Framework is also the Age of <a href="http://en.wikipedia.org/wiki/Agile_software_development">Agile</a>. Agile, <a href="http://en.wikipedia.org/wiki/Extreme_programming">XP</a>, <a href="http://en.wikipedia.org/wiki/Scrum_(development)">Scrum</a>, etc. -- frameworks are at their best when used in a rapid-iteration style.
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            Good frameworks are open source. I don't think I need to justify this point to this particular crowd, so suffice to say that it's no accident that there aren't any proprietary frameworks with any real following to speak of<a href="http://www.jacobian.org/writing/#aspmvc"><sup>5</sup></a>.
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            Finally, good frameworks make development fun. Business folk like to think this is a silly requirement. It's not. The best thing about the web framework world is our sense of fun: fun motivates, leads to experimentation, and hence to innovation.
                                        </p>
                                    </li>
                                </ul>
                            </div>
                            <div>
                                <h3>
                                    What's next?
                                </h3>
                                <p>
                                    I've described where we are now... so what's next?
                                </p>
                                <p>
                                    The best way to predict the future of web development, I think, is to keep asking ourselves the question that led to all the past advances: what sucks, and how can we fix it?
                                </p>
                                <p>
                                    So: what sucks about web development?
                                </p>
                                <div>
                                    <h4>
                                        Inter-operability
                                    </h4>
                                    <p>
                                        Modern web frameworks suck at inter-op.
                                    </p>
                                    <p>
                                        Frameworks are good. But frameworks inevitably lead to lock-in. Lock-in is bad.
                                    </p>
                                    <p>
                                        It's important to realize that the most important kind of inter-operability is with the user's code, and frankly web frameworks often suck here. A basic truth of software is that as it grows and matures it becomes more and more domain-specific, and less and less generic. I'll talk more about this <a href="http://www.jacobian.org/writing/#scale">below</a>; the important part for now is to realize that general frameworks should be able to cede control to domain-specific replacements as the stack grows. For the most part, frameworks don't.
                                    </p>
                                    <p>
                                        Of course, most people think of inter-op in terms of inter-operability between multiple frameworks. Nobody's doing very well here, but unfortunately the Python web world's worse than average. There's a great deal of fragmentation in the Python web community, and frankly Django's not helping. That's a bug in the Django community, and there are similar bugs all over the Python web world. We need to fix these.
                                    </p>
                                    <p>
                                        <a href="http://www.wsgi.org/wsgi/">WSGI</a> <em>is</em> helping here; WSGI's the best thing ever to happen to Python web development. We can't rest on our laurels, however: WSGI's got some serious problems. They're off-topic here, so I'll simply point you to James Bennett's <a href="http://www.b-list.org/weblog/2009/aug/10/wsgi/">Let's talk about WSGI</a> and say, "ditto."
                                    </p>
                                    <p>
                                        I should also mention <a href="http://rack.rubyforge.org/">Rack</a>. Rack, in a nutshell, came about when the Ruby world, facing similar problems we'd faced in Pythonland, created a WSGI-inspired web gateway tool. It's been a resounding success: Rails 3 is being rewritten in Rack. Rack is frankly a bit better than WSGI; we Pythonistas should be embarrassed by that.
                                    </p>
                                    <p>
                                        The big problem, though -- the elephant in the room -- is that gateways suck, too. <strong>Gateways aren't APIs</strong>. There's a limit -- and it's a low one -- to the level of inter-op you can obtain when the only interface you have is a gateway. Even if we improve WSGI -- and we should -- it'll only take us so far.
                                    </p>
                                    <p>
                                        Even worse, tools like WSGI and Rack do nothing to help inter-language inter-operability. I'd really like to write parts of my application in Python, parts in <a href="http://clojure.org/">Clojure</a>, parts in Ruby, and even parts in Perl. Things like web proxies, <a href="http://en.wikipedia.org/wiki/Service-oriented_architecture">SOA</a>, <a href="http://en.wikipedia.org/wiki/Resource_oriented_architecture">ROA</a>, and language VMs help, here, but since <strong>gateways aren't APIs</strong> there's only so far we can go.
                                    </p>
                                    <p>
                                        This is going to be a hard problem to fix, even if we only focus on Python. We've got a bunch of disparate communities, all comprised of volunteers. Very few people have overlapping knowledge, few know how to navigate multiple community standards, and fewer still have the impetus to work on inter-op. Nearly nobody is thinking about multi-language inter-op.
                                    </p>
                                    <p>
                                        But this stuff is incredibly important. If Django fizzles, I'll be sad. But if Python fails as a web language I'll be devastated.
                                    </p>
                                </div>
                                <div>
                                    <h4>
                                        Rich web applications
                                    </h4>
                                    <p>
                                        I'm extremely excited about <a href="http://en.wikipedia.org/wiki/HTML_5">HTML 5</a>. In fact, I think it could be the best thing to ever happen to web frameworks. If web apps can truly replace desktop apps then frameworks are going to be the place to be, and Python could kick some serious ass here.
                                    </p>
                                    <p>
                                        Right now, though, the current crop of tools suck at creating rich applications. The current state-of-the-art is pitiful. The two approaches I've seen seem to be either building parallel <a href="http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller">MVC</a> layers on the client and the server and then mashing them together somehow, or else inventing a tightly coupled back-end-with-generated-front-end framework like <a href="http://code.google.com/webtoolkit/">GWT</a> or <a href="http://sproutcore.com/">SproutCore</a>. Neither approach makes me all that happy.
                                    </p>
                                    <p>
                                        For example, take a look at <a href="http://280slides.com/">280Slides</a>. It's an amazing piece of web tech -- the browser truly disappears; it's hard to tell that you're not in a native desktop app. It's amazing.
                                    </p>
                                    <p>
                                        However, the developers believed that 280Slides would be literally impossible to write using any of the current web tools. They not only built their own framework, <a href="http://cappuccino.org/">Cappuccino</a>; they actually invented a <em>new language</em>, Objective-J! If this is a trend, it's worrying.
                                    </p>
                                </div>
                                <div>
                                    <h4>
                                        Handling complexity (a.k.a. the deployment problem)
                                    </h4>
                                    <p>
                                        It's a well-recognized fact that web applications are getting more and more complex, and the list of things you need to successfully develop, deploy, and scale a web app is getting longer and longer.
                                    </p>
                                    <p>
                                        It turns out that writing the app is now the easy part; managing the <em>rest</em> of the stack you need for successful deployment can be nearly impossible. In other words, <a href="http://times.usefulinc.com/2008/06/16-ops-now">we're all ops people now</a>.
                                    </p>
                                    <p>
                                        Some time ago, Leonard Lin <a href="http://randomfoo.net/2009/01/28/infrastructure-for-modern-web-sites">collected this list</a> of all of this "other stuff" you need to worry about after developing your app:
                                    </p>
                                    <ul>
                                        <li>API Metering
                                        </li>
                                        <li>Backups &amp; Snapshots
                                        </li>
                                        <li>Counters
                                        </li>
                                        <li>
                                            <dl>
                                                <dt>
                                                    Cloud/Cluster Management Tools
                                                </dt>
                                                <dd>
                                                    <ul>
                                                        <li>Instrumentation/Monitoring (Ganglia, Nagios)
                                                        </li>
                                                        <li>Failover
                                                        </li>
                                                        <li>Node addition/removal and hashing
                                                        </li>
                                                        <li>Autoscaling for cloud resources
                                                        </li>
                                                    </ul>
                                                </dd>
                                            </dl>
                                        </li>
                                        <li>CSRF/XSS Protection
                                        </li>
                                        <li>Data Retention/Archival
                                        </li>
                                        <li>
                                            <dl>
                                                <dt>
                                                    Deployment Tools
                                                </dt>
                                                <dd>
                                                    <ul>
                                                        <li>Multiple Devs, Staging, Prod
                                                        </li>
                                                        <li>Data model upgrades
                                                        </li>
                                                        <li>Rolling deployments
                                                        </li>
                                                        <li>Multiple versions (selective beta)
                                                        </li>
                                                        <li>Bucket Testing
                                                        </li>
                                                        <li>Rollbacks
                                                        </li>
                                                        <li>CDN Management
                                                        </li>
                                                    </ul>
                                                </dd>
                                            </dl>
                                        </li>
                                        <li>Distributed File Storage
                                        </li>
                                        <li>Distributed Log storage, analysis
                                        </li>
                                        <li>Graphing
                                        </li>
                                        <li>HTTP Caching
                                        </li>
                                        <li>Input/Output Filtering
                                        </li>
                                        <li>Memory Caching
                                        </li>
                                        <li>Non-relational Key Stores
                                        </li>
                                        <li>Rate Limiting
                                        </li>
                                        <li>Relational Storage
                                        </li>
                                        <li>Queues
                                        </li>
                                        <li>Rate Limiting
                                        </li>
                                        <li>Real-time messaging (XMPP)
                                        </li>
                                        <li>
                                            <dl>
                                                <dt>
                                                    Search
                                                </dt>
                                                <dd>
                                                    <ul>
                                                        <li>Ranging
                                                        </li>
                                                        <li>Geo
                                                        </li>
                                                    </ul>
                                                </dd>
                                            </dl>
                                        </li>
                                        <li>Sharding
                                        </li>
                                        <li>
                                            <dl>
                                                <dt>
                                                    Smart Caching
                                                </dt>
                                                <dd>
                                                    <ul>
                                                        <li>dirty-table management
                                                        </li>
                                                    </ul>
                                                </dd>
                                            </dl>
                                        </li>
                                    </ul>
                                    <p>
                                        Yes, a modern web developer really needs to understand this stuff. Yikes.
                                    </p>
                                    <p>
                                        The good news is that there's open source software to fill all of these needs. The bad news is that they're all immature, disparate pieces with no connections to each other. Getting even half of this stuff up, running, and integrated is a monumental task.
                                    </p>
                                    <p>
                                        There's a huge opportunity here for Python. Python's historically been used as a "glue" language, though recently we've tried to de-emphasize that aspect. It's nothing to be ashamed of: Python's a <em>very good</em> glue language.
                                    </p>
                                    <p>
                                        Python could easily be the glue that keeps this huge stack from toppling over.
                                    </p>
                                </div>
                                <div>
                                    <h4>
                                        Scale
                                    </h4>
                                    <p>
                                        Internet usage is growing explosively. Worldwide it's doubled twice since 2000... and global penetration is only about 25%<a href="http://www.jacobian.org/writing/#netusage"><sup>6</sup></a>. This number's just going to keep going up.
                                    </p>
                                    <p>
                                        Meanwhile, web sites are getting a lot more complex. Think back to 2000 -- could you have even imagined a site like 280Slides then?
                                    </p>
                                    <p>
                                        Meanwhile, traffic is growing. The average user is spending more and more time on the web, and think about what's going to happen as the mobile web explodes.
                                    </p>
                                    <p>
                                        We're going to have to learn to deal with more and more and more traffic. And frameworks suck at scaling.
                                    </p>
                                    <p>
                                        Frameworks are very good at generic tasks. They're meant to be: they abstract away common difficulties. But as applications grow in scale, they need to get more and more domain specific to be able to deal with scale. There's a direct correlation between the size of the site and how specific it is.
                                    </p>
                                    <p>
                                        This usually breaks down as follows:
                                    </p>
                                    <ul>
                                        <li>You develop your first little toy app using Framework X. (In the Django world these seems to be a blogging app -- it seems like at least 75% of Django developers have built their own blog app.) This usually goes great.
                                        </li>
                                        <li>Happily successful, you develop a product with the framework, and launch it. This usually goes well, too -- sites at the initial-launch stage are still very similar to each other, and frameworks are great here..
                                        </li>
                                        <li>As your site grows, you start to feel a bit of pain, and need to replace some bits of the framework with domain specific bits. This usually isn't too bad: most frameworks, Django included, are modular enough that you can easily swap out the more common non-scalable bits.
                                        </li>
                                        <li>Then one day you become Twitter, and all hell breaks loose. You end up having to essentially ditch the framework and re-write everything, from scratch, in very very specific ways, just to deal with the crazy, mind-boggling amounts of traffic you've got.
                                        </li>
                                    </ul>
                                    <p>
                                        Frameworks work incredibly well to get you off the ground quickly... and then usually fail miserably when faced with the specific needs of big sites.
                                    </p>
                                    <p>
                                        This is an impossible situation for framework developers: by optimizing for a quick start, by focusing on common needs, we're essentially guaranteeing future failure. Remember the "Rails doesn't scale" pseudo-controversy last year? I guarantee it's only a matter of time until there's an angry "Django FAIL" moment.
                                    </p>
                                    <p>
                                        Frameworks ought to gracefully fade away as you replace them, bit by bit, with domain-specific code. (This is what I meant, above, that inter-op is also a scaling issue.) Right now, they don't.
                                    </p>
                                </div>
                                <div>
                                    <h4>
                                        Concurrency
                                    </h4>
                                    <p>
                                        Of course, if you're talking about scale, then you need to talk about concurrency. That's right, I'm gonna go there. I'm gonna talk about the <a href="http://docs.python.org/c-api/init.html#threads">GIL</a>. Don't worry, though, I won't dwell or complain.
                                    </p>
                                    <p>
                                        First let's look at some processors, shall we?
                                    </p>
                                    <p>
                                        Today, right now, you can buy a top-of-the-line <a href="http://en.wikipedia.org/wiki/Intel_Nehalem_(microarchitecture)">Intel Nehalem</a> for about $2,000. It's got 2 hardware threads per core, and it's available in an 8-core configuration. This means 16 hardware threads on a single slot, so you can easily build a box with 64 hardware threads (4 CPUs, 8 cores per CPU, 2 threads per core).
                                    </p>
                                    <p>
                                        Of course, if you want to get really serious you could buy something with Sun's <a href="http://en.wikipedia.org/wiki/UltraSPARC_T2">UltraSPARC T2</a> (a.k.a. Niagara). This chip has 8 cores, 8 threads per core, and you get two of 'em in a single box, so that's a whopping 128 hardware threads per machine. Yes, the future of this machine is in doubt<a href="http://www.jacobian.org/writing/#sunfail"><sup>7</sup></a>, but Sun's been on the leading edge of concurrency for quite some time. It's only a matter of time until Intel and AMD catch up.
                                    </p>
                                    <p>
                                        Obviously concurrency is going to be a Very Big Deal in the future. It already is.
                                    </p>
                                    <p>
                                        Much of my thinking about this comes to me from <a href="http://www.sauria.com/blog/">Ted Leung</a>. I look up to Ted, and I'm sad to tell you that Ted says we're screwed. I'm afraid that I'm starting to agree. To some extent the "shared-nothing" architecture of most web applications mean that we can just <tt><span>StartServers</span> <span>128</span></tt> to deal with 128 threads, but as applications grow you'll usually need to start throwing up "shared nothing."
                                    </p>
                                    <p>
                                        Most languages can really only saturate a single core, and if you can <a href="http://static.arstechnica.com/20090828/poor-cpu-utilization.png">only use a single core</a> you're in a lot of trouble.
                                    </p>
                                    <p>
                                        Now, there's lots of exciting work going on in the concurrency world today. Cool shit like <a href="http://en.wikipedia.org/wiki/Actor_model">Actors</a>, <a href="http://en.wikipedia.org/wiki/Software_transactional_memory">STM</a>, <a href="http://en.wikipedia.org/wiki/Persistent_data_structure">persistent data structures</a>, <a href="http://en.wikipedia.org/wiki/Dataflow">dataflow</a>, <a href="http://en.wikipedia.org/wiki/Tuple_spaces">tuple spaces</a>, and more. Ted's <a href="http://www.slideshare.net/twleung/a-survey-of-concurrency-constructs">A survey of concurrency constructs</a> is a great introduction to these terms if you've not heard 'em yet.
                                    </p>
                                    <p>
                                        Unfortunately, nearly all of this awesome work is going on in relatively obscure languages like <a href="http://www.scala-lang.org/">Scala</a>, <a href="http://erlang.org/">Erlang</a>, <a href="http://clojure.org/">Clojure</a>, or <a href="http://www.haskell.org/">Haskell</a>. There's almost no forward motion in the Python community. Yes, I know all about Twisted, Kamelia, Eventlet, etc.; these are all just twists on threading or IO-based concurrency; there's very little that's really new going on in Python.
                                    </p>
                                    <p>
                                        And though it's sometimes considered taboo to say it, we have to be honest: this is partially the GIL's fault. It's not clear to me weather the GIL would preclude, say, STM, but it almost doesn't matter: the existence of the GIL basically sends anyone interested in concurrency running for greener pastures.
                                    </p>
                                    <p>
                                        I have hopes for <a href="http://code.google.com/p/unladen-swallow/">Unladen Swallow</a>: the prospect of removing the GIL from Python is a promising first step. However, really all we get from that are better threads, and threads suck as a concurrency mechanism. I want my Actors, dammit!
                                    </p>
                                    <p>
                                        This is where us web guys really need your help. We operate at a higher level of abstraction so much of the time that we're simply not qualified to figure out how to make concurrency better in Python. At least, I'm not. I frankly barely understand threads after a decade of using 'em, and there's no <em>way</em> I'll be the one to implement STM in Python.
                                    </p>
                                    <p>
                                        Halp!
                                    </p>
                                </div>
                            </div>
                            <div>
                                <h3>
                                    In the year 2020
                                </h3>
                                <p>
                                    By way of conclusion, I want you think try to imagine web development circa 2020. That's no arbitrary year: it's also Last Call for HTML 5, so it makes sense to think about what the web's going to be like when HTML 5 is mature. When we're finally developing the types of apps we're just starting to dream of today.
                                </p>
                                <p>
                                    I'm not sure I'll be using Django in 2020. I hope I will, of course, but it may be that Django simply can't adapt in the next Age of web development.
                                </p>
                                <p>
                                    However, if I'm not still using Python in 2020 I'm going to be seriously pissed off.
                                </p>
                                <p>
                                    <a href="http://joelonsoftware.com/">Joel</a> tells us that <a href="http://www.joelonsoftware.com/articles/fog0000000017.html">good software takes ten years</a>, so I think we need to start right now. How can we work to make Python <em>the</em> language of choice for the developers of 2020?
                                </p>
                                <p>
                                    First, we need better inter-op. A better WSGI -- WSGI 2? -- will help, but we need more communication and more APIs that work between frameworks.
                                </p>
                                <p>
                                    The Django community needs to do a better job here, and I'm taking responsibility for that. Keep complaining to me about Django's lack of inter-op, and I'll keep working to fix it.
                                </p>
                                <p>
                                    But more than that we need real leaders here. Someone who can show us a way forward, and keep an eye on the bigger picture, not just focus on a single framework.
                                </p>
                                <p>
                                    A Python web-inter-op <a href="http://en.wikipedia.org/wiki/Benevolent_Dictator_For_Life">BDFL</a>, perhaps?
                                </p>
                                <p>
                                    We've got to get out in front of HTML 5. There's a huge opportunity for Python to be the backend language of choice for HTML 5 web applications. We need to start thinking about this now.
                                </p>
                                <p>
                                    We've already made a great transition from thinking about "web pages" to thinking about "web applications." It's time for a new transition, for us to start thinking about a holistic "web site," and all it's associated related tech. Again, there's a huge opportunity for Python: it could be what binds our stacks together and makes deployment pleasant again.
                                </p>
                                <p>
                                    I dream about a complete stack deployment framework, all tied together with Python, probably built around WSGI 2.
                                </p>
                                <p>
                                    We need to be thinking about scale from day one. This means being incredibly skeptical of our own work, and continually asking ourselves where it's going to fail. We need plan for the day that our framework will be phased out.
                                </p>
                                <p>
                                    And holy crap we need better concurrency.
                                </p>
                                <p>
                                    Thank you.
                                </p>
                                <table>
                                    <colgroup>
                                        <col>
                                        <col>
                                    </colgroup>
                                    <tbody valign="top">
                                        <tr>
                                            <td>
                                                <a href="http://www.jacobian.org/writing/#id1">[1]</a>
                                            </td>
                                            <td>
                                                Well, by web standards, at least.
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <table>
                                    <colgroup>
                                        <col>
                                        <col>
                                    </colgroup>
                                    <tbody valign="top">
                                        <tr>
                                            <td>
                                                <a href="http://www.jacobian.org/writing/#id5">[2]</a>
                                            </td>
                                            <td>
                                                Much of the web, unfortunately, hasn't progressed much beyond this point. PHP is still by leaps and bounds the most popular and widely-used web technology. The future may be here, but it's certainly not evenly distributed yet.
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <table>
                                    <colgroup>
                                        <col>
                                        <col>
                                    </colgroup>
                                    <tbody valign="top">
                                        <tr>
                                            <td>
                                                <a href="http://www.jacobian.org/writing/#id6">[3]</a>
                                            </td>
                                            <td>
                                                At least two others, Procopius Waldfoghel of France and Laurens Janszoon Coster of the Netherlands, may have been working on their own presses around the same time as Gutenberg, and those are only the ones we know about today.
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <table>
                                    <colgroup>
                                        <col>
                                        <col>
                                    </colgroup>
                                    <tbody valign="top">
                                        <tr>
                                            <td>
                                                <a href="http://www.jacobian.org/writing/#id7">[4]</a>
                                            </td>
                                            <td>
                                                Wooden movable type in China dates to the 10th century, and there's good evidance that both metal type printing presses were used in Korea as early as the 13th century. If you want to know more, Wikipedia's <a href="http://en.wikipedia.org/wiki/History_of_typography_in_East_Asia">History of typography in Easy Asia</a> is as good a place to start as any.
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <table>
                                    <colgroup>
                                        <col>
                                        <col>
                                    </colgroup>
                                    <tbody valign="top">
                                        <tr>
                                            <td>
                                                <a href="http://www.jacobian.org/writing/#id15">[5]</a>
                                            </td>
                                            <td>
                                                Except maybe for ASP MVC.NET. It's hard to know how popular Microsoft technologies are because there's no real community to speak of, and because Microsoft tends to lie about penetration.
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <table>
                                    <colgroup>
                                        <col>
                                        <col>
                                    </colgroup>
                                    <tbody valign="top">
                                        <tr>
                                            <td>
                                                <a href="http://www.jacobian.org/writing/#id31">[6]</a>
                                            </td>
                                            <td>
                                                See <a href="http://www.internetworldstats.com/stats.htm">http://www.internetworldstats.com/stats.htm</a>.
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <table>
                                    <colgroup>
                                        <col>
                                        <col>
                                    </colgroup>
                                    <tbody valign="top">
                                        <tr>
                                            <td>
                                                <a href="http://www.jacobian.org/writing/#id34">[7]</a>
                                            </td>
                                            <td>
                                                You have to wonder if Sun would have failed if we'd been able to write software that made us actually need this many cores...
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </blockquote>
                    </div>
                    <p class="bookmark-source">
                        Source: <a href="http://www.jacobian.org/writing/snakes-on-the-web/">http://www.jacobian.org/writing/snakes-on-the-web/</a>
                    </p>
                </div>
            </article>
            <nav id="post-nav"></nav><script id="discus-javascript">
    var disqus_shortname = 'improbable';

                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                    document.getElementsByTagName('body')[0].appendChild(dsq);
                })();
            </script><a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            <div id="disqus_thread"></div>
        </section>
        <footer id="site-footer" class="nocontent">
            <p>
                This site is purely my personal work and does not reflect the views of my employer.
            </p>
            <p class="license">
                <a class="icon" rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png"></a> This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
            </p>
        </footer><script async="" defer src="/static/js/common.js">
</script><script id="google-analytics">
    var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-2097834-1']);
            _gaq.push(['_setDomainName', 'improbable.org']);
            _gaq.push(['_trackPageview']);

            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
        </script>
    </body>
</html>
