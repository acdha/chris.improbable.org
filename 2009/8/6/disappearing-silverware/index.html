<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Disappearing Silverware</title>
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <link rel="stylesheet" href="/static/css/main.min.css" type="text/css" media="all">
        <!--[if lte IE 8]>
            <link rel="stylesheet" href="/static/css/ie-fixes.css" type="text/css" media="all">
            <script src="/static/js/html5shiv.js"></script>
        <![endif]-->

        <meta http-equiv="last-modified" content="Thu, 06 Aug 2009 11:13:51 GMT">
        <link rel="alternate" type="application/atom+xml" title="All Posts (Atom)" href="/feeds/all.atom">
        <link rel="alternate" type="application/rss+xml" title="All Posts (RSS)" href="/feeds/all.rss">
        <link rel="icon" type="image/jpeg" sizes="287x287" href="/static/img/favicon-287x287.jpg">
        <link rel="icon" type="image/jpeg" sizes="128x128" href="/static/img/favicon-128x128.jpg">
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-2097834-1', 'auto');
            ga('send', 'pageview');
        </script>
    </head>
    <body class="blog post_detail" itemscope itemtype="http://schema.org/BlogPosting">
        <nav id="site-nav">
            <header id="about">
                <h1><a href="/about/">Chris Adams</a></h1>
                <h2>Programmer, cyclist, photographer</h2>
            </header>
            <ul class="links">
                <li>
                    <a href="/">Home</a>
                </li>
                <li>
                    <a href="/about/">About</a>
                </li>
                <li>
                    <a href="/feeds/all.atom" title="Site Feed">Site Feed</a>
                </li>
            </ul>
            <ul class="social-networks">
                <li>
                    <a href="https://github.com/acdha" rel="me">Github</a>
                </li>
                <li>
                    <a href="https://bitbucket.org/acdha" rel="me">Bitbucket</a>
                </li>
                <li>
                    <a href="https://pinboard.in/u:acdha/" rel="me">Pinboard</a>
                </li>
                <li>
                    <a href="https://twitter.com/acdha" rel="me">Twitter</a>
                </li>
                <li>
                    <a href="https://www.flickr.com/photos/acdha" rel="me">Flickr</a>
                </li>
                <li>
                    <a href="https://www.linkedin.com/in/acdha" rel="me">LinkedIn</a>
                </li>
            </ul>
            <div id="site-search"></div>
        </nav>
        <section id="main">
            <article class="post">
                <header>
                    <meta itemprop="dateCreated" content="2009-08-06T07:13:51-04:00">
                    <meta itemprop="dateModified" content="2009-08-06T07:13:51-04:00">
                    <time class="date" itemprop="datePublished" datetime="2009-08-06T11:13:51+00:00">Aug 06</time>
                    <h2 class="" itemprop="title">Disappearing Silverware</h2>
                </header>

                <div class="body" itemprop="articleBody"><div class="googlereader description" data-google-id="tag:google.com,2005:reader/item/a5e7329fd10e85a9">
                        <blockquote>
                            <div>
                                <p>
                                    It looks like the <a href="http://www.w3.org/html/wg/tracker/issues/32">summary attribute issue</a> is finally well on its way to being closed.  Recent events: <a href="http://john.foliot.ca/talismans-active-listening-and-a-half-time-show/">John’s position</a>, <a href="http://lists.w3.org/Archives/Public/public-html/2009Aug/0241.html">Ian’s position</a>, <a href="http://lists.w3.org/Archives/Public/public-html/2009Aug/0276.html">Maciej’s mediation</a>, <a href="http://lists.w3.org/Archives/Public/public-html/2009Aug/0282.html">Ian’s acceptance</a>, <a href="http://lists.w3.org/Archives/Public/public-html/2009Aug/0286.html">John’s withdrawal of his draft</a>.
                                </p>
                                <p>
                                    One of the key take-away’s from all this is something Maciej said: <em>The most effective way, I believe, is to actively encourage a constructive alternative</em>.  In general, blocking the work of others is something I plan to discourage.  If that ends up making HTML5 more like <a href="http://en.wikipedia.org/wiki/There%27s_more_than_one_way_to_do_it">Perl</a> than Python, so be it.  After all, those that <a href="http://www.w3.org/TR/xhtml1/#a_dtd_XHTML-1.0-Strict">prefer rigid alternatives</a> still have that option.
                                </p>
                                <p>
                                    <a href="http://intertwingly.net/blog/2009/07/11/Vendor-Veto">Previously</a> I said that there may be as many as four drafts by the end of the last month.  Here we are in August, and we are still holding at one draft.  I firmly believe that enabling forks is the best way to prevent such.  The clearest explanation I have ever heard as to why that premise applies so well in the context of spec writing was made by Joe Gregorio: <a href="http://bitworking.org/news/Camera_Ready_Copy_and_the_Social_Denial_of_Service_Attack">Camera-Ready Copy and the Social Denial-of-Service Attack</a>.  My experience is that people tend to become reasonable (or at least throttle down the urge to be unreasonable) if you set the expectation that they need to make a concrete and constructive proposal.
                                </p>
                                <p>
                                    Accordingly, I plan to continue enabling such potential forks in the hopes that doing so will end up facilitating the amicable resolution of issues.  During the course of this discussion, I was able to assist a number of people with the preparation of their text for publishing, even though none actually got published.  The remainder of this post is about that process.
                                </p>
                                <h3>
                                    You, too, can be a Publisher
                                </h3>
                                <p>
                                    The W3C uses cvs.  The WHATWG, subversion.  Anolis uses mercurial.  Manu, git.  I happen to have each installed already, so none of this is a problem for me, but I can see how it is intimidating.
                                </p>
                                <p>
                                    I’ve looked at <a href="http://wiki.github.com/html5/spec">Manu’s build system</a>, and despite the pretty pictures, I have to say that I don’t quite grok the approach.  I’m familiar enough with the tools that I see how it all works mechanically: it is the overall approach that seems to me to be problematic.  The <a href="http://github.com/html5/spec/blob/187162b6dd55ffb78d0b7233bdca567ed4362ab8/README">README</a> tells you how to build Manu’s draft, but not how to create your own.  From what I can figure out, in order to create a new draft you need to create a <a href="http://github.com/html5/spec/blob/187162b6dd55ffb78d0b7233bdca567ed4362ab8/configs/html5-rdfa.conf">configuration file</a> listing all the sections you want (adding and removing as you see fit) and modify a <a href="http://github.com/html5/spec/blob/187162b6dd55ffb78d0b7233bdca567ed4362ab8/Makefile.in">make file</a>.  If you want to make a one line change to a section, you need to <a href="http://github.com/html5/spec/tree/187162b6dd55ffb78d0b7233bdca567ed4362ab8/microsections">snapshot that section</a>.
                                </p>
                                <p>
                                    What happens if Ian adds a section or modifies one of the sections you snapshotted?  Unless I’m missing something, you need to detect this yourself and merge.  I’m sure this can be automated above the level of the configuration management system, but isn’t that what the CM system itself is good for?
                                </p>
                                <p>
                                    I’m sure that <a href="http://lists.w3.org/Archives/Public/public-html/2009Aug/0165.html">Manu will solve these issues</a>, but for the moment, I’ve been taking a more direct route.
                                </p>
                                <p>
                                    Recently, a few members of the PF Working Group sent me an updated draft based on Maciej’s suggestions.  All they did was to take <a href="http://svn.whatwg.org/webapps/source">Ian’s latest source</a>, edit it using the editor of their choice, and send it to me.  That editor made a number of changes: specifically it added a BOM, a minimal html head section, wrapped the content in a body, closed the body and html tags at the end, and converted Unix style LF into DOS style CRLFs.  Sounds like a lot, but essentially the content in the middle was intact: neither a quote nor a slash was added in the process to sections that weren’t changed.
                                </p>
                                <p>
                                    My workflow was simple.  I manage the <a href="http://code.intertwingly.net/public/git/?p=webapps;a=summary">source in git</a>.  I manage the documents produced using the <a href="http://dev.w3.org/cvsweb/html5/">W3C’s cvs</a>.  And to produce the output from the source, I use the <a href="http://anolis.gsnedders.com/">Anolis</a> tool created by Geoffrey Snedders and a <a href="http://code.google.com/p/html5/source/browse/trunk/spec-splitter/spec-splitter.py">spec splitter</a> script originally developed by Philip Taylor.
                                </p>
                                <p>
                                    For the input, I created a branch named “summary_compromise”, and placed the file I received there, over top of the file named <code>source</code>.  The only thing I needed to be careful of was to first checkout the same version of the source that they had used has their base, that way the internal deltas will be correct.  I then used <a href="http://www.emacswiki.org/emacs/DosToUnix">dostounix</a> to get rid of the pesky CR’s, and <code>git add --patch</code> to identify which “hunks” to commit (I omitted the front matter and back matter, and accepted the rest).  Once I was done, I committed the result.
                                </p>
                                <p>
                                    I can even apply Ian’s subsequent changes via a <code>git rebase master</code>.  What happens if Ian adds a section?  Not a problem.  Or if Ian removes a section other than the one the PF group modified?  Not a problem.  What if Ian modifies different lines in the same section?  Again not a problem.  What if Ian modifies or removes a line that the PF group modified or removed?  Then and only then a merge would be required, but even there, git has tools to assist with this.  Fetching, rebasing or merging with a branch from Manu or anybody else would be equally as straightforward.
                                </p>
                                <p>
                                    As to the processing, what’s required is that you start with a <a href="http://github.com/html5/spec/blob/187162b6dd55ffb78d0b7233bdca567ed4362ab8/headers/header-w3c-html5">standard W3C header</a> (modifying the date), append the source and pass the result to Anolis with a few options.  I was only able to find the options and header in Manu’s repository, so I went with those.  To make things easier for me, I created a <a href="http://intertwingly.net/stories/2009/08/06/html5spec">small script</a> and <a href="http://intertwingly.net/stories/2009/08/06/html5spec.cfg">configuration file</a> which enables me to do all this with one command: all I need to specify is the name of the branch.  The script even calls <code>spec-splitter.py</code> on the result to split the large file into smaller sections.  Committing the output to CVS would have been sufficient to trigger publishing on the W3C web site, but as I said, in this case I never had to get to this point.  In fact, I never published my local commits to any public git repository.
                                </p>
                                <p>
                                    While I am glad to help out, longer term I have zero interest in becoming indispensable in this way or establishing and retaining a position in the critical path for publishing.  I will help anybody out there who is capable of finding the command line and installing Anolis on their machine through the rest.
                                </p>
                            </div>
                        </blockquote>
                    </div>
                    <p class="bookmark-source">
                        Source: <a href="http://intertwingly.net/blog/2009/08/06/Disappearing-Silverware">http://intertwingly.net/blog/2009/08/06/Disappearing-Silverware</a>
                    </p>
                </div>
            </article>

            <nav id="post-nav">


            </nav>

            <script id="discus-javascript">
                var disqus_shortname = 'improbable';

                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
                    document.getElementsByTagName('body')[0].appendChild(dsq);
                })();
            </script>

            <a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            <div id="disqus_thread"></div>
        </section>

        <footer id="site-footer" class="nocontent">
            <p>
                This site is purely my personal work and does not reflect the views of my employer.
            </p>
            <p class="license">
                <a class="icon" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png"></a>
                This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
            </p>
        </footer>

        <script async src="/static/js/common.js"></script>
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/run_prettify.min.js" integrity="sha256-hj+5FRlAuvAFANiefn0PpJYCkV1X4QT9EgiPd+6QnCw=" crossorigin="anonymous"></script>
    </body>
</html>
