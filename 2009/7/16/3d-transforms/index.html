<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>
            3D Transforms
        </title>
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <link rel="stylesheet" href="/static/css/main.min.css" type="text/css" media="all"><!--[if lte IE 8]>
            <link rel="stylesheet" href="/static/css/ie-fixes.css" type="text/css" media="all">
            <script src="/static/js/html5shiv.js"></script>
        <![endif]-->
        <meta http-equiv="last-modified" content="Thu, 16 Jul 2009 19:02:29 GMT">
        <link rel="alternate" type="application/atom+xml" title="All Posts (Atom)" href="/feeds/all.atom">
        <link rel="alternate" type="application/rss+xml" title="All Posts (RSS)" href="/feeds/all.rss">
        <link rel="icon" type="image/jpeg" sizes="287x287" href="/static/img/favicon-287x287.jpg">
        <link rel="icon" type="image/jpeg" sizes="128x128" href="/static/img/favicon-128x128.jpg">
        <script type="application/javascript">
var _prum={id:"5166be01e6e53d1007000001"};var PRUM_EPISODES=PRUM_EPISODES||{};PRUM_EPISODES.q=[];PRUM_EPISODES.mark=function(b,a){PRUM_EPISODES.q.push(["mark",b,a||new Date().getTime()])};PRUM_EPISODES.measure=function(b,a,b){PRUM_EPISODES.q.push(["measure",b,a,b||new Date().getTime()])};PRUM_EPISODES.done=function(a){PRUM_EPISODES.q.push(["done",a])};PRUM_EPISODES.mark("firstbyte");(function(){var b=document.getElementsByTagName("script")[0];var a=document.createElement("script");a.type="text/javascript";a.async=true;a.charset="UTF-8";a.src="//rum-static.pingdom.net/prum.min.js";b.parentNode.insertBefore(a,b)})();
        </script>
    </head>
    <body class="blog post_detail" itemscope itemtype="http://schema.org/BlogPosting">
        <nav id="site-nav">
            <header id="about">
                <h1>
                    <a href="/about/">Chris Adams</a>
                </h1>
                <h2>
                    Programmer, cyclist, photographer
                </h2>
            </header>
            <ul class="links">
                <li>
                    <a href="/">Home</a>
                </li>
                <li>
                    <a href="/about/">About</a>
                </li>
                <li>
                    <a href="/feeds/all.atom" title="Site Feed">Site Feed</a>
                </li>
            </ul>
            <ul class="social-networks">
                <li>
                    <a href="https://github.com/acdha" rel="me">Github</a>
                </li>
                <li>
                    <a href="http://bitbucket.org/acdha" rel="me">Bitbucket</a>
                </li>
                <li>
                    <a href="http://delicious.com/acdha" rel="me">del.icio.us</a>
                </li>
                <li>
                    <a href="http://twitter.com/acdha" rel="me">Twitter</a>
                </li>
                <li>
                    <a href="https://plus.google.com/116562742092842686896?rel=author" rel="me">Google+</a>
                </li>
                <li>
                    <a href="http://www.flickr.com/photos/acdha" rel="me">Flickr</a>
                </li>
                <li>
                    <a href="http://www.linkedin.com/in/acdha" rel="me">LinkedIn</a>
                </li>
                <li>
                    <a href="http://connect.garmin.com/explore?owner=acdha" rel="me">Garmin Connect</a>
                </li>
            </ul>
            <div id="site-search"></div>
        </nav>
        <section id="main">
            <article class="post">
                <header>
                    <meta itemprop="dateCreated" content="2009-07-16T15:02:29-04:00">
                    <meta itemprop="dateModified" content="2009-07-16T15:02:29-04:00"><time class="date" itemprop="datePublished" datetime="2009-07-16T19:02:29+00:00">Jul 16</time>
                    <h2 itemprop="title">
                        3D Transforms
                    </h2>
                </header>
                <div class="body" itemprop="articleBody">
                    <div class="googlereader description" data-google-id="tag:google.com,2005:reader/item/5f7213551c8bbda7">
                        <blockquote>
                            <p>
                                WebKit on Mac OS X now has support for <a href="http://www.w3.org/TR/css3-3d-transforms/" title="CSS 3D Transforms Module Level 3">CSS 3D transforms</a>, which allow you to position elements on the page in three-dimensional space using CSS. This is a natural extension of 2D transforms, which we described in an earlier <a href="http://webkit.org/blog/130/css-transforms/" title="Surfin’ Safari - Blog Archive » CSS Transforms">blog post</a>. 3D transforms have been supported on iPhone since 2.0, and now we’re please to announce that we have currently added support for Leopard and later.
                            </p>
                            <p>
                                If you want to jump right in and see a demo, make sure you’re running <a href="http://nightly.webkit.org/" title="WebKit Nightly Builds">recent WebKit nightly build</a> on Leopard or later, and load this example:
                            </p>
                            <p>
                                <a href="http://webkit.org/blog-files/3d-transforms/poster-circle.html">Poster Circle</a>
                            </p>
                            <p>
                                Here’s a screenshot for those not running a recent-enough WebKit (if you are, hover over it for a treat!):
                            </p>
                            <p>
                                Like many of the examples you’ll see here, this one combines CSS transforms with <a href="http://webkit.org/blog/138/css-animation/" title="Surfin’ Safari - Blog Archive » CSS Animation">CSS transitions and animations</a> to great effect.
                            </p>
                            <p>
                                3D transforms are applied via the same <code>-webkit-transform</code> property as 2D transforms. For example, here’s how to rotate an element about the Y (vertical) axis:
                            </p>
                            <pre>
-webkit-transform: rotateY(45deg);
</pre>
                            <p>
                                There are several new transform functions available for use in the <code>-webkit-transform</code> property:
                            </p>
                            <dl>
                                <dt>
                                    translate3d(x, y, z), translateZ(z)
                                </dt>
                                <dd>
                                    Move the element in x, y and z, and just move the element in z. Positive z is towards the viewer. Unlike x and y, the z value cannot be a percentage.
                                </dd>
                                <dt>
                                    scale3d(sx, sy, sz), scaleZ(sz)
                                </dt>
                                <dd>
                                    Scale the element in x, y and z. The z scale affects the scaling along the z axis in transformed children.
                                </dd>
                                <dt>
                                    rotateX(angle), rotateY(angle), rotate3d(x, y, z, angle),
                                </dt>
                                <dd>
                                    The first two forms simply rotate the element about the horizontal and vertical axes. Angle units can be degrees (deg) radians (rad) or gradians (grad). The last form allows you to rotate the element around an arbitrary vector in 3D space; x, y and z should specify the unit vector you wish to rotate around (we’ll normalize it for you).
                                </dd>
                                <dt>
                                    perspective(p)
                                </dt>
                                <dd>
                                    This function allows you to put some perspective into the transformation matrix. For an explanation of <em>p</em>, see below. Normally perspective is applied via the <code>-webkit-perspective</code> property, but this function allows you to get a perspective effect for a single element, with something like:
                                </dd>
                            </dl>
                            <pre>
-webkit-transform: perspective(500px) rotateY(20deg);
</pre>
                            <dl>
                                <dt>
                                    matrix3d(…)
                                </dt>
                                <dd>
                                    This function allows you to specify the raw 4×4 homogeneous transformation matrix of 16 values in column-major order. Have fun with that!
                                </dd>
                                <dd>
                                    <p>
                                        We’ve also extended one other CSS transform property, and implemented the four other 3D-related properties described in the spec:
                                    </p>
                                    <p>
                                        <strong><code>-webkit-transform-origin</code></strong> now accepts three values, allowing you to specify a z offset for the transform origin.
                                    </p>
                                    <p>
                                        <strong><code>-webkit-perspective</code></strong> is used to give an illusion of depth; it determines how things change size based on their z-offset from the z=0 plane. You can think of it as though you’re looking at the page from a distance <em>p</em> away. Objects on the z=0 plane appear in their normal size. Something at a z offset of <em>p</em>/2 (halfway between the viewer and the z=0 plane) will look twice as big, and something at a z offset of -<em>p</em> will look half as big. Thus, large values give a little foreshortening effect, and small values lots of foreshortening. Values between 500px and 1000px give a reasonable-looking result for most content.
                                    </p>
                                    <p>
                                        The default origin for the perspective effect is the center of the element’s border box, but you can control this with <strong><code>-webkit-perspective-origin</code></strong>.
                                    </p>
                                    <p>
                                        Here’s an example that shows how perspective works:
                                    </p>
                                    <p>
                                        <a href="http://webkit.org/blog-files/3d-transforms/perspective-by-example.html">Perspective</a>
                                    </p>
                                    <p>
                                        The interesting thing about <code>-webkit-perspective</code> is that it does not affect the element directly. Instead, it affects the appearance of the 3D transforms on the transformed <em>descendants</em> of that element; you can think of it as adding a transform that gets multiplied into the descendant transforms. This allows those descendants to all share the same perspective as they move around.
                                    </p>
                                    <p>
                                        We’ve described how you can assign 3D transforms to elements and make them look three-dimensional with some perspective. However, so far, all the effects are really just painting effects. Those transformed children are still rendering into the plane of their parent; in other words, they are <em>flattened</em>.
                                    </p>
                                    <p>
                                        When you start to build hierarchies of objects with 3D transforms, flattening is not what you want. You want parents and children to live in a shared three-dimensional space, and to all share the same perspective which propagates up from some container. This is where <code>-webkit-transform-style</code> comes in.
                                    </p>
                                    <p>
                                        <strong><code>-webkit-transform-style</code></strong> has two values:
                                    </p>
                                    <ul>
                                        <li>
                                            <code>flat</code>: This is the default value, and gives the behavior described above; transformed children are flattened into the plane of their parent (think of the 3D transform as simply a painting effect).
                                        </li>
                                        <li>
                                            <code>preserves-3d</code>: This value states that the element to which it is assigned does not flatten its children into it; instead, those children live in a shared 3D space with the element.
                                        </li>
                                    </ul>
                                    <p>
                                        Here’s an example that shows transform-style in action:
                                    </p>
                                    <p>
                                        <a href="http://webkit.org/blog-files/3d-transforms/transform-style.html">Transform Style</a>
                                    </p>
                                    <p>
                                        A common pattern, therefore, is to have content that looks like this:
                                    </p>
                                    <pre>
&lt;div class="container" style="-webkit-perspective: 600px"&gt;
  &lt;div class="box" style="-webkit-transform-style: preserve-3d; -webkit-transform: rotateY(10deg)"&gt;
    &lt;div class="leaf" style="-webkit-transform: rotateX(10deg)"&gt;&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</pre>
                                    <p>
                                        Here both ‘leaf’ and ‘box’ share the same 3D space, so both appear with the perspective specified on the container. ‘box’ can also be rotated with a transition or animation, and ‘leaf’ will move around as ‘box’ moves, in perspective.
                                    </p>
                                    <p>
                                        One thing you may have noticed in these demos is that it’s quite common to have a 3D transform that flips an element around so that you can see its reverse side. In some cases you don’t want the element to appear at all in this situation (say, for example, you want to position two elements back-to-back, so you need to hide the one that’s facing away from the viewer). This is the reason for the last 3d-related property, <strong><code>-webkit-backface-visibility</code></strong>. Its two values—<code>visible</code> (the default), and <code>hidden</code>—specify whether the element is visible or not when that element is transformed such that its back face is towards the viewer.
                                    </p>
                                    <p>
                                        Here’s a final example that shows backface-visibility in action, along with more 3D goodness, animations and transitions:
                                    </p>
                                    <p>
                                        <a href="http://webkit.org/blog-files/3d-transforms/morphing-cubes.html">Morphing Power Cubes</a>
                                    </p>
                                    <p>
                                        <img src="http://webkit.org/blog-files/3d-transforms/mighty-cubes.png" width="415" height="175" alt="Mighty Cubes">
                                    </p>
                                    <p>
                                        For more information, see the CSS working drafts on <a href="http://www.w3.org/TR/css3-2d-transforms/" title="CSS 2D Transforms Module Level 3">2D transforms</a>, <a href="http://www.w3.org/TR/css3-3d-transforms/" title="CSS 3D Transforms Module Level 3">3D transforms</a>, <a href="http://www.w3.org/TR/css3-transitions/" title="CSS Transitions Module Level 3">transitions</a> and <a href="http://www.w3.org/TR/css3-animations/" title="CSS Animations Module Level 3">animations</a>. There is also documentation in the <a href="http://developer.apple.com/safari/library/documentation/InternetWeb/Conceptual/SafariVisualEffectsProgGuide/Transforms/Transforms.html" title="Safari Visual Effects Guide: Transforms">Safari Reference Library</a>.
                                    </p>
                                    <p>
                                        We hope you have a blast with these new features, and share your creations with us. If you find bugs, please report them at <a href="http://bugs.webkit.org/">bugs.webkit.org</a>.
                                    </p>
                                </dd>
                            </dl>
                        </blockquote>
                    </div>
                    <p class="bookmark-source">
                        Source: <a href="http://webkit.org/blog/386/3d-transforms/">http://webkit.org/blog/386/3d-transforms/</a>
                    </p>
                </div>
            </article>
            <nav id="post-nav"></nav><script id="discus-javascript">
    var disqus_shortname = 'improbable';

                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                    document.getElementsByTagName('body')[0].appendChild(dsq);
                })();
            </script><a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            <div id="disqus_thread"></div>
        </section>
        <footer id="site-footer">
            <p>
                This site is purely my personal work and does not reflect the views of my employer.
            </p>
            <p class="license">
                <a class="icon" rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png"></a> This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
            </p>
        </footer><script async="" defer src="/static/js/common.js">
</script><script id="google-analytics">
    var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-2097834-1']);
            _gaq.push(['_setDomainName', 'improbable.org']);
            _gaq.push(['_trackPageview']);

            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
        </script>
    </body>
</html>
