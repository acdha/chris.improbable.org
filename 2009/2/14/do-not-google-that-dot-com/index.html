<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>
            Do Not Google That! (dot com)
        </title>
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <link rel="stylesheet" href="/static/css/main.min.css" type="text/css" media="all"><!--[if lte IE 8]>
            <link rel="stylesheet" href="/static/css/ie-fixes.css" type="text/css" media="all">
            <script src="/static/js/html5shiv.js"></script>
        <![endif]-->
        <meta http-equiv="last-modified" content="Sat, 14 Feb 2009 14:59:15 GMT">
        <link rel="alternate" type="application/atom+xml" title="All Posts (Atom)" href="/feeds/all.atom">
        <link rel="alternate" type="application/rss+xml" title="All Posts (RSS)" href="/feeds/all.rss">
        <link rel="icon" type="image/jpeg" sizes="287x287" href="/static/img/favicon-287x287.jpg">
        <link rel="icon" type="image/jpeg" sizes="128x128" href="/static/img/favicon-128x128.jpg">
        <script type="application/javascript">
var _prum={id:"5166be01e6e53d1007000001"};var PRUM_EPISODES=PRUM_EPISODES||{};PRUM_EPISODES.q=[];PRUM_EPISODES.mark=function(b,a){PRUM_EPISODES.q.push(["mark",b,a||new Date().getTime()])};PRUM_EPISODES.measure=function(b,a,b){PRUM_EPISODES.q.push(["measure",b,a,b||new Date().getTime()])};PRUM_EPISODES.done=function(a){PRUM_EPISODES.q.push(["done",a])};PRUM_EPISODES.mark("firstbyte");(function(){var b=document.getElementsByTagName("script")[0];var a=document.createElement("script");a.type="text/javascript";a.async=true;a.charset="UTF-8";a.src="//rum-static.pingdom.net/prum.min.js";b.parentNode.insertBefore(a,b)})();
        </script>
    </head>
    <body class="blog post_detail" itemscope itemtype="http://schema.org/BlogPosting">
        <nav id="site-nav">
            <header id="about">
                <h1>
                    <a href="/about/">Chris Adams</a>
                </h1>
                <h2>
                    Programmer, cyclist, photographer
                </h2>
            </header>
            <ul class="links">
                <li>
                    <a href="/">Home</a>
                </li>
                <li>
                    <a href="/about/">About</a>
                </li>
                <li>
                    <a href="/feeds/all.atom" title="Site Feed">Site Feed</a>
                </li>
            </ul>
            <ul class="social-networks">
                <li>
                    <a href="https://github.com/acdha" rel="me">Github</a>
                </li>
                <li>
                    <a href="http://bitbucket.org/acdha" rel="me">Bitbucket</a>
                </li>
                <li>
                    <a href="http://delicious.com/acdha" rel="me">del.icio.us</a>
                </li>
                <li>
                    <a href="http://twitter.com/acdha" rel="me">Twitter</a>
                </li>
                <li>
                    <a href="https://plus.google.com/116562742092842686896?rel=author" rel="me">Google+</a>
                </li>
                <li>
                    <a href="http://www.flickr.com/photos/acdha" rel="me">Flickr</a>
                </li>
                <li>
                    <a href="http://www.linkedin.com/in/acdha" rel="me">LinkedIn</a>
                </li>
                <li>
                    <a href="http://connect.garmin.com/explore?owner=acdha" rel="me">Garmin Connect</a>
                </li>
            </ul>
            <div id="site-search"></div>
        </nav>
        <section id="main">
            <article class="post">
                <header>
                    <meta itemprop="dateCreated" content="2009-02-14T09:59:15-04:00">
                    <meta itemprop="dateModified" content="2009-02-14T09:59:15-04:00"><time class="date" itemprop="datePublished" datetime="2009-02-14T13:59:15+00:00">Feb 14</time>
                    <h2 itemprop="title">
                        Do Not Google That! (dot com)
                    </h2>
                </header>
                <div class="body" itemprop="articleBody">
                    <div class="googlereader description" data-google-id="tag:google.com,2005:reader/item/1ac310147943309a">
                        <p class="annotation">
                            "even English is more internally consistent than PHP"
                        </p>
                        <blockquote>
                            <img src="http://www.egometry.com/i/icons//gruedorf.gif" width="24" height="24" alt="" title="Gruedorf"><br>
                            <h3>
                                The Premise
                            </h3>
                            <p>
                                Late at night a few days ago in <a href="http://imvu.com">imvu.com’s</a> secret lair, #engineering…
                            </p>
                            <pre style="width:510px;padding:20px;background-color:#efefef">
<b>&lt;Veep&gt;</b> from an article on an ultimate fighting controversy about a guy
       putting slippery stuff on to gain an unfair advantage:
<b>&lt;Veep&gt;</b> Oh, and a fair word of warning to those looking to do additional
       research: Do not Google "oily sweat wrestling men."
       Just don't do it. Some things can't be unseen.
<b>&lt;Grue&gt;</b> :D
<b>&lt;Grue&gt;</b> That which does not kill you will make you OH GOD.
<b>&lt;Veep&gt;</b> that would be a good webpage: "things you shouldn't search for on
       google", with http://www.google.com/search?q=  links
<b>&lt;Grue&gt;</b> hm, yeah.
<b>&lt;Grue&gt;</b> simple apps are simple.
<b>&lt;Grue&gt;</b> it's something that you need not even moderate the submission to.
<b>&lt;Veep&gt;</b> No match for "DONOTGOOGLETHAT.COM".
<b>&lt;Grue&gt;</b> This is a compelling application, veep.
<b>&lt;Veep&gt;</b> thanks.
<b>&lt;Grue&gt;</b> you calling dibs?
<b>&lt;Veep&gt;</b> no, my queue of unfinished projects is large. if you want it, you
       can have it.
</pre>
                            <h3>
                                The Addiction
                            </h3>
                            <p>
                                I have a problem with domain name purchasing. They’re all so pretty. Most of my domains are empty, so the idea of a fully operational site made within a few hours of coding was very appealing to me.
                            </p>
                            <p>
                                I haven’t had a simple project since I made my <a href="http://ipbeer.com">exceptionally puerile knockoff of ipchicken.com</a> (whose sole functionality is to display <span style="font-family:monospace">$_SERVER['REMOTE_ADDR']</span> and <span style="font-family:monospace">$_SERVER['HTTP_USER_AGENT']</span> to the user, and doa ip2latlon lookup to feed to gmaps. Oh: and a <s>gif</s> png of urine.). The idea of completing an “art project” website in less than half a day and throwing some ads on it to potentially make it so it can be cash-neutral for my lifetime as far as domain re-registration costs go is oddly, strangely, <i>irrationally</i> appealing to me. And this felt like that.
                            </p>
                            <p>
                                So I bought <a href="http://donotgooglethat.com/">donotgooglethat.com</a>.
                            </p>
                            <p>
                                And then I bought <a href="http://dontgooglethat.com/">dontgooglethat.com</a> and made donotgooglethat.com 301 redirect to this one. <i>Because I have a problem with buying domains</i>.
                            </p>
                            <h3>
                                The Implementation
                            </h3>
                            <p>
                                Who needs security or user auth on a site meant to provide terrible, sullied links to the underbelly of the googleverse?
                            </p>
                            <h4>
                                Style decisions
                            </h4>
                            <p>
                                I started out by ripping apart a copy of everyone’s favorite search page. After taking out a bunch of stuff (wow, they use tables!) I was left with a raw googlish-looking site. I replaced the topbar links with a few links to some of my sites, and added the minimalist google ads to the side, with a link to the real google on the right.
                            </p>
                            <p>
                                My goal is to be googlish but not confusable with the Real McCoy for legal reasons, so I opted not to go with any rainbow text or <a href="http://www.identifont.com/show?HF">the google Font</a> (Catull, for you typography nerds).
                            </p>
                            <p>
                                Even so, I’m wary of using the trademarked term. Worse comes to worse I’m out $14 for reg costs and have a cute story.
                            </p>
                            <p>
                                Finally I grabbed two icons from the <a href="http://www.famfamfam.com/archive/silk-icons-thats-your-lot/">Silk Icon Set</a> over at famfamfam. Even though I’m a <a href="http://www.verge-rpg.com/gallery/gallery.php?sully">competent sprite artist</a>, I was trying to get this done as quickly as possible.
                            </p>
                            <h4>
                                User Experience Decisions
                            </h4>
                            <p>
                                I wanted to keep it damned simple. So I opted for only showing the top ten “worst” searches that were upvoted, without an option for pagination. There are no “about” pages since the links go straight to google searches, so there’s no need for SEO’d urls or concern for “losing valuable index space” by not exposing all of the content. Who cares? Not this site!
                            </p>
                            <p>
                                Each of the top ten links can be voted up or down. On successful vote (or failure!) you’re notified above the dontGOOGLEthat header. You can add a new search by clicking on the yellow button after entering some (hopefully offensive) text into the search box, or just by searching (done via an async post onClick of the “No Don’t Search” button).
                            </p>
                            <p>
                                The search results go to an adsense’d google personal search result page, which I chose to keep unbranded. The rationale here was that I want this thing to basically net $7 a year, so the least annoying way to do that would be to tie any possible revenue into the only real thing it does: making searches. Even so, I’m not pleased with the results; <a href="http://twitter.com/benmcgraw/status/1205056882">Google Safesearch</a> seems to be on by default, and I couldn’t find anything (in the five minutes I scanned for it) in the customized search api to turn it off programatically or via a pref setting in adsense.
                            </p>
                            <p>
                                I decided to put a minimal amount of discouragement for vote-hammering by putting a session-based lock on votes in. However, anyone with half a brain and an ounce of desire can get around it. Really: I don’t care. Should I start caring, it wouldn’t be that hard to fix it or just disable voting…
                            </p>
                            <p>
                                To get a small amount of churn, the most recent search shows up at the bottom with a googlish <font color="red">New!</font> next to it, and the option to upvote it there.
                            </p>
                            <p>
                                Also to promote searching, I did the same very simple trick google did to up their revenue long ago: a
                            </p>
                            <pre>
document.getElementById('q').focus();
</pre>
                            <p>
                                on page load. This just puts the cursor straight into the search form, so when you load the page and type, the input goes straight there. Such a tiny trick, and it netted them millions and millions more dolars in revenue. <i>And</i> it improved the user experience.
                            </p>
                            <h4>
                                Codey Decisions
                            </h4>
                            <p>
                                MySQL Database: One table. Three fields: id, query, and votes. Trivial.
                            </p>
                            <p>
                                Two queries per page load: one to get the top ten votes, one to get the most recent post. The votes field has an index (normal), so both queries are optimally cheap.
                            </p>
                            <p>
                                One of two optional queries per page load: an insert of a new search term or an up/down vote. The insert actually is two queries: one to see if a search already exists, and if it doesn’t: do an insert (and if it does, and you haven’t already voted on it, upvote it!).
                            </p>
                            <p>
                                No templating. No javascript libraries. A few boilerplate functions (mainly query error reporting stuff I handrolled years ago that’s been very faithful and useful). A few lifted javascript functions (because who needs to include all of jQuery for a single XMLHttpRequest call?). A google analytics tracker just for the hell of it, because analytics are fun!
                            </p>
                            <p>
                                There is only the main index and the About page, and the about page has no preprocessing logic.
                            </p>
                            <p>
                                The index weighs in at 12kb, and 297 lines.
                            </p>
                            <p>
                                A few tests shows that the main index presently renders in 0.008s from a cold start and in 0.001s afterwards. I assume this 8x speedup is just Filesystem or OS or MySQL or Apache level caching, since I sure didn’t put any caching in myself.
                            </p>
                            <p>
                                The whole operation was 4 hours top to bottom, sans tweaks here and there for the past few days. This is roundtrip from registration, administrative stuff like editing my dns entries, apache conf files, setting up the database user, setting up an adsense and analytics account, and then implementation. The actual coding part was between 60 and 120 minutes, mostly debug stemming from sandbox/server inconsistencies. A lot of time was also wasted talking to <a href="http://sheisept.com">the girlfriend</a> on gtalk.
                            </p>
                            <p>
                                For contrast, this blog post has taken about 90 minutes in a text editor, and currently weighs 8kb. The line count is lower, but the lines are far longer; English is a less concise language than PHP… but even English is more internally consistent than PHP.
                            </p>
                            <h4>
                                And that’s it!
                            </h4>
                            <p>
                                I’d like to see if it gets some use, but I’m not exactly sure who to expose it to to see if anyone cares. I thought about posting it to 4chan, but I don’t think it’s got enough shock value for that, especially since it defaults to safesearch.
                            </p>
                            <p>
                                Even if it rots in obscurity, though, it’s a tiny completed work, so I’m all good by it.
                            </p>
                            <p>
                                If anyone has any comments or suggestions: please leave them!
                            </p>
                        </blockquote>
                    </div>
                    <p class="bookmark-source">
                        Source: <a href="http://www.egometry.com/gruedorf/do-not-google-that-dot-com/">http://www.egometry.com/gruedorf/do-not-google-that-dot-com/</a>
                    </p>
                </div>
            </article>
            <nav id="post-nav"></nav><script id="discus-javascript">
    var disqus_shortname = 'improbable';

                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                    document.getElementsByTagName('body')[0].appendChild(dsq);
                })();
            </script><a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            <div id="disqus_thread"></div>
        </section>
        <footer id="site-footer" class="nocontent">
            <p>
                This site is purely my personal work and does not reflect the views of my employer.
            </p>
            <p class="license">
                <a class="icon" rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png"></a> This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
            </p>
        </footer><script async="" defer src="/static/js/common.js">
</script><script id="google-analytics">
    var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-2097834-1']);
            _gaq.push(['_setDomainName', 'improbable.org']);
            _gaq.push(['_trackPageview']);

            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
        </script>
    </body>
</html>
