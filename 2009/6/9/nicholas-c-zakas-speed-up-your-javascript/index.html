<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Nicholas C. Zakas: Speed Up Your JavaScript</title>
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <link rel="stylesheet" href="/static/css/main.min.css" type="text/css" media="all">
        <!--[if lte IE 8]>
            <link
                rel="stylesheet"
                href="/static/css/ie-fixes.css"
                type="text/css"
                media="all"
            />
            <script src="/static/js/html5shiv.js"></script>
        <![endif]-->

        <meta http-equiv="last-modified" content="Mon, 27 Jul 2009 22:57:03 GMT">
        <link rel="alternate" type="application/atom+xml" title="All Posts (Atom)" href="/feeds/all.atom">
        <link rel="alternate" type="application/rss+xml" title="All Posts (RSS)" href="/feeds/all.rss">
        <link rel="icon" type="image/jpeg" sizes="287x287" href="/static/img/favicon-287x287.jpg">
        <link rel="icon" type="image/jpeg" sizes="128x128" href="/static/img/favicon-128x128.jpg">
    </head>
    <body class="blog post_detail" itemscope itemtype="http://schema.org/BlogPosting">
        <nav id="site-nav">
            <header id="about">
                <h1><a href="/about/">Chris Adams</a></h1>
                <h2>Programmer, cyclist, photographer</h2>
            </header>
            <ul class="links">
                <li>
                    <a href="/">Home</a>
                </li>
                <li>
                    <a href="/about/">About</a>
                </li>
                <li>
                    <a href="/feeds/all.atom" title="Site Feed">Site Feed</a>
                </li>
            </ul>
            <ul class="social-networks">
                <li>
                    <a rel="me" href="https://code4lib.social/@acdha">Mastodon</a>
                </li>
                <li>
                    <a href="https://github.com/acdha" rel="me">Github</a>
                </li>
                <li>
                    <a href="https://bitbucket.org/acdha" rel="me">Bitbucket</a>
                </li>
                <li>
                    <a href="https://pinboard.in/u:acdha/" rel="me">Pinboard</a>
                </li>
                <li>
                    <a href="https://www.flickr.com/photos/acdha" rel="me">Flickr</a>
                </li>
                <li>
                    <a href="https://www.linkedin.com/in/acdha" rel="me">LinkedIn</a>
                </li>
            </ul>
            <div id="site-search"></div>
        </nav>
        <section id="main">
            <article class="post">
                <header>
                    <meta itemprop="dateCreated" content="2009-06-09T18:14:00-04:00">
                    <meta itemprop="dateModified" content="2009-06-09T18:14:00-04:00">
                    <time class="date" itemprop="datePublished" datetime="2009-06-09T22:14:00+00:00">Jun 09</time>
                    <h2 class="" itemprop="title">Nicholas C. Zakas: Speed Up Your JavaScript</h2>
                </header>

                <div class="body" itemprop="articleBody"><div class="googlereader description" data-google-id="tag:google.com,2005:reader/item/f91156da31ad0454">
                        <blockquote>
                            Nicholas C. Zakas delivers the seventh <a title="Web Exponents" href="http://google-code-updates.blogspot.com/2009/05/web-e-x-ponents.html">Web E<sup>x</sup>ponents</a> tech talk at Google. Nicholas is a JavaScript guru and <a href="http://www.amazon.com/exec/obidos/search-handle-url/ref=ntt_athr_dp_sr_1?_encoding=UTF8&amp;search-type=ss&amp;index=books&amp;field-author=Nicholas%20C.%20Zakas">author</a> working at Yahoo!. Most recently we worked together on my next book, <a href="http://www.amazon.com/Even-Faster-Web-Sites-Performance/dp/0596522304">Even Faster Web Sites</a>. Nicholas contributed the chapter on Writing Efficient JavaScript, containing much of the sage advice found in this talk. Check out his <a href="http://www.slideshare.net/nzakas/speed-up-your-javascript">slides</a> and watch the <a href="http://www.youtube.com/watch?v=mHtdZgou0qU&amp;feature=PlayList&amp;p=689D6EE903ED5CB6&amp;index=5">video</a>.<br>
                            <br>
                            <iframe allowfullscreen="" src="http://www.youtube.com/embed/mHtdZgou0qU%26hl%3Den%26fs%3D1%26" width="425" height="344"></iframe><br>
                            <br>
                            Nicholas starts by asserting that users have a greater expectation that sites will be fast. Web developers need to do most of the heavy lifting to meet these expectations. Much of the slowness in today's web sites comes from JavaScript. In this talk, Nicholas gives advice in four main areas: scope management, data access, loops, and DOM.<br>
                            <br>
                            <span style="font-weight:bold">Scope Management</span>: When a symbol is accessed, the JavaScript engine has to walk the scope chain to find that symbol. The scope chain starts with local variables, and ends with global variables. Using more local variables and fewer global variables results in better performance. One way to move in this direction is to store a global as a local variable when it's referenced multiple times within a function. Avoiding <span style="font-family:courier new">with</span> also helps, because that adds more layers to the scope chain. And make sure to use <span style="font-family:courier new">var</span> when declaring local variables, otherwise they'll end up in the global space which means longer access times.<br>
                            <br>
                            <span style="font-weight:bold">Data Access:</span> In JavaScript, data is accessed four ways: as literals, variables, object properties, and array items. Literals and variables are the fastest to access, although the relative performance can vary across browsers. Similar to global variables, performance can be improved by creating local variables to hold object properties and array items that are referenced multiple times. Also, keep in mind that deeper object property and array item lookup (e.g., obj.name1.name2.name3) is slower.<br>
                            <br>
                            <span style="font-weight:bold">Loops:</span> Nicholas points out that for-in and for each loops should generally be avoided. Although they provide convenience, they perform poorly. The choices when it comes to loops are for, do-while, and while. All three perform about the same. The key to loops is optimizing what is performed at each iteration in the loop, and the number of iterations, especially paying attention to the previous two performance recommendations. The classic example here is storing an array's length as a local variable, as opposed to querying the array's <span style="font-family:courier new">length</span> property on each iteration through a loop.<br>
                            <br>
                            <span style="font-weight:bold">DOM:</span> One of the primary areas for optimizing your web application's interaction with the DOM is how you handle HTMLCollection objects: document.images, document.forms, etc., as well as the results of calling getElementsByTagName() and getElementsByClassName(). As noted in the <a href="http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-75708506">HTML spec</a>, HTMLCollections "are assumed to be <span style="font-style:italic">live</span> meaning that they are automatically updated when the underlying document is changed." Any idea how long this code takes to execute?<br>
                            <pre style="margin:0pt;padding:0pt">
<br>   var divs = document.getElementsByTagName("div");<br>   for (var i=0; i &lt; divs.length; i++) {<br>       var div = document.createElement("div");<br>       document.body.appendChild(div);<br>   }<br>
</pre><br>
                            This code results in an infinite loop! Each time a div is appended to the document, the <span style="font-family:courier new">divs</span> array is updated, incrementing the length so that the termination condition is never reached. It's best to think of HTMLCollections as live queries instead of arrays. Minimizing the number of times you access HTMLCollection properties (hint: copy length to a local variable) is a win. It can also be faster to copy the HTMLCollection into a regular array when the contents are accessed frequently (see the slides for a code sample).<br>
                            <br>
                            Another area for improving DOM performance is <span style="font-style:italic">reflow</span> - when the browser computes the page's layout. This happens more frequently than you might think, especially for web applications with heavy use of DHTML. If you have code that makes significant layout changes, consider making the changes within a <a href="http://www.w3.org/TR/2002/WD-DOM-Level-3-Core-20020409/core.html#ID-B63ED1A3">DocumentFragment</a> or setting the <span style="font-family:courier new">className</span> property to alter styles.<br>
                            <br>
                            There is hope for a faster web as browsers come equipped with JIT compilers and native code generation. But the legacy of previous, slower browsers will be with us for quite a while longer. So hang in there. With evangelists like Nicholas in the lead, it's still possible to find your way to a fast, efficient web page.<br>
                            <br>
                            <span style="font-style:italic">By Steve Souders, Performance Evangelist<br>
                            <br></span><br>
                            Check out other blog posts and <a href="http://www.youtube.com/view_play_list?p=689D6EE903ED5CB6">videos</a> in the Web Exponents speaker series:<br>
                            <ul>
                                <li>
                                    <a href="http://google-code-updates.blogspot.com/2009/02/john-resig-drop-in-javascript.html">John Resig: Drop-in JavaScript Performance</a>
                                </li>
                                <li>
                                    <a href="http://google-code-updates.blogspot.com/2009/03/doug-crockford-javascript-good-parts.html">Doug Crockford: JavaScript: The Good Parts</a>
                                </li>
                                <li>
                                    <a href="http://google-code-updates.blogspot.com/2009/03/steve-souders-lifes-too-short-write.html">Steve Souders: Life's Too Short, Write Fast Code (part 2)</a><br>
                                </li>
                                <li>
                                    <a href="http://google-code-updates.blogspot.com/2009/04/ppk-open-web-goes-mobile.html">PPK: The Open Web Goes Mobile</a>
                                </li>
                                <li>
                                    <a href="http://google-code-updates.blogspot.com/2009/05/rob-campbell-debugging-and-testing-web.html">Rob Campbell: Debugging and Testing the Web with Firebug</a><br>
                                </li>
                            </ul>
                            <div>
                                <img width="1" height="1" src="https://blogger.googleusercontent.com/tracker/11300808-1153502281837697220?l=googlecode.blogspot.com">
                            </div>
                            <div>
                                <a href="http://feeds.feedburner.com/~ff/blogspot/Dcni?a=znnlo47L5vY:pQ1_y-K7DpE:yIl2AUoC8zA"><img src="http://feeds.feedburner.com/~ff/blogspot/Dcni?d=yIl2AUoC8zA" border="0"></a> <a href="http://feeds.feedburner.com/~ff/blogspot/Dcni?a=znnlo47L5vY:pQ1_y-K7DpE:V_sGLiPBpWU"><img src="http://feeds.feedburner.com/~ff/blogspot/Dcni?i=znnlo47L5vY:pQ1_y-K7DpE:V_sGLiPBpWU" border="0"></a>
                            </div>
                        </blockquote>
                    </div>
                    <p class="bookmark-source">
                        Source: <a href="http://googlecode.blogspot.com/2009/06/nicholas-c-zakas-speed-up-your.html?utm_source=feedburner&amp;utm_medium=feed&amp;utm_campaign=Feed%3A+blogspot%2FDcni+%28Google+Code+Blog%29">http://googlecode.blogspot.com/2009/06/nicholas-c-zakas-speed-up-your.html?utm_source=feedburner&amp;utm_medium=feed&amp;utm_campaign=Feed%3A+blogspot%2FDcni+%28Google+Code+Blog%29</a>
                    </p>
                </div>
            </article>

            <nav id="post-nav">


            </nav>
        </section>

        <footer id="site-footer" class="nocontent">
            <p>
                This site is purely my personal work and does not reflect the
                views of my employer.
            </p>
            <p class="license">
                <a class="icon" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width: 0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png"></a>
                This work is licensed under a
                <a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported
                    License</a>.
            </p>
        </footer>

        <script async src="/static/js/common.js"></script>
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/run_prettify.min.js" integrity="sha256-hj+5FRlAuvAFANiefn0PpJYCkV1X4QT9EgiPd+6QnCw=" crossorigin="anonymous"></script>
    </body>
</html>
