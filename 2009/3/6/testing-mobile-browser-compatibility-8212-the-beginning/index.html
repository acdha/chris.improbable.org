<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Testing mobile browser compatibility &amp;#8212; the beginning</title>
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <link rel="stylesheet" href="/static/css/main.min.css" type="text/css" media="all">
        <!--[if lte IE 8]>
            <link
                rel="stylesheet"
                href="/static/css/ie-fixes.css"
                type="text/css"
                media="all"
            />
            <script src="/static/js/html5shiv.js"></script>
        <![endif]-->

        <meta http-equiv="last-modified" content="Thu, 26 Mar 2009 11:49:11 GMT">
        <link rel="alternate" type="application/atom+xml" title="All Posts (Atom)" href="/feeds/all.atom">
        <link rel="alternate" type="application/rss+xml" title="All Posts (RSS)" href="/feeds/all.rss">
        <link rel="icon" type="image/jpeg" sizes="287x287" href="/static/img/favicon-287x287.jpg">
        <link rel="icon" type="image/jpeg" sizes="128x128" href="/static/img/favicon-128x128.jpg">
    </head>
    <body class="blog post_detail" itemscope itemtype="http://schema.org/BlogPosting">
        <nav id="site-nav">
            <header id="about">
                <h1><a href="/about/">Chris Adams</a></h1>
                <h2>Programmer, cyclist, photographer</h2>
            </header>
            <ul class="links">
                <li>
                    <a href="/">Home</a>
                </li>
                <li>
                    <a href="/about/">About</a>
                </li>
                <li>
                    <a href="/feeds/all.atom" title="Site Feed">Site Feed</a>
                </li>
            </ul>
            <ul class="social-networks">
                <li>
                    <a rel="me" href="https://code4lib.social/@acdha">Mastodon</a>
                </li>
                <li>
                    <a href="https://github.com/acdha" rel="me">Github</a>
                </li>
                <li>
                    <a href="https://bitbucket.org/acdha" rel="me">Bitbucket</a>
                </li>
                <li>
                    <a href="https://pinboard.in/u:acdha/" rel="me">Pinboard</a>
                </li>
                <li>
                    <a href="https://www.flickr.com/photos/acdha" rel="me">Flickr</a>
                </li>
                <li>
                    <a href="https://www.linkedin.com/in/acdha" rel="me">LinkedIn</a>
                </li>
            </ul>
            <div id="site-search"></div>
        </nav>
        <section id="main">
            <article class="post">
                <header>
                    <meta itemprop="dateCreated" content="2009-03-06T10:50:25-04:00">
                    <meta itemprop="dateModified" content="2009-03-06T10:50:25-04:00">
                    <time class="date" itemprop="datePublished" datetime="2009-03-06T14:50:25+00:00">Mar 06</time>
                    <h2 class="" itemprop="title">Testing mobile browser compatibility &amp;#8212; the beginning</h2>
                </header>

                <div class="body" itemprop="articleBody"><div class="googlereader description" data-google-id="tag:google.com,2005:reader/item/b22771040c835d22">
                        <blockquote>
                            <p>
                                About a month ago the software department of Vodafone Internet Services, based in Düsseldorf, Germany, asked for my help in creating mobile widgets according to the <a href="http://www.w3.org/TR/widgets-apis/">W3C Widgets</a> specification. In particular, they’d noticed there are differences between browsers even on mobile phones (imagine my surprise), and decided they needed advice from a specialist (that would be me).
                            </p>
                            <p>
                                Better still, it quickly turned out that they were <em>willing to pay me</em> for doing serious mobile browser compatibility tests <em>and</em> publishing them on this site. The payment thingy is quite unusual, I can tell you (though not entirely unique).
                            </p>
                            <p>
                                This is easily the best job offer I’ve gotten in my entire freelance career, so I hurried to accept it. Meanwhile I’ve done mobile tests for five days; enough to offer some guidance for setting up a doctrine for mobile browser testing.
                            </p>
                            <p>
                                As far as I’m concerned you can <a href="http://www.quirksmode.org/m">look over my shoulder</a> while I’m working, but please PLEASE remember that everything I say may change radically without notice after I’ve tested the same browsers on other devices.
                            </p>
                            <p>
                                Right now I’ve only done a few tests of functionality that’s basic to the mobile experience, and even these basic tests will likely have to be expanded. Besides, right now getting a general feeling for mobile testing and its manifold problems is more important than running lots and lots of tests.
                            </p>
                            <p>
                                If you’re interested in helping me you can <a href="http://twitter.com/ppk">follow me on Twitter</a>, which is shaping up to be a fantasically valuable aid.
                            </p>
                            <p>
                                I report oddities and bugs within minutes of finding them, and I’ve received quite a bit of useful feedback already. In fact, it’s likely that these tests won’t ever succeed without cloudsourcing some of the more complex problems.
                            </p>
                            <p>
                                (Please remember I do most of my tests during European office hours.)
                            </p>
                            <h3>
                                Sheer numbers
                            </h3>
                            <p>
                                The first and most obvious problem in mobile browser testing is the sheer numbers. The Vodafone master list of devices that <em>must</em> support their widgets contains 43 phone types, and those are only the modern ones that have a reasonable chance of containing a modern browser.
                            </p>
                            <p>
                                For the moment I’m considering every single browser on every single device unique; so if I test five Nokia phones that all have WebKit, I’m testing five different WebKit versions and the resulting compatibility tables will show five entries.
                            </p>
                            <p>
                                Sure, I assume that these five WebKits will resemble each other, and I expect to be able to eventually merge these five entries into one. I’m not going to hurry that process, though; one of the points of this research is to find out if there are differences between these five devices. There could be, and if there are Vodafone and I (and, in fact, the world at large) have to know about them.
                            </p>
                            <p>
                                Fortunately, the Vodafone team has <a href="http://flickr.com/photos/29179942@N03/3311476048/" title="Blurry photo, but you'll see what I mean. This is half their collection.">quite a few phones</a>, and although it’s absolutely impossible to test everything on every phone, it does allow me the chance to validate my conclusions time and again.
                            </p>
                            <h3>
                                The browsers
                            </h3>
                            <p>
                                How many browsers are there in the mobile space? Right now I think the correct answer is five, but I may be wrong. They are:
                            </p>
                            <ul>
                                <li>Opera, in the flavours <a href="http://www.opera.com/mobile/">Mobile</a> and <a href="http://www.opera.com/mini/">Mini</a>.
                                </li>
                                <li>WebKit, in more flavours than you can imagine.
                                </li>
                                <li>
                                    <a href="http://www.access-company.com/products/mobile_solutions/netfrontmobile/browser/index.html">NetFront</a>, which is supposed to be very popular in Asia. Right now I assume it comes in flavours, but there’s so little information about this browser that I just don’t know.
                                </li>
                                <li>IE Mobile. The current default is based on IE4. Version 6 will be released pretty soon, and it is based on the IE6 rendering engine. I assume it comes in flavours.
                                </li>
                                <li>the Blackberry browser, although I heard rumours Blackberry is going to switch to WebKit. It don’t think it comes in flavours, as there’s only one Blackberry vendor, but I assume it has versions instead.
                                </li>
                            </ul>
                            <p>
                                There’s also Fennec of the Mozilla Project, but as far as I know it’s in early alpha, and I was even unable to find a formal homepage for it. It’s not yet the default browser on any mobile device; as soon as it is I’ll include it in my tests.
                            </p>
                            <p>
                                If you know of more mobile browsers, please leave a comment.
                            </p>
                            <p>
                                Opera and WebKit form the vanguard of the mobile space, IE, NetFront and Blackberry the rearguard. We’ll leave it at that for the moment; I will provide a more detailed breakdown when I have more data.
                            </p>
                            <h3>
                                Test pages
                            </h3>
                            <p>
                                I’m creating new test pages for my mobile tests. The main reason is readability; my current test pages are optimised for screen, and the events tests, especially, require ample amounts of space to see all event reports. Mobile devices just don’t have that space available. Besides, the event test pages refuse to work in Nokia WebKit (two versions tested).
                            </p>
                            <p>
                                After three or four tests I found that the version of IE Mobile I’m using doesn’t support the event object at all and requires you to use inline events. <code>document.onclick</code>, for instance, is not supported. (Oh, and <code>createTextNode()</code> seems to be missing, too.)
                            </p>
                            <p>
                                So theoretically, if I want to give IE Mobile a fair chance to compete, I’d have to write tests that use inline event handlers only and don’t depend on the event object.
                            </p>
                            <p>
                                Right now I’m not giving IE Mobile a fair chance. Obviously, I will validate my conclusions by an IE Mobile test on a completely different phone, but if that IE version has the same problems, I’m going to quietly forget about it. I’m just not going to waste my time on a browser that forces me to break one of the core rules of unobtrusive JavaScript.
                            </p>
                            <p>
                                By the way, don’t blame the regular IE team for this fantastically incapable browser. IE Mobile is created by a completely different team.
                            </p>
                            <p>
                                But exactly which IE Mobile was I testing? That turns out to be a tricky question.
                            </p>
                            <h3>
                                Identification
                            </h3>
                            <p>
                                Identifying exactly which browser is running on a certain phone is going to be a major problem. Mobile browsers, being chromeless, are usually impossible to distinguish by sight, so I need a browser detect script to help me out. Unfortunately, writing such a script is not as easy as it seems.
                            </p>
                            <p>
                                Right now browser vendors are running around like headless chicken strewing identification strings like chaff, making sure they’re totally incompatible with desktop identification strings, other mobile identification strings, and occasionally even other identification strings sent by the same browser.
                            </p>
                            <p>
                                Opera is rumoured to be pulling its act together, but I haven’t yet personally verified that.
                            </p>
                            <p>
                                In any case, distrust any market share stats of mobile browsers you see. The detection script is quite likely to be totally wrong.
                            </p>
                            <h4>
                                IE
                            </h4>
                            <p>
                                When I started writing this entry I was convinced that the IE Mobile I was testing was the brand-new IE Mobile 6. Why? Because it identified itself as IE6. Silly me. I’m not going to make that mistake any more.
                            </p>
                            <p>
                                When I saw <a href="http://www.intomobile.com/2009/03/04/windows-mobile-65s-internet-explorer-mobile-6-video-walk-through.html">this IE Mobile 6 promo video</a> I started to doubt my identification. The IE Mobile I test doesn’t have all these new features, even though it runs on a touchscreen phone. Besides, IE Mobile 6 has not yet been released (I think).
                            </p>
                            <p>
                                So the mobile browser identifying itself as IE Mobile 6 is in fact the earlier IE Mobile that was branched off from IE4. Still, it supports basic Ajax, something that IE4 didn’t.
                            </p>
                            <p>
                                Now if the old IE Mobile identifies itself as IE6, how will the new IE Mobile, officially announced as version 6, identify itself? <em>Also</em> as IE6? I wouldn’t put it beyond Microsoft.
                            </p>
                            <p>
                                To make things worse the old IE Mobile also has <code>IEMobile 7.11</code> in its identification string. No doubt the new IE Mobile will announce itself as <code>IEMobile 8.01</code> at the very least.
                            </p>
                            <h4>
                                WebKit
                            </h4>
                            <p>
                                WebKit version numbers are mostly useless. The most common mobile one I encountered is 422, which is distinctly lower than Safari 3.0’s 522. The funny thing is that WebKit on Nokia supports <code>:only-child</code> and Safari 3.0 doesn’t.
                            </p>
                            <p>
                                Therefore it seems likely that Nokia has branched off its browser from WebKit 422 and then continued to work on it by itself, importing (apparently) certain newer WebKit modules but not updating to an entirely new version. They didn’t bother to update the identification string, either.
                            </p>
                            <p>
                                Worse, many other mobile device manufacturers are doing the same. WebKit/422 on Nokia is likely to be different from WebKit/422 on Motorola. I’m inches away from declaring the WebKit version number completely worthless.
                            </p>
                            <p>
                                By the way, the <code>navigator.vendor</code> of all mobile WebKits I’ve seen so far is Apple! This is pure misinformation (except on the iPhone), and I assume it’s a mistake of the WebKit core team who’ve accidentally left this value in place when they received updates from Apple. Please make this property empty; no information is better than false information.
                            </p>
                            <h4>
                                Opera
                            </h4>
                            <p>
                                Although modern Opera’s Mobile or Mini have <code>Mobile</code> or <code>Mini</code> in their identification string, the particular versions I’m using don’t. Fortunately Opera Mobile version numbering follows the Opera desktop one, so the knowledge that I’m testing version 9.5 helps me instead of hindering me.
                            </p>
                            <p>
                                As to the Mini, it took me and an Opera employee quite some time to identify it as version 2; distinctly antiquated. Besides, when I sent it over to <a href="http://stevesouders.com/ua/parse.php">Steve Souders’s UA String Parser</a>, which uses the HTTP User-Agent string instead of JavaScript’s <code>navigator.userAgent</code>, this browser identified itself as NetFront! The string was totally, and I mean <em>totally</em>, different.
                            </p>
                            <p>
                                You can’t make this up.
                            </p>
                            <h3>
                                New classes of incompatibilities
                            </h3>
                            <p>
                                It seems that Nokia devices refuse to send key codes to the browsers. Although all key events are properly fired, <code>keyCode</code> and friends, which are supposed to contain the key number, stubbornly remain <code>0</code>. This is not the browsers’ fault; if the device withholds this information there’s nothing they can do.
                            </p>
                            <p>
                                Until now I’ve seen this Nokia bug only on devices with numerical keyboards. Maybe touch devices or devices with qwerty keyboards will behave properly. One more thing to test.
                            </p>
                            <p>
                                This is an example of an entirely new class of problems: device compatibility errors. Since I’ve only discovered them just now I’m not yet sure how to treat them, except that we should be very careful to distinguish them from browser compatibility errors.
                            </p>
                            <p>
                                There’s also a new class of browser compatibility errors: when browsers are unable to make full use of the device’s capabilities. An example is an orientation change from portrait to landscape or vice versa: the device may support this fine, but if the browser doesn’t, nothing happens. On the HTC Diamond Opera supports orientation change; IE Mobile doesn’t.
                            </p>
                            <h3>
                                The beginning
                            </h3>
                            <p>
                                This is only the beginning of our research into the mobile sphere and our discovery of exciting new classes of incompatibilities. Again, if you’re interested in helping me out and/or have experience in mobile browser compatibility problems, <a href="http://twitter.com/ppk">follow me on Twitter</a>. I’ll need the help.
                            </p>
                        </blockquote>
                    </div>
                    <p class="bookmark-source">
                        Source: <a href="http://www.quirksmode.org/blog/archives/2009/03/testing_mobile.html">http://www.quirksmode.org/blog/archives/2009/03/testing_mobile.html</a>
                    </p>
                </div>
            </article>

            <nav id="post-nav">


            </nav>
        </section>

        <footer id="site-footer" class="nocontent">
            <p>
                This site is purely my personal work and does not reflect the
                views of my employer.
            </p>
            <p class="license">
                <a class="icon" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width: 0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png"></a>
                This work is licensed under a
                <a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported
                    License</a>.
            </p>
        </footer>

        <script async src="/static/js/common.js"></script>
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/run_prettify.min.js" integrity="sha256-hj+5FRlAuvAFANiefn0PpJYCkV1X4QT9EgiPd+6QnCw=" crossorigin="anonymous"></script>
    </body>
</html>
