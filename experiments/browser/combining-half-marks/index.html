<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Browser Combining Half Mark Support Test</title>
        <!--[if lt IE 9]><script>
            for(var e,l='article aside footer header nav section'.split(' ');e=l.pop();document.createElement(e))
        </script><![endif]-->
        <style>
            body {
                font-family: sans-serif;
                font-size: 12pt;
                margin: 1em auto;
                padding: 1em;
                max-width: 40em;
            }

            img {
                border: solid blue 2px;
            }

            section h1 {
                font-size: 110%;
            }

            #arial {
                font-family: "Arial";
            }

            #arial-unicode {
                font-family: "Arial Unicode MS";
            }

            #helvetica {
                font-family: Helvetica;
            }

            #fallback-stack {
            	font-family: "Arial", "Arial Unicode MS", sans-serif;
            }

            .no-ligatures {
                /* Antiques */
                -moz-font-feature-settings: "liga=0, dlig=0";
                /* Modern */
                -moz-font-feature-settings: "liga" 0, "dlig" 0;
                -webkit-font-feature-settings: "liga" 0, "dlig" 0;
                /* Standard */
                font-feature-settings: "liga" 0, "dlig" 0;
            }
            .no-ligatures::after {
                content: " ligatures disabled (liga=0, dlig=0)";
                color: #669;
            }

            .common-ligatures {
                /* Antiques */
                -moz-font-feature-settings: "liga=1, dlig=0";
                /* Modern */
                -moz-font-feature-settings: "liga" 1, "dlig" 0;
                -webkit-font-feature-settings: "liga" 1, "dlig" 0;
                /* Standard */
                font-feature-settings: "liga" 1, "dlig" 0;
            }
            .common-ligatures::after {
                content: " common ligatures enabled (liga=1, dlig=0)";
                color: #669;
            }

            .all-ligatures {
                /* Antiques */
                -moz-font-feature-settings: "liga=1, dlig=1";
                /* Modern */
                -moz-font-feature-settings: "liga" 1, "dlig" 1;
                -webkit-font-feature-settings: "liga" 1, "dlig" 1;
                /* Standard */
                font-feature-settings: "liga" 1, "dlig" 1;
            }
            .all-ligatures::after {
                content: " all ligatures enabled (liga=1, dlig=1)";
                color: #669;
            }
        </style>
    </head>
    <body>
        <h1>Browser Combining Half Mark Support</h1>

        <h2>Background</h2>
        <p>
            This is a test of correct handling of the <code>COMBINING LIGATURE LEFT HALF</code> and <code>COMBINING LIGATURE RIGHT HALF</code> diacritics. See <a href="http://www.unicode.org/versions/Unicode6.0.0/ch07.pdf">the Unicode 6 specification chapter 7, page 235-236</a> for the specification and correct rendering.
        </p>

        <h3>Summary</h3>
        <p>
            Reportedly very old systems (presumably Windows XP's original Arial Unicode MS release) will display missing glyph boxes.
        </p>
        <p>
            All browsers on Windows XP and Firefox 18 on OS X will display something completely broken like this, where the diacritic is not combined with the letter and the curves do not meet:<br>
            <img src="xp-all-and-ff18-mac.png">
        </p>
        <p>
            All browsers on Windows 7 display consistently using every test font, with the combined diacritic and the two halves combining into a circle:<br>
            <img src="correct-rendering.png">
        </p>
        <p>
            Browsers on OS X 10.8 and 10.9 will usually display something in between where the ligature is
            correctly combined with the preceding character but does not connect with the other half of the
            ligature. This display problem is caused by font-substitution — the combining half marks are not
            present in many fonts and it appears that the default text rendering will join combining marks
            across glyphs from a different font. If one of a small number of fonts is used, the display will
            be correct like Windows 7 – currently that list appears to be Arial (but not Arial Unicode MS),
            Microsoft Sans Serif, Tahoma and Times New Roman.
            <br>
            <img src="osx-10.8-font-fallback.png">
        </p>

        <h2>How your browser displays it</h2>

        <section id="default">
            <h1>Browser Default Sans-Serif</h1>
            <p>Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="no-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="common-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="all-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
        </section>

        <section id="arial">
            <h1>Arial</h1>
            <p>Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="no-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="common-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="all-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
        </section>

        <section id="arial-unicode">
            <h1>Arial Unicode MS</h1>
            <p>Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="no-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="common-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="all-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
        </section>

        <section id="helvetica">
            <h1>Helvetica</h1>
            <p>Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="no-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="common-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="all-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
        </section>

        <section id="fallback-stack">
            <h1>fallback: Arial, Arial Unicode MS, sans-serif</h1>
            <p>Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="no-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="common-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="all-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
        </section>
    </body>
</html>