<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Browser Combining Half Mark Support Test</title>
        <!--[if lt IE 9]><script>
            for(var e,l='article aside footer header nav section'.split(' ');e=l.pop();document.createElement(e))
        </script><![endif]-->
        <link href='http://fonts.googleapis.com/css?family=Noto+Sans&subset=latin,latin-ext,cyrillic' rel='stylesheet' type='text/css'>
        <style>
            body {
                font-family: sans-serif;
                font-size: 12pt;
                margin: 1em auto;
                padding: 1em;
                max-width: 40em;
            }

            img {
                border: solid blue 2px;
            }

            section h1 {
                font-size: 110%;
            }

            #arial {
                font-family: "Arial";
            }

            #arial-unicode {
                font-family: "Arial Unicode MS";
            }

            #helvetica {
                font-family: Helvetica;
            }

            #georgia {
                font-family: Georgia;
            }

            #fallback-stack {
                font-family: "Arial", "Arial Unicode MS", sans-serif;
            }

            #noto-sans {
                font-family: "Noto Sans";
            }

            .no-ligatures {
                /* Antiques */
                -moz-font-feature-settings: "liga=0, dlig=0";
                /* Modern */
                -moz-font-feature-settings: "liga" 0, "dlig" 0;
                -webkit-font-feature-settings: "liga" 0, "dlig" 0;
                /* Standard */
                font-feature-settings: "liga" 0, "dlig" 0;
            }
            .no-ligatures::after {
                content: " ligatures disabled (liga=0, dlig=0)";
                color: #669;
            }

            .common-ligatures {
                /* Antiques */
                -moz-font-feature-settings: "liga=1, dlig=0";
                /* Modern */
                -moz-font-feature-settings: "liga" 1, "dlig" 0;
                -webkit-font-feature-settings: "liga" 1, "dlig" 0;
                /* Standard */
                font-feature-settings: "liga" 1, "dlig" 0;
            }
            .common-ligatures::after {
                content: " common ligatures enabled (liga=1, dlig=0)";
                color: #669;
            }

            .all-ligatures {
                /* Antiques */
                -moz-font-feature-settings: "liga=1, dlig=1";
                /* Modern */
                -moz-font-feature-settings: "liga" 1, "dlig" 1;
                -webkit-font-feature-settings: "liga" 1, "dlig" 1;
                /* Standard */
                font-feature-settings: "liga" 1, "dlig" 1;
            }
            .all-ligatures::after {
                content: " all ligatures enabled (liga=1, dlig=1)";
                color: #669;
            }
        </style>
    </head>
    <body>
        <h1>Browser Combining Half Mark Support</h1>

        <h2>Background</h2>
        <p>
            This is a test of correct handling of the <code>COMBINING LIGATURE LEFT HALF</code> and <code>COMBINING LIGATURE RIGHT HALF</code> diacritics. See <a href="http://www.unicode.org/versions/Unicode6.0.0/ch07.pdf">the Unicode 6 specification chapter 7, page 235-236</a> for the specification and correct rendering.
        </p>

        <h3>Summary</h3>
        <p>
            Reportedly very old systems (Windows XP with old versions of Arial Unicode MS) will display
            missing glyph boxes.
        </p>
        <p>
            All browsers on Windows XP and Firefox 18 on OS X will display something completely broken like
            this, where the diacritic is not combined with the letter and the curves do not meet:<br>
            <img src="xp-all-and-ff18-mac.png">
        </p>
        <p>
            All browsers except for IE8 on Windows 7+ display consistently when using fonts which do not
            require font substitution, with the combined diacritic and the two halves combining into a
            circle:<br>
            <img src="correct-rendering.png">
        </p>
        <p>
            All browsers on Windows 7 display incorrectly when font substitution occurs.
        </p>
        <p>
            All browsers on OS X 10.8 and 10.9 display incorrectly when font substitution occurs:<br>
            <img src="osx-10.8-font-fallback.png"><br>
            Fonts such as Arial (but not Arial Unicode MS), Microsoft Sans Serif, Tahoma and Times New Roman
            will display correctly
        </p>

        <p>
            The Noto Sans webfont included below has all of the gylphs and should display correctly on every
            platform except for Windows XP.
        </p>

        <h2>Bug Reports</h2>
        <ol>
            <li><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=961186">Firefox #961186</a></li>
            <li><a href="https://code.google.com/p/chromium/issues/detail?id=335674">Chrome #335674</a></li>
            <li>Safari: rdar://13105608</li>
            <li><a href="https://bugs.webkit.org/show_bug.cgi?id=135510">WebKit #135510</a></li>
            <li><a href="https://connect.microsoft.com/IE/feedback/details/934624/font-substitution-causes-incorrect-text-rendering-for-combining-half-marks">Internet Explorer</a></li>
        </ol>

        <h2>How your browser displays it</h2>

        <section id="default">
            <h1>Browser Default Sans-Serif</h1>
            <p>Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="no-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="common-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="all-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
        </section>

        <section id="arial">
            <h1>Arial</h1>
            <p>Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="no-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="common-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="all-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
        </section>

        <section id="arial-unicode">
            <h1>Arial Unicode MS</h1>
            <p>Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="no-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="common-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="all-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
        </section>

        <section id="helvetica">
            <h1>Helvetica</h1>
            <p>Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="no-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="common-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="all-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
        </section>

        <section id="georgia">
            <h1>Georgia</h1>
            <p>Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="no-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="common-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="all-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
        </section>

        <section id="noto-sans">
            <h1>Noto Sans</h1>
            <p>Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="no-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="common-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="all-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
        </section>

        <section id="fallback-stack">
            <h1>fallback: Arial, Arial Unicode MS, sans-serif</h1>
            <p>Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="no-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="common-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
            <p class="all-ligatures">Mukhin, N. (Nikolaĭ Ḟedosi︠e︡ich)</p>
        </section>
    </body>
</html>
